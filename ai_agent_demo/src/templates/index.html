<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Data Governance Agent - Tobacco Industry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }
        .use-case-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .tobacco-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white p-6">
        <div class="container mx-auto">
            <h1 class="text-4xl font-bold mb-2">ü§ñ AI Data Governance Agent</h1>
            <p class="text-xl opacity-90">Intelligent assistant that adapts to your role, understands FAIR principles, and provides context-aware recommendations for data governance workflows</p>
            <div class="mt-4 text-sm opacity-80">
                Capabilities: Dynamic persona switching ‚Ä¢ Real-time FAIR guidance ‚Ä¢ Use case-specific insights ‚Ä¢ Automated compliance workflows ‚Ä¢ ROI quantification
            </div>
        </div>
    </header>

    <!-- Before/After Transformation Section -->
    <section class="bg-gradient-to-r from-gray-50 to-blue-50 py-8">
        <div class="container mx-auto p-6">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">
                üîÑ Transformation: Before vs After AI Agent
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Before Column -->
                <div class="bg-red-50 rounded-lg p-6 border-l-4 border-red-400">
                    <h3 class="text-2xl font-bold text-red-800 mb-6 flex items-center">
                        ‚ùå Before AI Agent
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-red-700">Scattered data, no definitions</h4>
                                <p class="text-sm text-red-600">Data stewards spend 3 days hunting across 50+ systems</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-red-700">No starting point for CDEs</h4>
                                <p class="text-sm text-red-600">Manual CDE identification takes weeks</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-red-700">Tribal knowledge trapped in documents</h4>
                                <p class="text-sm text-red-600">Business definitions buried in emails and files</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-red-700">No clear ownership</h4>
                                <p class="text-sm text-red-600">SMEs unknown, data lineage unclear</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-red-700">Manual compliance checks</h4>
                                <p class="text-sm text-red-600">Audit preparation takes 3+ weeks</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-red-100 rounded">
                        <p class="text-sm font-semibold text-red-800">‚è±Ô∏è Time to Value: 3-6 months</p>
                        <p class="text-sm font-semibold text-red-800">üí∞ Cost: High manual effort, delayed projects</p>
                    </div>
                </div>

                <!-- After Column -->
                <div class="bg-green-50 rounded-lg p-6 border-l-4 border-green-400">
                    <h3 class="text-2xl font-bold text-green-800 mb-6 flex items-center">
                        ‚úÖ After AI Agent + Human Review
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-green-700">Draft metadata for 127 fields in 30 minutes</h4>
                                <p class="text-sm text-green-600">AI discovers and catalogs data across all systems</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-green-700">Suggested 44 high-priority CDEs</h4>
                                <p class="text-sm text-green-600">AI identifies CDEs with 94-96% confidence</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-green-700">Key terms extracted from documents</h4>
                                <p class="text-sm text-green-600">AI parses and structures business knowledge</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-green-700">Draft list of SMEs for review</h4>
                                <p class="text-sm text-green-600">AI suggests domain experts and data owners</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                            <div>
                                <h4 class="font-semibold text-green-700">Automated compliance workflows</h4>
                                <p class="text-sm text-green-600">Continuous monitoring, 2-day audit prep</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-green-100 rounded">
                        <p class="text-sm font-semibold text-green-800">‚ö° Time to Value: 2-3 weeks</p>
                        <p class="text-sm font-semibold text-green-800">üíé ROI: $2M+ annually, 85% time savings</p>
                    </div>
                </div>
            </div>
            
            <!-- Key Metrics -->
            <div class="mt-8 text-center">
                <div class="inline-flex bg-white rounded-lg p-4 shadow-lg border">
                    <div class="flex items-center space-x-8">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">85%</div>
                            <div class="text-sm text-gray-600">Time Reduction</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">91%</div>
                            <div class="text-sm text-gray-600">Quality Score</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">48</div>
                            <div class="text-sm text-gray-600">AI Contexts</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600">$2M+</div>
                            <div class="text-sm text-gray-600">Annual ROI</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Interactive Demo Buttons -->
            <div class="mt-8 text-center">
                <h3 class="text-xl font-bold mb-6 text-gray-800">üîÑ Complete Data Governance Process Flow</h3>
                
                <!-- Process Flow Visualization -->
                <div class="mb-8 flex justify-center">
                    <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl">
                        <div class="flex items-center justify-between space-x-4">
                            <div class="flex flex-col items-center">
                                <div id="step1-indicator" class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-2 border-2 border-blue-300">
                                    <span class="text-blue-600 font-bold">1</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Discover</div>
                                    <div class="text-gray-600">Find Assets</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="step2-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">2</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Standardize</div>
                                    <div class="text-gray-600">CDEs</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="step3-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">3</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Define</div>
                                    <div class="text-gray-600">Metadata</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="step4-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">4</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Protect</div>
                                    <div class="text-gray-600">Quality Rules</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="step5-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">5</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Report</div>
                                    <div class="text-gray-600">Governance</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Process Control Buttons -->
                <div class="mb-6">
                    <button onclick="startGovernanceProcess()" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold shadow-lg">
                        üöÄ Start Complete Governance Process
                    </button>
                    <button onclick="resetProcess()" class="ml-4 px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all">
                        üîÑ Reset Process
                    </button>
                </div>
                
                <!-- Individual Step Buttons -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <button id="step1-btn" onclick="runStep(1)" class="px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all" disabled>
                        <div class="font-semibold">Step 1: Discover</div>
                        <div class="text-xs">üîç Data Assets</div>
                    </button>
                    <button id="step2-btn" onclick="runStep(2)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Step 2: Standardize</div>
                        <div class="text-xs">üè∑Ô∏è CDEs</div>
                    </button>
                    <button id="step3-btn" onclick="runStep(3)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Step 3: Define</div>
                        <div class="text-xs">üìù Metadata</div>
                    </button>
                    <button id="step4-btn" onclick="runStep(4)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Step 4: Protect</div>
                        <div class="text-xs">üõ°Ô∏è Quality Rules</div>
                    </button>
                    <button id="step5-btn" onclick="runStep(5)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Step 5: Report</div>
                        <div class="text-xs">üìã Governance</div>
                    </button>
                </div>
                
                <!-- Process Status -->
                <div id="process-status" class="mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400" style="display: none;">
                    <div class="text-sm font-semibold text-blue-800">Process Status:</div>
                    <div id="status-text" class="text-sm text-blue-700">Ready to begin governance transformation...</div>
                </div>
            </div>
            
            <!-- Demo Results Container -->
            <div id="demo-container" class="mt-8" style="display: none;">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div id="demo-content">
                        <!-- Demo content will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAIR Principles Navigation -->
    <nav class="bg-white shadow-sm border-b-2 border-gray-200">
        <div class="container mx-auto p-4">
            <div class="flex justify-between items-center">
                <!-- FAIR Navigation -->
                <div class="flex space-x-6">
                    <button onclick="highlightFAIR('findable')" id="fair-findable" class="fair-nav-btn px-4 py-2 rounded-lg text-blue-600 bg-blue-50 font-semibold">
                        üîç FINDABLE
                    </button>
                    <button onclick="highlightFAIR('accessible')" id="fair-accessible" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                        üîì ACCESSIBLE
                    </button>
                    <button onclick="highlightFAIR('interoperable')" id="fair-interoperable" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                        üîÑ INTEROPERABLE
                    </button>
                    <button onclick="highlightFAIR('reusable')" id="fair-reusable" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                        ‚ôªÔ∏è REUSABLE
                    </button>
                </div>
                
                <!-- Persona Selection -->
                <div class="flex items-center space-x-4">
                    <span class="text-sm font-medium text-gray-700">View as:</span>
                    <select id="persona-selector" onchange="switchPersona()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                        <option value="steward">üõ°Ô∏è Data Steward</option>
                        <option value="owner">üëë Data Owner</option>
                        <option value="sme">üß† SME</option>
                    </select>
                </div>
            </div>
            
            <!-- Current Persona Description -->
            <div id="persona-description" class="mt-3 p-3 bg-blue-50 rounded-lg">
                <p class="text-sm text-blue-800">
                    <strong>Data Steward View:</strong> Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across tobacco regulatory landscape.
                </p>
            </div>
        </div>
    </nav>

    <!-- AI Intelligence Panel -->
    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border-b">
        <div class="container mx-auto p-4">
            <div id="ai-status" class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium text-gray-700">AI Agent Active</span>
                    <span id="ai-activity" class="text-xs text-gray-500">Ready to assist with FAIR data governance</span>
                </div>
                <div id="impact-metrics" class="text-xs text-purple-600">
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-6">
        
        <!-- Use Cases Overview -->
        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">üéØ Tobacco Data Governance Use Cases</h2>
            <div id="use-cases-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Use cases will be loaded here -->
            </div>
        </section>

        <!-- Search Section -->
        <section class="mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">
                    <i class="fas fa-search mr-2 text-blue-600"></i>AI-Powered Data Discovery
                </h2>
                <div class="flex gap-4 mb-4">
                    <input 
                        type="text" 
                        id="search-input" 
                        placeholder="Search for 'nicotine', 'biomarker', 'surveillance', 'regulatory'..." 
                        class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    >
                    <select id="use-case-filter" class="p-3 border border-gray-300 rounded-lg">
                        <option value="">All Use Cases</option>
                        <option value="Product Description (Nonclinical)">Product Description (Nonclinical)</option>
                        <option value="Product Impact on Individual Health">Product Impact on Individual Health</option>
                        <option value="Product Impact on Population Health">Product Impact on Population Health</option>
                        <option value="Comprehensive Regulatory Compliance">Comprehensive Regulatory Compliance</option>
                    </select>
                    <button onclick="searchData()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i class="fas fa-search mr-2"></i>Search
                    </button>
                    <button onclick="clearFilter()" class="px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
                        <i class="fas fa-times mr-2"></i>Clear
                    </button>
                </div>
                <div id="search-results" class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </section>

        <!-- AI Suggestions Panel -->
        <section class="mb-8" id="ai-suggestions-panel" style="display: none;">
            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-lg p-6 border-l-4 border-purple-500">
                <h3 class="text-xl font-bold mb-4 text-purple-800">
                    <i class="fas fa-brain mr-2"></i>AI Smart Suggestions
                </h3>
                <div id="ai-suggestions" class="space-y-3">
                    <!-- AI suggestions will appear here -->
                </div>
            </div>
        </section>

        <!-- Results Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            
            <!-- Data Inventory -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-blue-600">
                    <i class="fas fa-database mr-2"></i>Data Inventory
                    <span class="text-sm font-normal text-gray-500 ml-2">(FINDABLE)</span>
                </h3>
                <div id="data-inventory">
                    <p class="text-gray-600">Use search to discover tobacco data assets...</p>
                </div>
            </div>

            <!-- Business Glossary -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-green-600">
                    <i class="fas fa-book mr-2"></i>Business Glossary & CDEs
                    <span class="text-sm font-normal text-gray-500 ml-2">(REUSABLE)</span>
                </h3>
                <div id="business-glossary">
                    <!-- Auto-loaded on page load -->
                </div>
            </div>

            <!-- Data Quality -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-purple-600">
                    <i class="fas fa-chart-line mr-2"></i>Data Quality Metrics
                    <span class="text-sm font-normal text-gray-500 ml-2">(INTEROPERABLE)</span>
                </h3>
                <div id="data-quality">
                    <!-- Auto-loaded on page load -->
                </div>
            </div>
        </div>

        <!-- Workflow Section -->
        <section class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-xl font-bold mb-4 text-orange-600">
                <i class="fas fa-cogs mr-2"></i>Tobacco Compliance Workflow
                <span class="text-sm font-normal text-gray-500 ml-2">(ACCESSIBLE)</span>
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <select id="asset-selector" class="p-3 border border-gray-300 rounded-lg">
                    <option value="">Select Data Asset...</option>
                    <option value="DB001">Product Characterization DB</option>
                    <option value="DB002">Biomarker Clinical DB</option>
                    <option value="DB003">Population Surveillance DB</option>
                    <option value="DB004">Regulatory Compliance DB</option>
                    <option value="FILE001">Product Characterization Data</option>
                    <option value="API001">FDA Submission API</option>
                </select>
                <select id="action-selector" class="p-3 border border-gray-300 rounded-lg">
                    <option value="access_request">Request Data Access</option>
                    <option value="compliance_check">Run Compliance Check</option>
                    <option value="cde_validation">Validate CDEs</option>
                    <option value="fda_submission">Prepare FDA Submission</option>
                </select>
                <button onclick="initiateWorkflow()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    <i class="fas fa-play mr-2"></i>Initiate Workflow
                </button>
            </div>
            <div id="workflow-result" class="mt-4"></div>
        </section>

    </div>

    <script>
        // Global variables for demo state
        let currentPersona = 'steward';
        let currentFAIR = 'findable';
        
        // Persona definitions
        const personas = {
            steward: {
                name: "üõ°Ô∏è Data Steward",
                description: "Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across tobacco regulatory landscape.",
                color: "blue",
                priorities: ["Quality Metrics", "Compliance Tracking", "Governance Workflows"]
            },
            owner: {
                name: "üëë Data Owner", 
                description: "Manage data assets, control access, and demonstrate business value. Your goal: Maximize ROI from tobacco data while ensuring secure, controlled access.",
                color: "green",
                priorities: ["Asset Management", "Access Control", "Business Value", "ROI Tracking"]
            },
            sme: {
                name: "üß† SME",
                description: "Provide domain expertise, validate business definitions, and ensure data meets regulatory requirements. Your goal: Make tobacco data meaningful and fit-for-purpose.",
                color: "purple", 
                priorities: ["Business Definitions", "Domain Validation", "Regulatory Requirements"]
            }
        };

        // FAIR principle definitions
        const fairPrinciples = {
            findable: {
                title: "üîç FINDABLE",
                description: "AI indexes data across scattered sources and creates unified metadata catalog",
                example: "Data stewards ask: 'Show me datasets related to patient demographics' ‚Üí instant results",
                color: "blue"
            },
            accessible: {
                title: "üîì ACCESSIBLE", 
                description: "AI automates data access workflows with built-in compliance checks",
                example: "Steward requests access to claims data ‚Üí AI explains process, initiates request, tracks approvals",
                color: "green"
            },
            interoperable: {
                title: "üîÑ INTEROPERABLE",
                description: "AI identifies and standardizes data formats, units, and terminology",
                example: "AI suggests: 'Diagnosis_Code in System A maps to ICD-10 code in System B'",
                color: "orange"
            },
            reusable: {
                title: "‚ôªÔ∏è REUSABLE", 
                description: "AI drafts business definitions, flags CDEs, and enriches metadata",
                example: "AI drafts: 'Transaction Amount = Total billed amount per claim' + flags as CDE",
                color: "purple"
            }
        };

        function switchPersona() {
            const selector = document.getElementById('persona-selector');
            currentPersona = selector.value;
            const persona = personas[currentPersona];
            
            // Update description
            const description = document.getElementById('persona-description');
            description.innerHTML = `
                <p class="text-sm text-${persona.color}-800">
                    <strong>${persona.name} View:</strong> ${persona.description}
                </p>
            `;
            description.className = `mt-3 p-3 bg-${persona.color}-50 rounded-lg`;
            
            // Update AI activity
            updateAIActivity(`Adapting interface for ${persona.name}...`);
            
            // Reload data with persona context
            setTimeout(() => {
                loadPersonaSpecificData();
                updateAISuggestionsForContext();
                updateAIActivity(`Ready to assist ${persona.name} with FAIR data governance`);
            }, 1000);
        }

        function highlightFAIR(principle) {
            currentFAIR = principle;
            
            // Reset all FAIR buttons
            document.querySelectorAll('.fair-nav-btn').forEach(btn => {
                btn.className = 'fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50';
            });
            
            // Highlight selected principle
            const fairPrinciple = fairPrinciples[principle];
            const btn = document.getElementById(`fair-${principle}`);
            btn.className = `fair-nav-btn px-4 py-2 rounded-lg text-${fairPrinciple.color}-600 bg-${fairPrinciple.color}-50 font-semibold`;
            
            // Update AI activity
            updateAIActivity(`Demonstrating ${fairPrinciple.title} capabilities...`);
            
            // Show FAIR-specific UI elements and update suggestions
            setTimeout(() => {
                highlightFAIRFeatures(principle);
                updateAISuggestionsForContext();
                updateAIActivity(`${fairPrinciple.title} - ${fairPrinciple.description}`);
            }, 500);
        }

        function updateAIActivity(message) {
            const activity = document.getElementById('ai-activity');
            activity.textContent = message;
            
            // Show working animation
            const status = document.getElementById('ai-status');
            status.classList.add('animate-pulse');
            setTimeout(() => status.classList.remove('animate-pulse'), 2000);
        }

        function loadPersonaSpecificData() {
            const persona = personas[currentPersona];
            
            // Update impact metrics based on persona
            const metrics = document.getElementById('impact-metrics');
            if (currentPersona === 'owner') {
                metrics.innerHTML = `
                    <span class="mr-4">üí∞ $2M+ ROI annually</span>
                    <span class="mr-4">‚ö° 95% access automation</span>
                    <span>üîê 100% compliance tracking</span>
                `;
            } else if (currentPersona === 'sme') {
                metrics.innerHTML = `
                    <span class="mr-4">üìö 44 CDEs identified</span>
                    <span class="mr-4">üéØ 98% definition accuracy</span>
                    <span>‚ö° 80% validation time saved</span>
                `;
            } else {
                metrics.innerHTML = `
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                `;
            }
        }

        function highlightFAIRFeatures(principle) {
            // Add visual cues based on FAIR principle
            const elements = document.querySelectorAll('.bg-white');
            elements.forEach(el => {
                if (principle === 'findable' && el.querySelector('#search-input')) {
                    el.style.boxShadow = '0 0 15px rgba(59, 130, 246, 0.3)';
                } else if (principle === 'accessible' && el.querySelector('#workflow-result')) {
                    el.style.boxShadow = '0 0 15px rgba(34, 197, 94, 0.3)';
                } else if (principle === 'interoperable' && el.querySelector('#business-glossary')) {
                    el.style.boxShadow = '0 0 15px rgba(249, 115, 22, 0.3)';
                } else if (principle === 'reusable' && el.querySelector('#data-quality')) {
                    el.style.boxShadow = '0 0 15px rgba(147, 51, 234, 0.3)';
                } else {
                    el.style.boxShadow = '';
                }
            });
        }

        function updateAISuggestionsForContext() {
            const persona = personas[currentPersona];
            const fairPrinciple = fairPrinciples[currentFAIR];
            
            // Get current use case context
            const useCaseFilter = document.getElementById('use-case-filter').value;
            const useCase = useCaseFilter || 'general';
            
            let suggestions = [];
            
            // Generate suggestions based on FAIR principle + Persona + Use Case combination
            if (currentFAIR === 'findable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Product Characterization Discovery',
                                content: 'AI found 47 product specification fields across 8 systems. Implement unified catalog to reduce nonclinical data discovery from 2 days to 15 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Section 2.8 Data Indexing',
                                content: 'Auto-index tobacco product tabulation data per FDA Section 2.8 standards. Estimated effort savings: 35 hours/week for regulatory stewards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Biomarker Data Discovery',
                                content: 'AI indexed 156 biomarker fields across clinical databases. Unified discovery reduces individual health assessment prep from 4 days to 45 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Clinical Data Auto-Cataloging',
                                content: 'Smart indexing of cotinine, NNAL, and exposure biomarkers. Saves clinical stewards 25 hours/week in data preparation.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Surveillance Data Unification',
                                content: 'AI discovered 89 population health metrics across epidemiological systems. Unified catalog reduces surveillance prep from 5 days to 1 hour.'
                            },
                            {
                                type: 'indexing',
                                title: 'Public Health Data Indexing',
                                content: 'Auto-catalog demographic, behavioral, and health outcome data for population studies. Saves 40 hours/week for health stewards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Cross-Section Data Discovery',
                                content: 'AI unified discovery across Sections 2.7-2.10. Comprehensive regulatory package prep reduced from 3 weeks to 2 days.'
                            },
                            {
                                type: 'indexing',
                                title: 'FDA Submission Catalog',
                                content: 'Smart indexing for complete PMTA submissions. Auto-links product, clinical, and population data. Saves 60 hours/week.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Universal Data Discovery',
                                content: 'AI found 127 total fields across tobacco systems. Recommend implementing unified metadata catalog to improve discovery from 3 days to 30 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Smart Indexing Opportunity',
                                content: 'AI can auto-index 50+ Excel files and 12 email repositories. Estimated effort savings: 40 hours/week for your steward team.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Product Data Asset ROI',
                                content: 'Nonclinical data assets worth $800K annually. AI discovery increases utilization by 70%, adding $560K value to product development.'
                            },
                            {
                                type: 'catalog',
                                title: 'Product Catalog Investment',
                                content: 'Section 2.8 compliance catalog reduces regulatory delays by 40%. Estimated value: $2M saved in faster market entry.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Biomarker Asset Portfolio',
                                content: 'Clinical biomarker data valued at $1.2M. AI findability increases research productivity by 85%, adding $1M annual value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Clinical Discovery ROI',
                                content: 'Unified clinical catalog saves $300K annually in study startup costs. Faster biomarker discovery accelerates research timelines.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Population Data Monetization',
                                content: 'Surveillance data assets worth $600K annually. AI discovery enables 3x more health studies, generating $1.8M value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Epidemiological Investment',
                                content: 'Population health catalog reduces study planning by 60%. Value: $400K saved in faster public health insights.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Regulatory Portfolio Value',
                                content: 'Complete PMTA data portfolio worth $3.5M. AI findability reduces submission prep by 75%, saving $2.6M annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'FDA Submission ROI',
                                content: 'Comprehensive catalog accelerates submissions by 90 days. Faster approvals generate $5M+ in early market revenue.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Asset Visibility ROI',
                                content: 'Implementing AI discovery across 7 data sources could increase asset utilization by 60%. Projected value: $500K annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'Catalog Investment',
                                content: 'Unified metadata catalog reduces data discovery costs by $200K/year. Payback period: 6 months with current search volumes.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Product Metadata Validation',
                                content: 'AI suggests enriching tobacco product metadata with Section 2.8 nonclinical standards. Your expertise needed for product characterization accuracy.'
                            },
                            {
                                type: 'tagging',
                                title: 'Nonclinical Data Tagging',
                                content: 'AI can auto-tag product specification data with FDA categories (chemistry, toxicology, pharmacology). Expert validation needed: 94% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Biomarker Metadata Enhancement',
                                content: 'AI suggests enriching biomarker metadata with ICH bioanalytical guidelines. Your clinical expertise critical for accuracy validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Clinical Endpoint Tagging',
                                content: 'AI can classify biomarker data by endpoint type (exposure, effect, susceptibility). Clinical SME validation required: 91% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Epidemiological Metadata',
                                content: 'AI suggests enriching population data with WHO surveillance standards. Your public health expertise needed for study design validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Health Outcome Classification',
                                content: 'AI can categorize health outcomes by ICD-10 codes and severity. Epidemiological expert review needed: 89% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Cross-Section Validation',
                                content: 'AI suggests harmonizing metadata across Sections 2.7-2.10. Your regulatory expertise critical for FDA submission readiness.'
                            },
                            {
                                type: 'tagging',
                                title: 'PMTA Data Classification',
                                content: 'AI can tag data by PMTA section requirements (collection, tabulation, analysis, exchange). Regulatory SME validation needed: 96% confidence.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Metadata Enrichment',
                                content: 'AI suggests enriching tobacco product metadata with Section 2.8 standards. This improves findability for regulatory submissions.'
                            },
                            {
                                type: 'tagging',
                                title: 'Smart Tagging',
                                content: 'AI can auto-tag biomarker data with regulatory categories (FDA, ICH, ISO). Confidence: 96% based on content analysis.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'accessible') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Nonclinical Access Workflow',
                                content: 'AI automates product characterization data access with Section 2.8 compliance checks. Reduces access time from 5 days to 2 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Product Data Compliance',
                                content: 'Set up automated compliance monitoring for tobacco product specifications. AI tracks usage for FDA nonclinical audit readiness.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Clinical Data Access Control',
                                content: 'AI automates biomarker data access with GCP compliance checks. Reduces clinical data approval from 10 days to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Biomarker Data Governance',
                                content: 'Automated monitoring for clinical biomarker access ensures ICH guidelines compliance. AI tracks all research usage patterns.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Population Data Ethics',
                                content: 'AI automates surveillance data access with privacy compliance checks. Reduces IRB approval workflow from 3 weeks to 2 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'Public Health Data Tracking',
                                content: 'Automated monitoring for population health data ensures ethical research compliance. AI tracks all epidemiological usage.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Multi-Section Access Control',
                                content: 'AI orchestrates access across Sections 2.7-2.10 with comprehensive compliance. Reduces PMTA data prep from 3 weeks to 3 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'FDA Submission Tracking',
                                content: 'End-to-end compliance monitoring for complete regulatory submissions. AI ensures audit trail across all data sections.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Access Workflow Automation',
                                content: 'AI can automate 85% of data access requests with built-in compliance checks. Reduces approval time from 2 weeks to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Compliance Monitoring',
                                content: 'Set up automated FDA compliance monitoring for tobacco data access. AI tracks all data usage for audit readiness.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Product Data Access ROI',
                                content: 'Automated nonclinical access control saves $200K annually in compliance costs. Reduces product development security risks by 80%.'
                            },
                            {
                                type: 'audit',
                                title: 'Section 2.8 Audit Efficiency',
                                content: 'Automated product data tracking reduces FDA audit prep by 85%. Typical compliance review: 3 days vs 3 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Clinical Access ROI',
                                content: 'Automated biomarker access control saves $350K annually in GCP compliance. Reduces clinical trial security risks by 90%.'
                            },
                            {
                                type: 'audit',
                                title: 'Biomarker Audit Trail',
                                content: 'Automated clinical data tracking reduces regulatory audit prep by 90%. ICH compliance review: 2 days vs 4 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Population Data Ethics ROI',
                                content: 'Automated surveillance access saves $150K annually in IRB compliance costs. Reduces public health study risks by 85%.'
                            },
                            {
                                type: 'audit',
                                title: 'Epidemiological Audit',
                                content: 'Automated population health tracking reduces ethics audit prep by 80%. Privacy compliance review: 1 day vs 2 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'PMTA Access Management',
                                content: 'Comprehensive access control saves $500K annually across all regulatory sections. Reduces FDA submission risks by 95%.'
                            },
                            {
                                type: 'audit',
                                title: 'Multi-Section Audit Value',
                                content: 'Automated cross-section tracking reduces PMTA audit prep by 95%. Complete FDA review: 5 days vs 8 weeks manual.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Access Control ROI',
                                content: 'Implementing role-based access reduces security risks by 70% and saves 25 hours/week in manual approvals. Value: $300K/year.'
                            },
                            {
                                type: 'audit',
                                title: 'Audit Trail Investment',
                                content: 'Automated access tracking reduces compliance audit costs by 90%. Typical audit preparation: 2 days vs 3 weeks manual.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Product Access Guidelines',
                                content: 'AI suggests product characterization access rules based on FDA Section 2.8 guidelines. Your nonclinical expertise needed for protocol design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Product Data Protocols',
                                content: 'AI can draft tobacco product data access protocols aligned with nonclinical standards. Expert review needed for regulatory accuracy.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Clinical Access Design',
                                content: 'AI suggests biomarker access rules based on ICH GCP guidelines. Your clinical expertise critical for appropriate researcher permissions.'
                            },
                            {
                                type: 'protocols',
                                title: 'Biomarker Access Protocols',
                                content: 'AI can draft clinical biomarker access protocols aligned with Section 2.7 collection standards. Clinical SME validation required.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Population Ethics Framework',
                                content: 'AI suggests surveillance data access rules based on WHO privacy guidelines. Your epidemiological expertise needed for ethical design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Public Health Protocols',
                                content: 'AI can draft population health access protocols aligned with surveillance standards. Public health SME review required.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Cross-Section Access Design',
                                content: 'AI suggests comprehensive access rules spanning Sections 2.7-2.10. Your regulatory expertise critical for PMTA submission protocols.'
                            },
                            {
                                type: 'protocols',
                                title: 'FDA Submission Protocols',
                                content: 'AI can draft complete PMTA access protocols aligned with all regulatory sections. Regulatory SME validation essential.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Domain-Based Permissions',
                                content: 'AI suggests clinical data access rules based on ICH GCP guidelines. Ensures appropriate researcher access to biomarker studies.'
                            },
                            {
                                type: 'protocols',
                                title: 'Access Protocol Design',
                                content: 'AI can draft tobacco-specific data access protocols aligned with Section 2.7 collection standards for your review.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'interoperable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Product Field Standardization',
                                content: 'AI identified 12 critical product field mappings for Section 2.8 compliance. Start with "PRODUCT_TYPE" ‚Üí "Product_Category" (97% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Nonclinical Data Harmonization',
                                content: 'Implementing AI-suggested product CDEs improves nonclinical data quality from 82% to 96%. Focus on chemistry and toxicology standards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Biomarker Field Mapping',
                                content: 'AI identified 18 biomarker field mappings for clinical compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Clinical Standards Alignment',
                                content: 'Implementing biomarker CDEs improves clinical data quality from 76% to 93%. Focus on exposure and effect biomarker standards.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Population Health Mapping',
                                content: 'AI identified 14 surveillance field mappings for epidemiological studies. Start with "AGE_GROUP" ‚Üí "Age_Category" (92% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Surveillance Standards',
                                content: 'Implementing population health CDEs improves surveillance data quality from 79% to 91%. Focus on demographic and outcome standards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Cross-Section Field Mapping',
                                content: 'AI identified 35 field mappings across Sections 2.7-2.10. Comprehensive PMTA standardization achieves 98% compliance readiness.'
                            },
                            {
                                type: 'standards',
                                title: 'FDA Standards Harmonization',
                                content: 'Implementing cross-section CDEs improves overall regulatory data quality from 85% to 97%. Complete PMTA standards alignment.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Field Mapping Priority',
                                content: 'AI identified 15 critical field mappings needed for tobacco regulatory compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Standards Harmonization',
                                content: 'Implementing AI-suggested CDE mappings improves data quality from 78% to 94%. Focus on Section 2.8-2.9 standards first.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Product Integration Savings',
                                content: 'AI nonclinical standardization reduces product development integration costs by 70%. Typical project: $150K vs $500K manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Product Data Reuse Value',
                                content: 'Standardized product data increases regulatory reuse by 400%. Each dataset now serves 5 submission types vs 1.2 previously.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Integration Cost Savings',
                                content: 'AI standardization reduces future integration costs by 60%. Typical project: $200K vs $500K for manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Data Reuse Value',
                                content: 'Standardized tobacco data increases reuse by 300%. Each dataset now serves 4 use cases vs 1.3 previously.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'Product CDE Validation',
                                content: 'AI detected "CHEMICAL_COMPOSITION" field requires expert validation for Section 2.8 CDE mapping. Chemistry expertise needed.'
                            },
                            {
                                type: 'terminology',
                                title: 'Product Terminology Standards',
                                content: 'AI suggests aligning "Tobacco_Type" with FDA product classification terminology. Your regulatory expertise needed for accuracy.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'CDE Validation Required',
                                content: 'AI detected "NNAL_CONC" field requires expert validation for CDE mapping. Please review against FDA biomarker guidance.'
                            },
                            {
                                type: 'terminology',
                                title: 'Terminology Standardization',
                                content: 'AI suggests aligning "Age_Verification" with ICH E6 Guidelines terminology. Your expertise needed for final validation.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'reusable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Product Data Quality Focus',
                                content: 'AI analysis shows 2 nonclinical files below 85% quality. Implement product specification cleansing to achieve 97% Section 2.8 readiness.'
                            },
                            {
                                type: 'governance',
                                title: 'Product Governance Policy',
                                content: 'AI suggests updating governance policies for tobacco product characterization quality rules. Draft Section 2.8 standards available.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Quality Score Improvement',
                                content: 'AI quality analysis shows 3 files below 80% quality threshold. Implement data cleansing workflow to achieve 95% target.'
                            },
                            {
                                type: 'governance',
                                title: 'Governance Policy Update',
                                content: 'AI suggests updating data governance policies to include tobacco-specific quality rules. Draft available for review.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Product Reuse ROI',
                                content: 'High-quality product data generates 6x ROI. Each $1 invested in nonclinical quality returns $6 in avoided regulatory rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Product Portfolio Value',
                                content: 'Nonclinical data portfolio valued at $2.1M with current quality. Reaching 97% Section 2.8 compliance increases value to $3.2M.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Reuse Multiplier Effect',
                                content: 'High-quality reusable data generates 5x ROI. Each $1 invested in quality improvement returns $5 in avoided rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Data Portfolio Value',
                                content: 'Your tobacco data portfolio valued at $3.2M with current quality scores. Reaching 95% quality increases value to $4.8M.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Product Definition Review',
                                content: 'AI drafted nonclinical definitions need expert review. Focus on "Chemical_Composition" definition for Section 2.8 regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Nonclinical Expert Validation',
                                content: 'AI confidence is 89% for "Toxicology_Endpoint" definition. Your chemistry expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Definition Enrichment Needed',
                                content: 'AI drafted business definitions need your expert review. Focus on "Exposure_Biomarker" definition for regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Expert Validation Request',
                                content: 'AI confidence is 87% for "Clinical_Endpoint" definition. Your domain expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    }
                }
            }
            
            // Display the updated suggestions
            displaySuggestions(suggestions);
        }

        function displaySuggestions(suggestions) {
            const panel = document.getElementById('ai-suggestions-panel');
            const container = document.getElementById('ai-suggestions');
            
            if (suggestions.length > 0) {
                container.innerHTML = suggestions.map(suggestion => `
                    <div class="bg-white p-4 rounded-lg border-l-4 border-${getColorByType(suggestion.type)}-400 shadow-sm">
                        <h4 class="font-bold text-${getColorByType(suggestion.type)}-800 text-sm mb-2">
                            ${getIconByType(suggestion.type)} ${suggestion.title}
                        </h4>
                        <p class="text-sm text-gray-700">${suggestion.content}</p>
                        <button class="mt-2 text-xs px-3 py-1 bg-${getColorByType(suggestion.type)}-100 text-${getColorByType(suggestion.type)}-700 rounded-full hover:bg-${getColorByType(suggestion.type)}-200">
                            Apply Suggestion
                        </button>
                    </div>
                `).join('');
                
                panel.style.display = 'block';
                
                // Update AI activity
                const persona = personas[currentPersona];
                const fairPrinciple = fairPrinciples[currentFAIR];
                setTimeout(() => {
                    updateAIActivity(`Generated ${suggestions.length} ${fairPrinciple.title} suggestions for ${persona.name}`);
                }, 500);
            } else {
                panel.style.display = 'none';
            }
        }

        function getColorByType(type) {
            const colors = {
                'access': 'green',
                'roi': 'blue', 
                'mapping': 'orange',
                'definition': 'purple',
                'quality': 'yellow',
                'compliance': 'red',
                'related': 'indigo',
                'discovery': 'blue',
                'indexing': 'cyan',
                'asset': 'green',
                'catalog': 'teal',
                'metadata': 'purple',
                'tagging': 'pink',
                'workflow': 'green',
                'access_control': 'emerald',
                'audit': 'slate',
                'permissions': 'lime',
                'protocols': 'sky',
                'standards': 'orange',
                'integration': 'amber',
                'reuse': 'violet',
                'cde_mapping': 'fuchsia',
                'terminology': 'rose',
                'governance': 'stone',
                'reuse_roi': 'blue',
                'portfolio': 'emerald',
                'definitions': 'purple',
                'validation': 'red'
            };
            return colors[type] || 'gray';
        }

        function getIconByType(type) {
            const icons = {
                'access': 'üîê',
                'roi': 'üí∞',
                'mapping': 'üîÑ',
                'definition': 'üìù',
                'quality': 'üìä',
                'compliance': 'üéØ',
                'related': 'üîç',
                'discovery': 'üîç',
                'indexing': 'üìë',
                'asset': 'üì¶',
                'catalog': 'üìö',
                'metadata': 'üè∑Ô∏è',
                'tagging': 'üè∑Ô∏è',
                'workflow': '‚ö°',
                'access_control': 'üîê',
                'audit': 'üìã',
                'permissions': 'üë•',
                'protocols': 'üìã',
                'standards': 'üìè',
                'integration': 'üîó',
                'reuse': '‚ôªÔ∏è',
                'cde_mapping': 'üó∫Ô∏è',
                'terminology': 'üìñ',
                'governance': '‚öñÔ∏è',
                'reuse_roi': 'üíé',
                'portfolio': 'üíº',
                'definitions': 'üìù',
                'validation': '‚úÖ'
            };
            return icons[type] || 'üí°';
        }

        async function loadUseCases() {
            try {
                const response = await fetch('/api/use-cases');
                const data = await response.json();
                
                const grid = document.getElementById('use-cases-grid');
                grid.innerHTML = data.use_cases.map(useCase => `
                    <div class="use-case-card text-white rounded-lg p-4 card-hover cursor-pointer" onclick="startUseCaseGovernanceProcess('${useCase.id}')">
                        <h4 class="font-bold text-lg mb-2">${useCase.name}</h4>
                        <p class="text-sm opacity-90 mb-3">${useCase.description}</p>
                        <div class="text-xs">
                            <div class="mb-1">üìä <strong>${useCase.assets}</strong> Assets | üè∑Ô∏è <strong>${useCase.cdes}</strong> CDEs</div>
                            <div class="opacity-80">Standards: ${useCase.standards.join(', ')}</div>
                        </div>
                        <div class="mt-3 px-2 py-1 bg-white bg-opacity-20 rounded text-xs text-center">
                            Click to start 5-step governance process
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading use cases:', error);
            }
        }

        async function startUseCaseGovernanceProcess(useCaseId) {
            console.log('Starting governance process for:', useCaseId);
            
            // Map use case IDs to display names and demo functions
            const useCaseMap = {
                'product_description': {
                    displayName: 'Product Description (Nonclinical)',
                    title: 'üß™ Product Description (Nonclinical) - FDA Section 2.8 Governance Process',
                    demoData: 'product'
                },
                'individual_health': {
                    displayName: 'Product Impact on Individual Health',
                    title: 'ü©∫ Individual Health Impact Assessment - FDA Sections 2.7 & 2.9 Governance Process',
                    demoData: 'individual'
                },
                'population_health': {
                    displayName: 'Product Impact on Population Health', 
                    title: 'üë• Population Health Impact Assessment - FDA Section 2.9 Governance Process',
                    demoData: 'population'
                },
                'regulatory_compliance': {
                    displayName: 'Comprehensive Regulatory Compliance',
                    title: 'üìã Comprehensive Regulatory Compliance - FDA Sections 2.7-2.10 Integration Governance Process',
                    demoData: 'comprehensive'
                }
            };

            const useCase = useCaseMap[useCaseId];
            if (!useCase) {
                console.error('Invalid use case ID:', useCaseId);
                return;
            }

            console.log('Use case found:', useCase);

            // Show demo container with governance process
            try {
                showDemoContainer();
                const content = document.getElementById('demo-content');
                
                if (!content) {
                    console.error('Demo content container not found');
                    return;
                }
                
                content.innerHTML = `
                    <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                        ${useCase.title}
                    </h3>
                    
                    <div id="${useCaseId}-process-flow" class="mb-8">
                        ${createUseCaseProcessFlow(useCase.demoData)}
                    </div>
                    
                    <!-- Process Control Button -->
                    <div class="mb-6 text-center">
                        <button onclick="runUseCaseGovernanceSteps('${useCaseId}', '${useCase.displayName}')" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold shadow-lg">
                            üöÄ Start Integrated Governance Process
                        </button>
                    </div>
                    
                    <!-- Individual Step Results -->
                    <div id="${useCaseId}-demo-results" class="mt-6"></div>
                    
                    <!-- Integration Note -->
                    <div class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg">
                        <div class="text-sm text-gray-700">
                            <strong>üí° Integrated Process:</strong> This demonstration integrates with the Data Inventory, Business Glossary & CDEs, Quality Metrics, and Compliance Workflow sections above<br>
                            <strong>üîç Live Components:</strong> Each step updates the corresponding functional component in real-time
                        </div>
                    </div>
                `;
                
                console.log('Demo content set successfully');
            } catch (error) {
                console.error('Error setting up governance process:', error);
            }
        }

        async function runUseCaseGovernanceSteps(useCaseId, useCaseDisplayName) {
            console.log('Running governance steps for:', useCaseId, useCaseDisplayName);
            
            const steps = [
                { step: 1, name: 'Data Discovery', component: 'data-inventory' },
                { step: 2, name: 'CDE Standardization', component: 'business-glossary' }, 
                { step: 3, name: 'Metadata Definition', component: 'business-glossary' },
                { step: 4, name: 'Protection & Compliance', component: 'workflow' },
                { step: 5, name: 'Governance Report', component: 'demo-results' }
            ];

            const resultContainer = document.getElementById(`${useCaseId}-demo-results`);
            
            if (!resultContainer) {
                console.error('Result container not found:', `${useCaseId}-demo-results`);
                return;
            }
            
            // Clear previous results
            resultContainer.innerHTML = '';
            
            console.log('Starting step execution...');
            
            // Show progress through each step
            for (let i = 0; i < steps.length; i++) {
                const currentStep = steps[i];
                console.log(`Executing step ${currentStep.step}: ${currentStep.name}`);
                
                // Map useCaseId to demo data format for updateUseCaseIndicators
                const useCaseMap = {
                    'product_description': 'product',
                    'individual_health': 'individual',
                    'population_health': 'population',
                    'regulatory_compliance': 'comprehensive'
                };
                
                const demoUseCaseId = useCaseMap[useCaseId];
                
                // Update process flow indicator
                if (demoUseCaseId) {
                    updateUseCaseIndicators(demoUseCaseId, currentStep.step);
                }
                
                // Execute step and update corresponding component
                await executeGovernanceStep(useCaseId, currentStep, resultContainer, useCaseDisplayName);
                
                // Brief pause between steps
                await new Promise(resolve => setTimeout(resolve, 1200));
            }
            
            console.log('All steps completed, showing summary...');
            
            // Show final summary
            showGovernanceProcessSummary(useCaseId, resultContainer);
        }

        async function executeGovernanceStep(useCaseId, stepInfo, container, useCaseDisplayName) {
            const { step, name, component } = stepInfo;
            
            // Add step result to demo container
            const stepResult = document.createElement('div');
            stepResult.className = 'bg-white p-4 rounded-lg shadow border-l-4 border-blue-400 mt-4';
            stepResult.innerHTML = `
                <h4 class="text-lg font-bold text-blue-800 mb-3">Step ${step}: ${name} - Processing...</h4>
                <div class="flex items-center">
                    <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-2"></div>
                    <span class="text-sm text-gray-600">Integrating with ${component} component...</span>
                </div>
            `;
            container.appendChild(stepResult);
            
            // Execute actual component updates based on step
            switch (step) {
                case 1: // Data Discovery
                    filterByUseCase(useCaseId);
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    stepResult.innerHTML = `
                        <h4 class="text-lg font-bold text-green-800 mb-3">‚úÖ Step ${step}: ${name} Complete</h4>
                        <div class="text-sm text-gray-600">
                            Data Inventory updated with ${useCaseDisplayName} assets. Check the Data Inventory section above for filtered results.
                        </div>
                    `;
                    break;
                    
                case 2: // CDE Standardization  
                case 3: // Metadata Definition
                    loadGlossary(useCaseDisplayName);
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    stepResult.innerHTML = `
                        <h4 class="text-lg font-bold text-green-800 mb-3">‚úÖ Step ${step}: ${name} Complete</h4>
                        <div class="text-sm text-gray-600">
                            Business Glossary & CDEs updated with ${useCaseDisplayName} standards. Check the Business Glossary section above for updated terms.
                        </div>
                    `;
                    break;
                    
                case 4: // Protection & Compliance
                    loadQualityMetrics(useCaseDisplayName);
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    stepResult.innerHTML = `
                        <h4 class="text-lg font-bold text-green-800 mb-3">‚úÖ Step ${step}: ${name} Complete</h4>
                        <div class="text-sm text-gray-600">
                            Data Quality Metrics updated and Compliance Workflow configured for ${useCaseDisplayName}. Check sections above for updated quality scores and workflow options.
                        </div>
                    `;
                    break;
                    
                case 5: // Governance Report
                    await generateUseCaseGovernanceReport(useCaseId, stepResult, useCaseDisplayName);
                    break;
            }
        }

        async function generateUseCaseGovernanceReport(useCaseId, stepElement, useCaseDisplayName) {
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Map useCaseId to demo data format
            const useCaseDataMap = {
                'product_description': 'product',
                'individual_health': 'individual',
                'population_health': 'population',
                'regulatory_compliance': 'comprehensive'
            };
            
            const demoUseCaseId = useCaseDataMap[useCaseId];
            const useCaseData = getUseCaseData(demoUseCaseId);
            
            // Create comprehensive report with specific data for each use case
            const reportData = {
                'product_description': {
                    assets: '3',
                    cdes: '12',
                    compliance: '98%',
                    roi: '$800K',
                    timeReduction: '85%',
                    readinessStatus: 'Section 2.8 Ready'
                },
                'individual_health': {
                    assets: '2', 
                    cdes: '9',
                    compliance: '97%',
                    roi: '$1.2M',
                    timeReduction: '91%',
                    readinessStatus: 'Clinical Study Ready'
                },
                'population_health': {
                    assets: '2',
                    cdes: '8', 
                    compliance: '95%',
                    roi: '$600K',
                    timeReduction: '83%',
                    readinessStatus: 'Surveillance Ready'
                },
                'regulatory_compliance': {
                    assets: '4',
                    cdes: '15',
                    compliance: '98%',
                    roi: '$2.1M', 
                    timeReduction: '94%',
                    readinessStatus: 'PMTA Submission Ready'
                }
            };
            
            const currentData = reportData[useCaseId];
            
            stepElement.innerHTML = `
                <h4 class="text-lg font-bold text-green-800 mb-3">‚úÖ Step 5: Governance Report Complete</h4>
                <div class="bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg">
                    <h5 class="font-bold text-gray-800 mb-3">${useCaseDisplayName} - Governance Report</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4">
                        <div class="text-center">
                            <div class="text-xl font-bold text-blue-600">${currentData.assets}</div>
                            <div class="text-gray-600">Assets Discovered</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-600">${currentData.cdes}</div>
                            <div class="text-gray-600">CDEs Standardized</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-purple-600">${currentData.compliance}</div>
                            <div class="text-gray-600">Compliance Level</div>
                        </div>
                    </div>
                    
                    <!-- Additional Report Metrics -->
                    <div class="border-t pt-3 mt-3">
                        <h6 class="font-semibold text-gray-700 mb-2">üìä Process Impact & ROI</h6>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs">
                            <div class="text-center">
                                <div class="text-lg font-bold text-indigo-600">${currentData.timeReduction}</div>
                                <div class="text-gray-600">Time Reduction</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-green-600">${currentData.roi}</div>
                                <div class="text-gray-600">Estimated ROI</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-blue-600">${currentData.readinessStatus}</div>
                                <div class="text-gray-600">Regulatory Status</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3 text-xs text-center text-gray-600">
                        All governance components successfully integrated and updated ‚Ä¢ Report generated in 90 seconds vs 2-3 weeks manual
                    </div>
                </div>
            `;
        }

        function showGovernanceProcessSummary(useCaseId, container) {
            const summaryElement = document.createElement('div');
            summaryElement.className = 'mt-6 bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border-2 border-green-200';
            summaryElement.innerHTML = `
                <h3 class="text-xl font-bold text-center text-gray-800 mb-4">
                    üéâ Integrated Governance Process Complete!
                </h3>
                <div class="text-center text-sm text-gray-700">
                    <p class="mb-2">All functional components have been updated with use case-specific data:</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                        <div class="text-center">
                            <div class="text-lg">üìä</div>
                            <div class="text-xs">Data Inventory</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg">üè∑Ô∏è</div>
                            <div class="text-xs">Business Glossary</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg">üìà</div>
                            <div class="text-xs">Quality Metrics</div>
                        </div>
                        <div class="text-center">
                            <div class="text-lg">‚öñÔ∏è</div>
                            <div class="text-xs">Compliance Workflow</div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(summaryElement);
        }

        function filterByUseCase(useCaseId) {
            const searchInput = document.getElementById('search-input');
            const useCaseFilter = document.getElementById('use-case-filter');
            
            // Set filter based on use case
            const filterMap = {
                'product_description': 'Product Description (Nonclinical)',
                'individual_health': 'Product Impact on Individual Health', 
                'population_health': 'Product Impact on Population Health',
                'regulatory_compliance': 'Comprehensive Regulatory Compliance'
            };
            
            const selectedUseCase = filterMap[useCaseId] || '';
            useCaseFilter.value = selectedUseCase;
            
            // Show AI working
            updateAIActivity(`AI filtering data for ${selectedUseCase}...`);
            
            // Reload all components with the selected use case
            searchData();
            loadGlossary(selectedUseCase);
            loadQualityMetrics(selectedUseCase);
            
            // Update AI status after filtering
            setTimeout(() => {
                const persona = personas[currentPersona];
                updateAIActivity(`${selectedUseCase} data ready for ${persona.name}`);
            }, 1500);
        }

        async function searchData() {
            const query = document.getElementById('search-input').value;
            const useCase = document.getElementById('use-case-filter').value;
            
            // Show AI activity
            if (query) {
                updateAIActivity(`AI searching for "${query}" across tobacco data sources...`);
            } else if (useCase) {
                updateAIActivity(`AI filtering data for ${useCase}...`);
            }
            
            try {
                const response = await fetch('/api/search', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({query, use_case: useCase})
                });
                const results = await response.json();
                displayResults(results);
                
                // Update AI status with results
                const totalResults = (results.databases?.length || 0) + (results.files?.length || 0) + (results.apis?.length || 0);
                updateAIActivity(`Found ${totalResults} relevant data assets. Ready for ${personas[currentPersona].name}.`);
                
            } catch (error) {
                console.error('Search error:', error);
                updateAIActivity('Search error occurred. Please try again.');
            }
        }

        function displayResults(results) {
            const inventory = document.getElementById('data-inventory');
            
            let html = '';
            
            // Databases
            if (results.databases && results.databases.length > 0) {
                html += results.databases.map(db => `
                    <div class="mb-4 p-3 bg-blue-50 rounded">
                        <h4 class="font-bold text-blue-800">${db.name}</h4>
                        <p class="text-sm text-gray-600">${db.description}</p>
                        <div class="mt-2 text-xs text-blue-600">
                            <div>${db.type} ‚Ä¢ Owner: ${db.owner}</div>
                            <div>Use Case: ${db.use_case}</div>
                            <div>CDEs: ${db.cde_count} | Quality: ${(db.quality_score * 100).toFixed(0)}%</div>
                            <div class="mt-1 text-purple-600">Standards: ${db.standards.join(', ')}</div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Files
            if (results.files && results.files.length > 0) {
                html += results.files.map(file => `
                    <div class="mb-4 p-3 bg-green-50 rounded">
                        <h4 class="font-bold text-green-800">${file.name}</h4>
                        <p class="text-sm text-gray-600">${file.description}</p>
                        <div class="mt-2 text-xs text-green-600">
                            <div>${file.type} ‚Ä¢ Owner: ${file.owner}</div>
                            <div>Use Case: ${file.use_case}</div>
                            <div>Quality: ${(file.quality_score * 100).toFixed(0)}%</div>
                            ${file.fields ? `<div class="mt-1">Key Fields: ${file.fields.join(', ')}</div>` : ''}
                        </div>
                    </div>
                `).join('');
            }
            
            // APIs
            if (results.apis && results.apis.length > 0) {
                html += results.apis.map(api => `
                    <div class="mb-4 p-3 bg-orange-50 rounded">
                        <h4 class="font-bold text-orange-800">${api.name}</h4>
                        <p class="text-sm text-gray-600">${api.description}</p>
                        <div class="mt-2 text-xs text-orange-600">
                            <div>${api.type} ‚Ä¢ Owner: ${api.owner}</div>
                            <div>Use Case: ${api.use_case}</div>
                            <div>Quality: ${(api.quality_score * 100).toFixed(0)}%</div>
                            ${api.endpoints ? `<div class="mt-1">Endpoints: ${api.endpoints.join(', ')}</div>` : ''}
                        </div>
                    </div>
                `).join('');
            }
            
            if (!html) {
                html = '<p class="text-gray-600">No results found. Try searching for tobacco-specific terms.</p>';
            }
            
            inventory.innerHTML = html;
            
            // Show AI suggestions when results are displayed
            updateAISuggestionsForContext();
        }

        async function loadGlossary(useCase = '') {
            try {
                const url = useCase ? `/api/glossary?use_case=${encodeURIComponent(useCase)}` : '/api/glossary';
                const response = await fetch(url);
                const glossary = await response.json();
                
                const container = document.getElementById('business-glossary');
                
                if (Object.keys(glossary).length === 0) {
                    container.innerHTML = '<p class="text-gray-600">No business terms found for this use case.</p>';
                    return;
                }
                
                container.innerHTML = Object.entries(glossary).map(([term, data]) => `
                    <div class="mb-4 p-3 bg-green-50 rounded">
                        <h4 class="font-bold text-green-800">${term}</h4>
                        <p class="text-sm text-gray-600">${data.definition}</p>
                        <div class="mt-2 text-xs text-green-600">
                            <div><span class="px-2 py-1 bg-green-200 rounded">${data.type}</span> ‚Ä¢ Domain: ${data.domain}</div>
                            <div>Owner: ${data.owner}</div>
                            <div class="text-purple-600 mt-1">Standards: ${data.standards.join(', ')}</div>
                            <div class="text-red-600">Regulatory: ${data.regulatory_requirement}</div>
                            ${data.use_cases ? `<div class="text-blue-600 mt-1">Use Cases: ${data.use_cases.join(', ')}</div>` : ''}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading glossary:', error);
            }
        }

        async function loadQualityMetrics(useCase = '') {
            try {
                const url = useCase ? `/api/quality?use_case=${encodeURIComponent(useCase)}` : '/api/quality';
                const response = await fetch(url);
                const quality = await response.json();
                
                const container = document.getElementById('data-quality');
                container.innerHTML = `
                    <div class="mb-4">
                        <h4 class="font-bold text-purple-800 text-2xl">${(quality.overall_score * 100).toFixed(1)}%</h4>
                        <p class="text-sm text-gray-600">Overall Quality Score</p>
                        ${useCase ? `<p class="text-xs text-blue-600 mt-1">For: ${useCase}</p>` : ''}
                    </div>
                    
                    <div class="space-y-2 mb-4">
                        ${Object.entries(quality.metrics).map(([metric, score]) => `
                            <div class="flex justify-between text-sm">
                                <span class="capitalize">${metric.replace('_', ' ')}</span>
                                <span class="font-semibold">${(score * 100).toFixed(0)}%</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="bg-purple-50 p-3 rounded">
                        <h5 class="font-bold text-purple-800 mb-2">CDE Coverage</h5>
                        <div class="text-xs space-y-1">
                            <div>Total Fields: <strong>${quality.cde_coverage.total_fields}</strong></div>
                            <div>Standardized: <strong>${quality.cde_coverage.standardized_fields}</strong></div>
                            <div>CDEs Identified: <strong>${quality.cde_coverage.cde_identified}</strong></div>
                            <div>Compliance Ready: <strong>${quality.cde_coverage.compliance_ready}</strong></div>
                        </div>
                    </div>
                    
                    ${quality.focus_areas ? `
                        <div class="bg-blue-50 p-3 rounded mt-3">
                            <h5 class="font-bold text-blue-800 mb-2">Focus Areas</h5>
                            <div class="text-xs">
                                ${quality.focus_areas.map(area => `
                                    <span class="inline-block bg-blue-200 px-2 py-1 rounded mr-1 mb-1">${area}</span>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="bg-gray-50 p-3 rounded mt-3">
                        <h5 class="font-bold text-gray-800 mb-2">Use Case Readiness</h5>
                        <div class="text-xs space-y-1">
                            ${Object.entries(quality.use_case_coverage).map(([useCaseKey, score]) => `
                                <div class="flex justify-between">
                                    <span class="capitalize">${useCaseKey.replace('_', ' ')}</span>
                                    <span class="font-semibold">${(score * 100).toFixed(0)}%</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading quality metrics:', error);
            }
        }

        async function initiateWorkflow() {
            const assetId = document.getElementById('asset-selector').value;
            const action = document.getElementById('action-selector').value;
            const useCase = document.getElementById('use-case-filter').value;
            
            if (!assetId || !action) {
                alert('Please select both an asset and an action');
                return;
            }
            
            try {
                const response = await fetch('/api/workflow', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({asset_id: assetId, action, use_case: useCase})
                });
                const result = await response.json();
                
                document.getElementById('workflow-result').innerHTML = `
                    <div class="bg-green-50 border border-green-200 rounded p-4 mt-4">
                        <h4 class="font-bold text-green-800">Workflow Initiated Successfully</h4>
                        <p class="text-sm text-gray-600">${result.message}</p>
                        <div class="mt-2 text-xs">
                            <div><strong>Workflow ID:</strong> ${result.workflow_id}</div>
                            <div><strong>Status:</strong> ${result.status}</div>
                            <div><strong>Estimated Completion:</strong> ${result.estimated_completion}</div>
                        </div>
                        ${result.compliance_checks && result.compliance_checks.length > 0 ? `
                            <div class="mt-3">
                                <strong class="text-sm">Compliance Checks:</strong>
                                <ul class="text-xs mt-1 list-disc list-inside">
                                    ${result.compliance_checks.map(check => `<li>${check}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        ${result.next_steps ? `
                            <div class="mt-3">
                                <strong class="text-sm">Next Steps:</strong>
                                <ul class="text-xs mt-1 list-disc list-inside">
                                    ${result.next_steps.map(step => `<li>${step}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                `;
            } catch (error) {
                console.error('Workflow error:', error);
            }
        }

        // Allow search on Enter key
        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchData();
            }
        });

        function clearFilter() {
            const searchInput = document.getElementById('search-input');
            const useCaseFilter = document.getElementById('use-case-filter');
            
            searchInput.value = '';
            useCaseFilter.value = '';
            
            // Reload all components without any filter
            const inventory = document.getElementById('data-inventory');
            inventory.innerHTML = '<p class="text-gray-600">Use search to discover tobacco data assets...</p>';
            
            loadGlossary();
            loadQualityMetrics();
        }

        // Interactive Demo Functions
        async function demoDataDiscovery() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-blue-800">üîç Data Discovery Transformation Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual Discovery</h4>
                        <div id="manual-discovery" class="space-y-2 text-sm">
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                                <span>Searching System 1...</span>
                            </div>
                        </div>
                        <div class="mt-3 p-2 bg-red-100 rounded text-xs">
                            <strong>Estimated Time:</strong> 3+ days<br>
                            <strong>Manual Effort:</strong> High
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI-Powered Discovery</h4>
                        <div id="ai-discovery" class="space-y-2 text-sm">
                            <div class="text-gray-600">Click "Start AI Discovery" to see the transformation...</div>
                        </div>
                        <div class="mt-3">
                            <button onclick="startAIDiscovery()" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-xs">
                                üöÄ Start AI Discovery
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Start manual discovery simulation
            simulateManualDiscovery();
        }

        function simulateManualDiscovery() {
            const container = document.getElementById('manual-discovery');
            const systems = [
                'Searching System 1... (Product Database)',
                'Searching System 2... (Clinical Database)', 
                'Searching System 3... (Regulatory Database)',
                'Searching Email Archives...',
                'Searching SharePoint...',
                'Reviewing Excel Files...',
                'Contacting SMEs...',
                'Still searching...'
            ];
            
            let index = 0;
            const interval = setInterval(() => {
                if (index < systems.length) {
                    container.innerHTML += `
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                            <span>${systems[index]}</span>
                        </div>
                    `;
                    index++;
                } else {
                    container.innerHTML += `
                        <div class="flex items-center space-x-2 text-red-700">
                            <div class="w-2 h-2 bg-red-700 rounded-full"></div>
                            <span><strong>Day 1 Complete</strong> - 12 assets found</span>
                        </div>
                        <div class="flex items-center space-x-2 text-red-600 mt-1">
                            <div class="w-2 h-2 bg-red-600 rounded-full animate-pulse"></div>
                            <span>Continuing manual search...</span>
                        </div>
                    `;
                    clearInterval(interval);
                }
            }, 800);
        }

        async function startAIDiscovery() {
            const container = document.getElementById('ai-discovery');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span>AI scanning all systems simultaneously...</span>
                </div>
            `;
            
            // Simulate AI progress
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            container.innerHTML = `
                <div class="space-y-2">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>‚úÖ Scanned 8 databases in 15 seconds</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>‚úÖ Indexed 127 fields across all sources</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>‚úÖ Generated metadata catalog</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>‚úÖ Identified relationships and dependencies</span>
                    </div>
                </div>
                <div class="mt-3 p-2 bg-green-100 rounded text-xs">
                    <strong>Total Time:</strong> 30 minutes<br>
                    <strong>Results:</strong> 127 fields cataloged<br>
                    <strong>Time Saved:</strong> 85% reduction
                </div>
            `;
        }

        async function demoCDEIdentification() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-green-800">üè∑Ô∏è CDE Identification Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual CDE Review</h4>
                        <div class="space-y-2 text-sm">
                            <div>üìã Review 127 fields manually</div>
                            <div>üìö Check against standards documents</div>
                            <div>üë• Consult with multiple SMEs</div>
                            <div>üìù Document findings in spreadsheets</div>
                            <div class="text-red-700">‚è±Ô∏è <strong>Estimated: 3-4 weeks</strong></div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI CDE Identification</h4>
                        <div id="cde-results" class="space-y-2 text-sm">
                            <button onclick="startCDEIdentification()" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-xs">
                                üöÄ Start AI CDE Analysis
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function startCDEIdentification() {
            const container = document.getElementById('cde-results');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span>AI analyzing field patterns...</span>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            container.innerHTML = `
                <div class="space-y-2">
                    <div class="p-2 bg-green-100 rounded">
                        <strong>High Priority CDEs (96% confidence):</strong>
                        <div class="text-xs mt-1">
                            ‚Ä¢ Patient_ID ‚Üí CDE_PATIENT_IDENTIFIER<br>
                            ‚Ä¢ Cotinine_Level ‚Üí CDE_COTININE_CONCENTRATION<br>
                            ‚Ä¢ Product_Type ‚Üí CDE_TOBACCO_PRODUCT_CATEGORY
                        </div>
                    </div>
                    <div class="p-2 bg-yellow-100 rounded">
                        <strong>Medium Priority (85% confidence):</strong>
                        <div class="text-xs mt-1">
                            ‚Ä¢ Age_Group ‚Üí CDE_AGE_CATEGORY<br>
                            ‚Ä¢ Smoking_Status ‚Üí CDE_TOBACCO_USE_STATUS
                        </div>
                    </div>
                    <div class="mt-3 p-2 bg-green-200 rounded text-xs">
                        <strong>Results:</strong> 44 CDEs identified in 5 minutes<br>
                        <strong>SME Review:</strong> Only validation needed<br>
                        <strong>Time Saved:</strong> 95% reduction
                    </div>
                </div>
            `;
        }

        async function demoMetadataGeneration() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-purple-800">üìù Metadata Generation Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual Documentation</h4>
                        <div class="bg-red-100 p-3 rounded text-sm">
                            <div class="mb-2"><strong>Field:</strong> COT_LEVEL</div>
                            <div class="mb-2"><strong>Definition:</strong> <em class="text-red-600">[Empty - needs manual entry]</em></div>
                            <div class="mb-2"><strong>Data Type:</strong> <em class="text-red-600">[Unknown]</em></div>
                            <div class="mb-2"><strong>Business Rules:</strong> <em class="text-red-600">[TBD]</em></div>
                            <div class="mb-2"><strong>Data Owner:</strong> <em class="text-red-600">[TBD]</em></div>
                            <div class="text-red-700 text-xs">‚è±Ô∏è Manual completion: 2-3 hours per field</div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI-Generated Metadata</h4>
                        <div id="metadata-results">
                            <button onclick="generateMetadata()" class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs">
                                üöÄ Generate AI Metadata
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function generateMetadata() {
            const container = document.getElementById('metadata-results');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                    <span>AI analyzing field context...</span>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            container.innerHTML = `
                <div class="bg-green-100 p-3 rounded text-sm">
                    <div class="mb-2"><strong>Field:</strong> COT_LEVEL</div>
                    <div class="mb-2"><strong>Definition:</strong> <span class="text-green-700">Cotinine concentration in biological samples, measured as biomarker of tobacco exposure per FDA Section 2.7 guidelines</span></div>
                    <div class="mb-2"><strong>Data Type:</strong> <span class="text-green-700">Numeric (ng/mL)</span></div>
                    <div class="mb-2"><strong>Business Rules:</strong> <span class="text-green-700">Range: 0-500 ng/mL; Required for exposure assessment studies; Must follow ICH bioanalytical validation</span></div>
                    <div class="mb-2"><strong>Data Owner:</strong> <span class="text-green-700">Clinical Biomarker Team</span></div>
                    <div class="mb-2"><strong>Related CDEs:</strong> <span class="text-green-700">CDE_COTININE_CONCENTRATION, CDE_EXPOSURE_BIOMARKER</span></div>
                    <div class="text-green-700 text-xs">‚úÖ AI completion: 30 seconds with 94% accuracy</div>
                </div>
                <div class="mt-2 text-xs text-purple-600">
                    üí° SME review recommended for regulatory accuracy
                </div>
            `;
        }

        async function demoComplianceCheck() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-orange-800">‚úÖ Compliance Check Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual Compliance</h4>
                        <div class="space-y-2 text-sm">
                            <div>üìã Manual checklist review</div>
                            <div>üìÑ Document-by-document validation</div>
                            <div>üë• Multiple stakeholder reviews</div>
                            <div>üìä Spreadsheet tracking</div>
                            <div class="text-red-700">‚è±Ô∏è <strong>3+ weeks for full audit</strong></div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI Compliance Automation</h4>
                        <div id="compliance-results">
                            <button onclick="runComplianceCheck()" class="px-3 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 text-xs">
                                üöÄ Run AI Compliance Check
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function runComplianceCheck() {
            const container = document.getElementById('compliance-results');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>
                    <span>AI scanning regulatory requirements...</span>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            container.innerHTML = `
                <div class="space-y-3">
                    <div class="p-2 bg-green-100 rounded border-l-4 border-green-400">
                        <div class="text-xs font-bold text-green-800">‚úÖ FDA Section 2.7 Compliance</div>
                        <div class="text-xs">Clinical data collection standards: PASSED</div>
                    </div>
                    <div class="p-2 bg-green-100 rounded border-l-4 border-green-400">
                        <div class="text-xs font-bold text-green-800">‚úÖ Section 2.8 Compliance</div>
                        <div class="text-xs">Nonclinical data tabulation: PASSED</div>
                    </div>
                    <div class="p-2 bg-yellow-100 rounded border-l-4 border-yellow-400">
                        <div class="text-xs font-bold text-yellow-800">‚ö†Ô∏è Section 2.9 Compliance</div>
                        <div class="text-xs">Population health data: 3 minor gaps identified</div>
                    </div>
                    <div class="p-2 bg-green-100 rounded border-l-4 border-green-400">
                        <div class="text-xs font-bold text-green-800">‚úÖ ICH Guidelines</div>
                        <div class="text-xs">Bioanalytical validation: COMPLIANT</div>
                    </div>
                    <div class="mt-3 p-2 bg-green-200 rounded text-xs">
                        <strong>Overall Score:</strong> 98% compliant<br>
                        <strong>Audit Ready:</strong> Yes (2 days prep)<br>
                        <strong>Action Items:</strong> 3 minor corrections needed
                    </div>
                </div>
            `;
        }

        async function demoQualityRules() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-red-800">üõ°Ô∏è Data Protection & Governance Controls Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual Protection</h4>
                        <div class="space-y-2 text-sm">
                            <div>üìã Generic spreadsheet rules</div>
                            <div>üë• Manual access approval processes</div>
                            <div>üìù Inconsistent data classification</div>
                            <div>üîê Ad-hoc privacy controls</div>
                            <div>üìä No systematic retention policies</div>
                            <div class="text-red-700">‚è±Ô∏è <strong>Weeks to implement comprehensive protection</strong></div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI-Powered Protection Framework</h4>
                        <div id="quality-rules-results">
                            <button onclick="generateProtectionFramework()" class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs">
                                üöÄ Generate Comprehensive Protection Controls
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function generateProtectionFramework() {
            const container = document.getElementById('quality-rules-results');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                    <span>AI analyzing data patterns for comprehensive protection...</span>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            container.innerHTML = `
                <div class="space-y-4 max-h-96 overflow-y-auto">
                    <!-- Data Quality Rules -->
                    <div class="p-3 bg-blue-100 rounded border-l-4 border-blue-400">
                        <div class="text-xs font-bold text-blue-800 mb-2">üìä Data Quality Rules</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Cotinine_Level:</strong> Range 0-500 ng/mL, 2 decimals max, outlier detection<br>
                            ‚Ä¢ <strong>Sample_Date:</strong> ISO format, study period validation, chronological checks<br>
                            ‚Ä¢ <strong>Product_Type:</strong> Controlled vocabulary, referential integrity<br>
                            ‚Ä¢ <strong>Patient_ID:</strong> Format validation, uniqueness, cross-reference checks
                        </div>
                    </div>
                    
                    <!-- Data Classification -->
                    <div class="p-3 bg-purple-100 rounded border-l-4 border-purple-400">
                        <div class="text-xs font-bold text-purple-800 mb-2">üè∑Ô∏è Automated Data Classification</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Highly Sensitive:</strong> Patient_ID, Personal_Data (PII masking required)<br>
                            ‚Ä¢ <strong>Confidential:</strong> Clinical_Results, Biomarker_Data (authorized access only)<br>
                            ‚Ä¢ <strong>Internal:</strong> Product_Formulation, Study_Protocols (employee access)<br>
                            ‚Ä¢ <strong>Public:</strong> Aggregate_Statistics, Published_Findings (open access)
                        </div>
                    </div>
                    
                    <!-- Access Controls -->
                    <div class="p-3 bg-green-100 rounded border-l-4 border-green-400">
                        <div class="text-xs font-bold text-green-800 mb-2">üîê Access Control Framework</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Role-Based Access:</strong> Clinical_Researcher ‚Üí biomarker data only<br>
                            ‚Ä¢ <strong>Attribute-Based:</strong> Study_ID + Department + Clearance_Level<br>
                            ‚Ä¢ <strong>Time-Limited:</strong> Project access expires with study completion<br>
                            ‚Ä¢ <strong>Audit Trail:</strong> All access logged with purpose justification
                        </div>
                    </div>
                    
                    <!-- Privacy Controls -->
                    <div class="p-3 bg-yellow-100 rounded border-l-4 border-yellow-400">
                        <div class="text-xs font-bold text-yellow-800 mb-2">üîí Privacy & Compliance Controls</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Data Masking:</strong> PII auto-masked in non-prod environments<br>
                            ‚Ä¢ <strong>Consent Tracking:</strong> Participant consent status linked to data usage<br>
                            ‚Ä¢ <strong>Right to Erasure:</strong> Automated removal upon participant request<br>
                            ‚Ä¢ <strong>Cross-Border:</strong> Geographic restrictions for international studies
                        </div>
                    </div>
                    
                    <!-- Retention & Lifecycle -->
                    <div class="p-3 bg-orange-100 rounded border-l-4 border-orange-400">
                        <div class="text-xs font-bold text-orange-800 mb-2">üìÖ Data Lifecycle Management</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Retention Policy:</strong> Clinical data 25 years, operational data 7 years<br>
                            ‚Ä¢ <strong>Archival Rules:</strong> Automatic cold storage after active study period<br>
                            ‚Ä¢ <strong>Destruction Schedule:</strong> Secure deletion post-retention period<br>
                            ‚Ä¢ <strong>Legal Hold:</strong> Automatic suspension during litigation/audit
                        </div>
                    </div>
                    
                    <!-- Compliance Monitoring -->
                    <div class="p-3 bg-red-100 rounded border-l-4 border-red-400">
                        <div class="text-xs font-bold text-red-800 mb-2">‚öñÔ∏è Compliance Monitoring</div>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>FDA 21 CFR Part 11:</strong> Electronic signature validation<br>
                            ‚Ä¢ <strong>ICH GCP:</strong> Clinical trial data integrity checks<br>
                            ‚Ä¢ <strong>GDPR Article 25:</strong> Privacy by design validation<br>
                            ‚Ä¢ <strong>SOX Controls:</strong> Financial impact data protection
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-green-200 rounded text-xs">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <strong>Protection Controls:</strong> 127 comprehensive rules<br>
                                <strong>Classification Coverage:</strong> 100% of data assets<br>
                                <strong>Access Policies:</strong> 23 role-based controls
                            </div>
                            <div>
                                <strong>Privacy Compliance:</strong> GDPR + FDA validated<br>
                                <strong>Retention Automation:</strong> Lifecycle managed<br>
                                <strong>Audit Readiness:</strong> Real-time compliance monitoring
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        async function demoGovernanceReport() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-indigo-800">üìã Governance Report Auto-Generation Demo</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-3">‚ùå Before: Manual Reporting</h4>
                        <div class="space-y-2 text-sm">
                            <div>üìä Data scattered across teams</div>
                            <div>üìù Manual PowerPoint assembly</div>
                            <div>üîÑ Inconsistent metrics and KPIs</div>
                            <div>üë• Multiple stakeholder interviews</div>
                            <div>üìã Outdated templates and formats</div>
                            <div class="text-red-700">‚è±Ô∏è <strong>2-3 weeks for comprehensive report</strong></div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-3">‚úÖ After: AI-Generated Executive Report</h4>
                        <div id="governance-report-results">
                            <button onclick="generateGovernanceReport()" class="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 text-xs">
                                üöÄ Generate Executive Governance Report
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function generateGovernanceReport() {
            const container = document.getElementById('governance-report-results');
            
            container.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-indigo-500 rounded-full animate-pulse"></div>
                    <span>AI compiling governance insights and metrics...</span>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            container.innerHTML = `
                <div class="space-y-4 max-h-96 overflow-y-auto">
                    <div class="p-4 bg-white rounded-lg shadow border">
                        <h4 class="font-bold text-indigo-800 mb-2">üìä Executive Summary</h4>
                        <div class="text-xs space-y-2">
                            <p><strong>Current State:</strong> Data governance maturity has improved from 23% to 78% over 6 months through AI-assisted standardization across Life Sciences functions.</p>
                            <p><strong>Key Achievement:</strong> 127 critical data assets cataloged with 94% metadata completeness, 44 CDEs standardized, and 98% regulatory compliance achieved.</p>
                            <p><strong>Business Impact:</strong> $2.1M annual value realized through 85% reduction in data discovery time and 91% improvement in data quality scores.</p>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-red-50 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-red-800 mb-2">üîç Pain Points Identified</h4>
                        <div class="text-xs space-y-1">
                            ‚Ä¢ <strong>Data Silos:</strong> 8 disconnected systems with inconsistent definitions<br>
                            ‚Ä¢ <strong>Manual Processes:</strong> 60% of governance tasks still manual<br>
                            ‚Ä¢ <strong>Compliance Gaps:</strong> 3 minor FDA validation requirements need attention<br>
                            ‚Ä¢ <strong>Resource Constraints:</strong> SME bandwidth limited for validation workflows
                        </div>
                    </div>
                    
                    <div class="p-4 bg-green-50 rounded-lg border-l-4 border-green-400">
                        <h4 class="font-bold text-green-800 mb-2">‚úÖ Current Achievements</h4>
                        <div class="text-xs grid grid-cols-2 gap-2">
                            <div>‚Ä¢ 127 assets cataloged</div>
                            <div>‚Ä¢ 44 CDEs standardized</div>
                            <div>‚Ä¢ 94% metadata quality</div>
                            <div>‚Ä¢ 98% compliance score</div>
                            <div>‚Ä¢ 85% time reduction</div>
                            <div>‚Ä¢ $2.1M annual ROI</div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                        <h4 class="font-bold text-blue-800 mb-2">üéØ Next 90 Days Roadmap</h4>
                        <div class="text-xs space-y-1">
                            <div><strong>Month 1:</strong> Extend AI agent to Population Health data (Section 2.9)</div>
                            <div><strong>Month 2:</strong> Implement automated quality monitoring dashboard</div>
                            <div><strong>Month 3:</strong> Deploy cross-functional FAIR governance workflows</div>
                            <div><strong>Success Metrics:</strong> 95% compliance, 150+ assets, 50% automation</div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-purple-50 rounded-lg border-l-4 border-purple-400">
                        <h4 class="font-bold text-purple-800 mb-2">üíº Resource Requirements</h4>
                        <div class="text-xs space-y-1">
                            <div><strong>Technology:</strong> AI platform scaling for additional use cases</div>
                            <div><strong>People:</strong> 2 SME hours/week for validation (vs 40 hours previously)</div>
                            <div><strong>Budget:</strong> $150K technology investment ‚Üí $2.1M annual return</div>
                            <div><strong>Timeline:</strong> 3-month incremental deployment approach</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-indigo-100 rounded text-xs text-center">
                        <strong>üìã Report Status:</strong> Generated in 30 seconds with real-time data<br>
                        <strong>üì§ Export Ready:</strong> PDF, PowerPoint, Executive Dashboard formats available<br>
                        <strong>üîÑ Auto-Update:</strong> Refreshes weekly with latest governance metrics
                    </div>
                </div>
            `;
        }

        function showDemoContainer() {
            document.getElementById('demo-container').style.display = 'block';
            document.getElementById('demo-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Process Flow Management
        let currentStep = 0;
        let processRunning = false;
        let processResults = {};

        async function startGovernanceProcess() {
            if (processRunning) return;
            
            processRunning = true;
            currentStep = 0;
            processResults = {};
            
            // Show status
            const statusDiv = document.getElementById('process-status');
            const statusText = document.getElementById('status-text');
            statusDiv.style.display = 'block';
            statusText.textContent = 'Starting comprehensive governance transformation...';
            
            // Reset all indicators
            resetProcess();
            
            // Run all steps sequentially
            for (let step = 1; step <= 5; step++) {
                await runStep(step);
                await new Promise(resolve => setTimeout(resolve, 1000)); // Pause between steps
            }
            
            // Show final summary
            showProcessSummary();
            processRunning = false;
        }

        function resetProcess() {
            currentStep = 0;
            processResults = {};
            
            // Reset all indicators
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                const btn = document.getElementById(`step${i}-btn`);
                
                if (i === 1) {
                    indicator.className = 'w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-2 border-2 border-blue-300';
                    indicator.innerHTML = '<span class="text-blue-600 font-bold">1</span>';
                    btn.disabled = false;
                    btn.className = 'px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all';
                } else {
                    indicator.className = 'w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300';
                    indicator.innerHTML = `<span class="text-gray-400 font-bold">${i}</span>`;
                    btn.disabled = true;
                    btn.className = 'px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed';
                }
            }
            
            // Hide status
            document.getElementById('process-status').style.display = 'none';
            document.getElementById('demo-container').style.display = 'none';
        }

        async function runStep(step) {
            if (step > currentStep + 1 && !processRunning) return; // Can't skip steps unless in auto mode
            
            currentStep = step;
            updateProcessIndicators(step);
            updateProcessStatus(step);
            
            // Execute the appropriate demo
            switch (step) {
                case 1:
                    await demoDataDiscovery();
                    processResults.discovery = "127 data assets discovered in 30 minutes";
                    break;
                case 2:
                    await demoCDEIdentification();  
                    processResults.cdes = "44 CDEs identified with 96% confidence";
                    break;
                case 3:
                    await demoMetadataGeneration();
                    processResults.metadata = "Rich metadata generated with 94% accuracy";
                    break;
                case 4:
                    await demoQualityRules();
                    processResults.quality = "127 protection controls & governance rules deployed";
                    break;
                case 5:
                    await demoGovernanceReport();
                    processResults.report = "Executive governance report generated";
                    break;
            }
            
            // Enable next step
            if (step < 5) {
                const nextBtn = document.getElementById(`step${step + 1}-btn`);
                nextBtn.disabled = false;
                nextBtn.className = getButtonClass(step + 1);
            }
        }

        function updateProcessIndicators(currentStep) {
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                
                if (i < currentStep) {
                    // Completed step
                    indicator.className = 'w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-2 border-2 border-green-400';
                    indicator.innerHTML = '<span class="text-green-600 font-bold">‚úì</span>';
                } else if (i === currentStep) {
                    // Current step
                    indicator.className = 'w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-2 border-2 border-blue-400 animate-pulse';
                    indicator.innerHTML = `<span class="text-blue-600 font-bold">${i}</span>`;
                } else {
                    // Future step
                    indicator.className = 'w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300';
                    indicator.innerHTML = `<span class="text-gray-400 font-bold">${i}</span>`;
                }
            }
        }

        function updateProcessStatus(step) {
            const statusText = document.getElementById('status-text');
            const statusDiv = document.getElementById('process-status');
            statusDiv.style.display = 'block';
            
            const messages = {
                1: "Step 1: Discovering data assets across all systems...",
                2: "Step 2: Standardizing with CDE identification...", 
                3: "Step 3: Defining rich metadata with regulatory context...",
                4: "Step 4: Protecting data with comprehensive governance controls...",
                5: "Step 5: Generating executive governance insights..."
            };
            
            statusText.textContent = messages[step];
        }

        function getButtonClass(step) {
            const classes = {
                1: 'px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all',
                2: 'px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all',
                3: 'px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all',
                4: 'px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all',
                5: 'px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all'
            };
            return classes[step];
        }

        function showProcessSummary() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <div class="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                        üéâ Complete Data Governance Process - SUCCESS!
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                        <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-400">
                            <div class="text-center">
                                <div class="text-2xl mb-2">üîç</div>
                                <div class="font-semibold text-blue-800">Step 1: Discover</div>
                                <div class="text-xs text-blue-600 mt-1">127 assets found</div>
                                <div class="text-xs text-green-600">‚úì Complete</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-400">
                            <div class="text-center">
                                <div class="text-2xl mb-2">üè∑Ô∏è</div>
                                <div class="font-semibold text-green-800">Step 2: Standardize</div>
                                <div class="text-xs text-green-600 mt-1">44 CDEs identified</div>
                                <div class="text-xs text-green-600">‚úì Complete</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow border-l-4 border-purple-400">
                            <div class="text-center">
                                <div class="text-2xl mb-2">üìù</div>
                                <div class="font-semibold text-purple-800">Step 3: Define</div>
                                <div class="text-xs text-purple-600 mt-1">94% metadata accuracy</div>
                                <div class="text-xs text-green-600">‚úì Complete</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-400">
                            <div class="text-center">
                                <div class="text-2xl mb-2">üõ°Ô∏è</div>
                                <div class="font-semibold text-red-800">Step 4: Protect</div>
                                <div class="text-xs text-red-600 mt-1">127 protection controls</div>
                                <div class="text-xs text-green-600">‚úì Complete</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow border-l-4 border-indigo-400">
                            <div class="text-center">
                                <div class="text-2xl mb-2">üìã</div>
                                <div class="font-semibold text-indigo-800">Step 5: Report</div>
                                <div class="text-xs text-indigo-600 mt-1">Executive insights</div>
                                <div class="text-xs text-green-600">‚úì Complete</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h4 class="text-xl font-bold text-center text-gray-800 mb-4">
                            üöÄ Governance Transformation Results
                        </h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600">85%</div>
                                <div class="text-sm text-gray-600">Time Reduction</div>
                                <div class="text-xs text-gray-500">3 days ‚Üí 30 minutes</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600">$2.1M</div>
                                <div class="text-sm text-gray-600">Annual ROI</div>
                                <div class="text-xs text-gray-500">Quantified business value</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600">98%</div>
                                <div class="text-sm text-gray-600">Compliance Ready</div>
                                <div class="text-xs text-gray-500">FDA/ICH standards</div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg text-center">
                            <div class="font-bold text-gray-800">Complete End-to-End Transformation:</div>
                            <div class="text-sm text-gray-600 mt-1">
                                From scattered data chaos ‚Üí Systematic AI-powered governance excellence
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Update final status
            const statusText = document.getElementById('status-text');
            statusText.textContent = 'Complete governance process successfully executed! Ready for enterprise deployment.';
        }

        // Load use cases on page load
        window.onload = function() {
            loadUseCases();
            loadGlossary();
            loadQualityMetrics();
            highlightFAIR('findable'); // Start with FINDABLE principle
            // Initial suggestions will be loaded by highlightFAIR
        }

        // Use Case-Specific Demo Functions
        async function demoProductDescriptionProcess() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                    üß™ Product Description (Nonclinical) - FDA Section 2.8 Governance Process
                </h3>
                
                <div id="product-process-flow" class="mb-8">
                    ${createUseCaseProcessFlow('product')}
                </div>
                
                <!-- Process Control Buttons -->
                <div class="mb-6 text-center">
                    <button onclick="startUseCaseProcess('product')" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold shadow-lg">
                        üöÄ Start Product Characterization Process
                    </button>
                </div>
                
                <!-- Individual Step Buttons -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <button id="product-step1-btn" onclick="runUseCaseStep('product', 1)" class="px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all">
                        <div class="font-semibold">Discover</div>
                        <div class="text-xs">üîç Lab Data</div>
                    </button>
                    <button id="product-step2-btn" onclick="runUseCaseStep('product', 2)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Standardize</div>
                        <div class="text-xs">üè∑Ô∏è Lab CDEs</div>
                    </button>
                    <button id="product-step3-btn" onclick="runUseCaseStep('product', 3)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Define</div>
                        <div class="text-xs">üìù FDA Metadata</div>
                    </button>
                    <button id="product-step4-btn" onclick="runUseCaseStep('product', 4)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Protect</div>
                        <div class="text-xs">üõ°Ô∏è Lab Controls</div>
                    </button>
                    <button id="product-step5-btn" onclick="runUseCaseStep('product', 5)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Report</div>
                        <div class="text-xs">üìã Section 2.8</div>
                    </button>
                </div>
                
                <div id="product-demo-results" class="mt-6"></div>
            `;
        }

        async function demoIndividualHealthProcess() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                    ü©∫ Individual Health Impact Assessment - FDA Sections 2.7 & 2.9 Governance Process
                </h3>
                
                <div id="individual-process-flow" class="mb-8">
                    ${createUseCaseProcessFlow('individual')}
                </div>
                
                <div class="mb-6 text-center">
                    <button onclick="startUseCaseProcess('individual')" class="px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:from-green-700 hover:to-teal-700 transition-all font-semibold shadow-lg">
                        üöÄ Start Clinical Biomarker Process
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <button id="individual-step1-btn" onclick="runUseCaseStep('individual', 1)" class="px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all">
                        <div class="font-semibold">Discover</div>
                        <div class="text-xs">üîç Clinical Data</div>
                    </button>
                    <button id="individual-step2-btn" onclick="runUseCaseStep('individual', 2)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Standardize</div>
                        <div class="text-xs">üè∑Ô∏è Biomarker CDEs</div>
                    </button>
                    <button id="individual-step3-btn" onclick="runUseCaseStep('individual', 3)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Define</div>
                        <div class="text-xs">üìù ICH Metadata</div>
                    </button>
                    <button id="individual-step4-btn" onclick="runUseCaseStep('individual', 4)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Protect</div>
                        <div class="text-xs">üõ°Ô∏è GCP Controls</div>
                    </button>
                    <button id="individual-step5-btn" onclick="runUseCaseStep('individual', 5)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Report</div>
                        <div class="text-xs">üìã Clinical Report</div>
                    </button>
                </div>
                
                <div id="individual-demo-results" class="mt-6"></div>
            `;
        }

        async function demoPopulationHealthProcess() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                    üë• Population Health Impact Assessment - FDA Section 2.9 Governance Process
                </h3>
                
                <div id="population-process-flow" class="mb-8">
                    ${createUseCaseProcessFlow('population')}
                </div>
                
                <div class="mb-6 text-center">
                    <button onclick="startUseCaseProcess('population')" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold shadow-lg">
                        üöÄ Start Surveillance Data Process
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <button id="population-step1-btn" onclick="runUseCaseStep('population', 1)" class="px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all">
                        <div class="font-semibold">Discover</div>
                        <div class="text-xs">üîç Survey Data</div>
                    </button>
                    <button id="population-step2-btn" onclick="runUseCaseStep('population', 2)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Standardize</div>
                        <div class="text-xs">üè∑Ô∏è Survey CDEs</div>
                    </button>
                    <button id="population-step3-btn" onclick="runUseCaseStep('population', 3)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Define</div>
                        <div class="text-xs">üìù WHO Metadata</div>
                    </button>
                    <button id="population-step4-btn" onclick="runUseCaseStep('population', 4)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Protect</div>
                        <div class="text-xs">üõ°Ô∏è Privacy Controls</div>
                    </button>
                    <button id="population-step5-btn" onclick="runUseCaseStep('population', 5)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Report</div>
                        <div class="text-xs">üìã Surveillance</div>
                    </button>
                </div>
                
                <div id="population-demo-results" class="mt-6"></div>
            `;
        }

        async function demoComprehensiveProcess() {
            showDemoContainer();
            const content = document.getElementById('demo-content');
            
            content.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                    üìã Comprehensive Regulatory Compliance - FDA Sections 2.7-2.10 Integration Governance Process
                </h3>
                
                <div id="comprehensive-process-flow" class="mb-8">
                    ${createUseCaseProcessFlow('comprehensive')}
                </div>
                
                <div class="mb-6 text-center">
                    <button onclick="startUseCaseProcess('comprehensive')" class="px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-lg hover:from-red-700 hover:to-orange-700 transition-all font-semibold shadow-lg">
                        üöÄ Start Complete PMTA Process
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                    <button id="comprehensive-step1-btn" onclick="runUseCaseStep('comprehensive', 1)" class="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all">
                        <div class="font-semibold">Discover</div>
                        <div class="text-xs">üîç All PMTA Data</div>
                    </button>
                    <button id="comprehensive-step2-btn" onclick="runUseCaseStep('comprehensive', 2)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Standardize</div>
                        <div class="text-xs">üè∑Ô∏è Multi-Section CDEs</div>
                    </button>
                    <button id="comprehensive-step3-btn" onclick="runUseCaseStep('comprehensive', 3)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Define</div>
                        <div class="text-xs">üìù FDA Metadata</div>
                    </button>
                    <button id="comprehensive-step4-btn" onclick="runUseCaseStep('comprehensive', 4)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Protect</div>
                        <div class="text-xs">üõ°Ô∏è Full Controls</div>
                    </button>
                    <button id="comprehensive-step5-btn" onclick="runUseCaseStep('comprehensive', 5)" class="px-4 py-3 bg-gray-400 text-white rounded-lg cursor-not-allowed" disabled>
                        <div class="font-semibold">Report</div>
                        <div class="text-xs">üìã PMTA Ready</div>
                    </button>
                </div>
                
                <div id="comprehensive-demo-results" class="mt-6"></div>
            `;
        }

        function createUseCaseProcessFlow(useCase) {
            const colors = {
                'product': 'blue',
                'individual': 'green', 
                'population': 'purple',
                'comprehensive': 'red'
            };
            const color = colors[useCase];
            
            return `
                <div class="flex justify-center">
                    <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl">
                        <div class="flex items-center justify-between space-x-4">
                            <div class="flex flex-col items-center">
                                <div id="${useCase}-step1-indicator" class="w-12 h-12 bg-${color}-100 rounded-full flex items-center justify-center mb-2 border-2 border-${color}-300">
                                    <span class="text-${color}-600 font-bold">1</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Discover</div>
                                    <div class="text-gray-600">Find Assets</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="${useCase}-step2-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">2</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Standardize</div>
                                    <div class="text-gray-600">CDEs</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="${useCase}-step3-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">3</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Define</div>
                                    <div class="text-gray-600">Metadata</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="${useCase}-step4-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">4</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Protect</div>
                                    <div class="text-gray-600">Controls</div>
                                </div>
                            </div>
                            
                            <div class="flex-1 h-0.5 bg-gray-300"></div>
                            
                            <div class="flex flex-col items-center">
                                <div id="${useCase}-step5-indicator" class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300">
                                    <span class="text-gray-400 font-bold">5</span>
                                </div>
                                <div class="text-xs text-center">
                                    <div class="font-semibold">Report</div>
                                    <div class="text-gray-600">Insights</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Use Case Process Control Functions
        let useCaseState = {
            currentStep: 0,
            processRunning: false,
            results: {}
        };

        async function startUseCaseProcess(useCase) {
            useCaseState.processRunning = true;
            useCaseState.currentStep = 0;
            useCaseState.results = {};
            
            // Run all steps sequentially for the specific use case
            for (let step = 1; step <= 5; step++) {
                await runUseCaseStep(useCase, step);
                await new Promise(resolve => setTimeout(resolve, 1000)); // Brief pause between steps
            }
            
            showUseCaseSummary(useCase);
            useCaseState.processRunning = false;
        }

        async function runUseCaseStep(useCase, step) {
            if (step > useCaseState.currentStep + 1 && !useCaseState.processRunning) return;
            
            useCaseState.currentStep = step;
            updateUseCaseIndicators(useCase, step);
            
            const resultContainer = document.getElementById(`${useCase}-demo-results`);
            
            // Execute use case-specific step content
            switch (step) {
                case 1:
                    await showUseCaseDiscovery(useCase);
                    break;
                case 2:
                    await showUseCaseStandardization(useCase);
                    break;
                case 3:
                    await showUseCaseDefinition(useCase);
                    break;
                case 4:
                    await showUseCaseProtection(useCase);
                    break;
                case 5:
                    await showUseCaseReport(useCase);
                    break;
            }
            
            // Enable next step button
            if (step < 5) {
                const nextBtn = document.getElementById(`${useCase}-step${step + 1}-btn`);
                nextBtn.disabled = false;
                nextBtn.className = getUseCaseButtonClass(useCase, step + 1);
            }
        }

        function updateUseCaseIndicators(useCase, currentStep) {
            const colors = {
                'product': 'blue',
                'individual': 'green',
                'population': 'purple', 
                'comprehensive': 'red'
            };
            const color = colors[useCase];
            
            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`${useCase}-step${i}-indicator`);
                
                if (i < currentStep) {
                    // Completed step
                    indicator.className = `w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-2 border-2 border-green-400`;
                    indicator.innerHTML = '<span class="text-green-600 font-bold">‚úì</span>';
                } else if (i === currentStep) {
                    // Current step
                    indicator.className = `w-12 h-12 bg-${color}-100 rounded-full flex items-center justify-center mb-2 border-2 border-${color}-400 animate-pulse`;
                    indicator.innerHTML = `<span class="text-${color}-600 font-bold">${i}</span>`;
                } else {
                    // Future step
                    indicator.className = 'w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-2 border-2 border-gray-300';
                    indicator.innerHTML = `<span class="text-gray-400 font-bold">${i}</span>`;
                }
            }
        }

        function getUseCaseButtonClass(useCase, step) {
            const colors = {
                'product': 'blue',
                'individual': 'green',
                'population': 'purple',
                'comprehensive': 'red'
            };
            const color = colors[useCase];
            return `px-4 py-3 bg-${color}-600 text-white rounded-lg hover:bg-${color}-700 transition-all`;
        }

        async function showUseCaseDiscovery(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            container.innerHTML = `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-400">
                    <h4 class="text-lg font-bold text-blue-800 mb-3">üîç Step 1: Data Discovery Complete</h4>
                    <div class="flex items-center justify-between">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">${useCaseData.discovery.assets}</div>
                            <div class="text-sm text-blue-700">${useCaseData.discovery.description}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">${useCaseData.discovery.timeReduction}</div>
                            <div class="text-sm text-green-700">Time Reduction</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-purple-600">‚úÖ</div>
                            <div class="text-sm text-purple-700">Process Complete</div>
                        </div>
                    </div>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 1200));
        }

        async function showUseCaseStandardization(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            container.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-400 mt-4">
                    <h4 class="text-lg font-bold text-green-800 mb-3">üè∑Ô∏è Step 2: CDE Standardization Complete</h4>
                    <div class="flex items-center justify-between">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">${useCaseData.standardization.cdes}</div>
                            <div class="text-sm text-green-700">${useCaseData.standardization.description}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">${useCaseData.standardization.confidence}</div>
                            <div class="text-sm text-purple-700">AI Confidence</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-600">‚úÖ</div>
                            <div class="text-sm text-green-700">Process Complete</div>
                        </div>
                    </div>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 1200));
        }

        async function showUseCaseDefinition(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            container.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-purple-400 mt-4">
                    <h4 class="text-lg font-bold text-purple-800 mb-3">üìù Step 3: Metadata Definition Complete</h4>
                    <div class="flex items-center justify-between">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">${useCaseData.definition.accuracy}</div>
                            <div class="text-sm text-purple-700">Metadata Accuracy</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-indigo-600">${useCaseData.definition.coverage}</div>
                            <div class="text-sm text-indigo-700">${useCaseData.definition.description}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-purple-600">‚úÖ</div>
                            <div class="text-sm text-purple-700">Process Complete</div>
                        </div>
                    </div>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 1200));
        }

        async function showUseCaseProtection(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            container.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-400 mt-4">
                    <h4 class="text-lg font-bold text-red-800 mb-3">üõ°Ô∏è Step 4: Protection & Governance Complete</h4>
                    <div class="flex items-center justify-between">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-600">${useCaseData.protection.controls}</div>
                            <div class="text-sm text-red-700">Protection Controls</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600">${useCaseData.protection.compliance}</div>
                            <div class="text-sm text-orange-700">${useCaseData.protection.description}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-red-600">‚úÖ</div>
                            <div class="text-sm text-red-700">Process Complete</div>
                        </div>
                    </div>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 1200));
        }

        async function showUseCaseReport(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            container.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-indigo-400 mt-4">
                    <h4 class="text-lg font-bold text-indigo-800 mb-3">üìã Step 5: Governance Report Complete</h4>
                    <div class="flex items-center justify-between">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-indigo-600">${useCaseData.report.timeframe}</div>
                            <div class="text-sm text-indigo-700">Report Generation</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">${useCaseData.report.readiness}</div>
                            <div class="text-sm text-blue-700">${useCaseData.report.description}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xl font-bold text-indigo-600">‚úÖ</div>
                            <div class="text-sm text-indigo-700">Process Complete</div>
                        </div>
                    </div>
                </div>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 1200));
        }

        function getUseCaseData(useCase) {
            const data = {
                'product': {
                    discovery: {
                        assets: '89 assets',
                        description: 'Product characterization data found',
                        timeReduction: '87%',
                        details: 'Laboratory data, formulation specs, chemical analyses, physical properties - all Section 2.8 requirements covered'
                    },
                    standardization: {
                        cdes: '32 CDEs',
                        description: 'Laboratory testing standards',
                        confidence: '97%',
                        details: 'Product formulation, chemical composition, physical properties, manufacturing specs aligned with FDA nonclinical standards'
                    },
                    definition: {
                        accuracy: '96%',
                        coverage: '100%',
                        description: 'FDA Section 2.8 compliance',
                        details: 'Rich metadata with regulatory context, testing methodologies, quality specifications, and manufacturing standards'
                    },
                    protection: {
                        controls: '78 controls',
                        compliance: '98%',
                        description: 'Lab standard compliance',
                        details: 'Quality rules for lab testing, formulation controls, batch tracking, manufacturing compliance, and audit readiness'
                    },
                    report: {
                        timeframe: '45 seconds',
                        readiness: '100%',
                        description: 'Section 2.8 ready',
                        details: 'Complete product characterization report with all nonclinical data ready for FDA submission'
                    }
                },
                'individual': {
                    discovery: {
                        assets: '104 assets',
                        description: 'Clinical biomarker data found',
                        timeReduction: '91%',
                        details: 'Subject demographics, biomarker measurements, exposure data, safety parameters - Sections 2.7/2.9 coverage'
                    },
                    standardization: {
                        cdes: '41 CDEs',
                        description: 'Clinical research standards',
                        confidence: '95%',
                        details: 'Biomarker data, exposure metrics, subject demographics, safety parameters aligned with ICH GCP guidelines'
                    },
                    definition: {
                        accuracy: '94%',
                        coverage: '100%',
                        description: 'ICH GCP compliance',
                        details: 'Clinical metadata with regulatory context, study protocols, biomarker methodologies, and safety monitoring'
                    },
                    protection: {
                        controls: '92 controls',
                        compliance: '97%',
                        description: 'GCP standard compliance',
                        details: 'Clinical data protection, subject privacy, biomarker validation, safety monitoring, and regulatory compliance'
                    },
                    report: {
                        timeframe: '60 seconds',
                        readiness: '100%',
                        description: 'Clinical study ready',
                        details: 'Complete individual health assessment with biomarker analysis ready for regulatory submission'
                    }
                },
                'population': {
                    discovery: {
                        assets: '76 assets',
                        description: 'Population surveillance data found',
                        timeReduction: '83%',
                        details: 'Survey responses, demographic patterns, health outcomes, behavioral data - Section 2.9 surveillance requirements'
                    },
                    standardization: {
                        cdes: '28 CDEs',
                        description: 'Epidemiological standards',
                        confidence: '92%',
                        details: 'Population demographics, health outcomes, tobacco use patterns, survey responses aligned with WHO surveillance standards'
                    },
                    definition: {
                        accuracy: '93%',
                        coverage: '100%',
                        description: 'WHO surveillance compliance',
                        details: 'Population health metadata with epidemiological context, survey methodologies, and statistical frameworks'
                    },
                    protection: {
                        controls: '85 controls',
                        compliance: '95%',
                        description: 'Privacy standard compliance',
                        details: 'Population data protection, privacy controls, anonymization, statistical disclosure control, and ethical compliance'
                    },
                    report: {
                        timeframe: '40 seconds',
                        readiness: '100%',
                        description: 'Surveillance ready',
                        details: 'Complete population health impact assessment ready for public health authorities'
                    }
                },
                'comprehensive': {
                    discovery: {
                        assets: '127 assets',
                        description: 'Complete PMTA data found',
                        timeReduction: '94%',
                        details: 'All sections 2.7-2.10: nonclinical, clinical, population health, and comprehensive regulatory data'
                    },
                    standardization: {
                        cdes: '44 CDEs',
                        description: 'Multi-section standards',
                        confidence: '96%',
                        details: 'Comprehensive CDEs spanning all regulatory sections with full FDA PMTA alignment and cross-section integration'
                    },
                    definition: {
                        accuracy: '95%',
                        coverage: '100%',
                        description: 'Full FDA PMTA compliance',
                        details: 'Complete regulatory metadata with cross-section integration, submission readiness, and comprehensive compliance'
                    },
                    protection: {
                        controls: '127 controls',
                        compliance: '98%',
                        description: 'Full regulatory compliance',
                        details: 'Comprehensive protection across all data types, complete audit trail, multi-regulatory compliance, and submission security'
                    },
                    report: {
                        timeframe: '90 seconds',
                        readiness: '100%',
                        description: 'PMTA submission ready',
                        details: 'Complete PMTA package with all sections integrated, cross-references validated, and submission-ready documentation'
                    }
                }
            };
            
            return data[useCase];
        }

        function showUseCaseSummary(useCase) {
            const useCaseData = getUseCaseData(useCase);
            const container = document.getElementById(`${useCase}-demo-results`);
            
            const summaryData = {
                'product': { title: 'üß™ Product Characterization Complete', color: 'blue', roi: '$800K', time: '85%' },
                'individual': { title: 'ü©∫ Clinical Assessment Complete', color: 'green', roi: '$1.2M', time: '91%' },
                'population': { title: 'üë• Population Analysis Complete', color: 'purple', roi: '$600K', time: '83%' },
                'comprehensive': { title: 'üìã PMTA Submission Complete', color: 'red', roi: '$2.1M', time: '94%' }
            };
            
            const summary = summaryData[useCase];
            
            container.innerHTML += `
                <div class="mt-6 bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border-2 border-green-200">
                    <h3 class="text-xl font-bold text-center text-gray-800 mb-4">
                        üéâ ${summary.title}
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-${summary.color}-600">${summary.time}</div>
                            <div class="text-sm text-gray-600">Time Reduction</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-green-600">${summary.roi}</div>
                            <div class="text-sm text-gray-600">Annual ROI</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-purple-600">98%</div>
                            <div class="text-sm text-gray-600">Compliance Ready</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-4 bg-white rounded-lg text-center">
                        <div class="font-bold text-gray-800">End-to-End Transformation Complete!</div>
                        <div class="text-sm text-gray-600 mt-1">
                            From manual processes ‚Üí AI-powered governance excellence
                        </div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html> 