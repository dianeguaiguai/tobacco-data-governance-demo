<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Data Governance Agent - Life Sciences Industry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }
        .use-case-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .tobacco-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .product-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .use-case-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 10px;
        }

        .process-step:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .process-step.active .step-number {
            background-color: #3b82f6;
            color: white;
        }

        .process-step.completed .step-number {
            background-color: #10b981;
            color: white;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .step-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            line-height: 1.2;
        }

        .process-step.active .step-label {
            color: #3b82f6;
        }

        .process-step.completed .step-label {
            color: #10b981;
        }

        /* Tab Styling */
        .tab-button {
            transition: all 0.2s ease;
        }

        .tab-button.active {
            color: #3b82f6 !important;
            border-color: #3b82f6 !important;
        }

        .tab-content {
            min-height: 600px;
        }

        .tab-content.hidden {
            display: none;
        }

        /* Use Case Selection */
        .use-case-card.selected {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white p-6">
        <div class="container mx-auto">
            <h1 class="text-4xl font-bold mb-2">ü§ñ AI Data Governance Agent</h1>
            <p class="text-xl opacity-90">Intelligent assistant that adapts to your role, understands FAIR principles, and provides context-aware recommendations for data governance workflows</p>
            <div class="mt-4 text-sm opacity-80">
                Capabilities: Dynamic persona switching ‚Ä¢ Real-time FAIR guidance ‚Ä¢ Use case-specific insights ‚Ä¢ Automated compliance workflows ‚Ä¢ ROI quantification
            </div>
        </div>
    </header>

    <!-- AI Intelligence Panel -->
    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border-b">
        <div class="container mx-auto p-4">
            <div id="ai-status" class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium text-gray-700">AI Agent Active</span>
                    <span id="ai-activity" class="text-xs text-gray-500">Ready to assist with FAIR data governance</span>
                </div>
                <div id="impact-metrics" class="text-xs text-purple-600">
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-6">
        
        <!-- Three-Tab Interface -->
        <section class="mb-8">
            <div class="bg-white rounded-lg shadow-lg">
                <!-- Tab Navigation -->
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6" aria-label="Tabs">
                        <button onclick="switchTab('process')" id="process-tab" class="tab-button active py-4 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600">
                            <i class="fas fa-cogs mr-2"></i>Data Governance Process
                        </button>
                        <button onclick="switchTab('use-cases')" id="use-cases-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-th-large mr-2"></i>Use Cases & Implementation
                        </button>
                        <button onclick="switchTab('ai-assistant')" id="ai-assistant-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-robot mr-2"></i>AI Assistant
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div class="p-6">
                    <!-- Tab 1: Data Governance Process (General) -->
                    <div id="process-content" class="tab-content">
                        <div class="space-y-8">
                            <!-- Transformation Before/After -->
                            <div class="bg-gradient-to-r from-red-50 to-green-50 rounded-lg p-6 border">
                                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                                    <i class="fas fa-exchange-alt mr-2"></i>Transformation: Before vs After AI Agent
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Before AI Agent -->
                                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-400">
                                        <h4 class="font-bold text-red-800 mb-4 text-lg">‚ùå Before AI Agent</h4>
                                        <ul class="space-y-3 text-sm text-red-700">
                                            <li>‚Ä¢ <strong>Scattered data, no definitions</strong><br><span class="text-red-600">Data stewards spend 3 days hunting across 50+ systems</span></li>
                                            <li>‚Ä¢ <strong>No starting point for CDEs</strong><br><span class="text-red-600">Manual CDE identification takes weeks</span></li>
                                            <li>‚Ä¢ <strong>Tribal knowledge trapped in documents</strong><br><span class="text-red-600">Business definitions buried in emails and files</span></li>
                                            <li>‚Ä¢ <strong>No clear ownership</strong><br><span class="text-red-600">SMEs unknown, data lineage unclear</span></li>
                                            <li>‚Ä¢ <strong>Manual compliance checks</strong><br><span class="text-red-600">Audit preparation takes 3+ weeks</span></li>
                                        </ul>
                                        <div class="mt-4 p-3 bg-red-100 rounded text-sm">
                                            <div class="flex items-center">
                                                <i class="fas fa-clock mr-2 text-red-600"></i>
                                                <span class="font-semibold text-red-800">Time to Value: 3-6 months</span>
                                            </div>
                                            <div class="flex items-center mt-1">
                                                <i class="fas fa-dollar-sign mr-2 text-red-600"></i>
                                                <span class="font-semibold text-red-800">Cost: High manual effort, delayed projects</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- After AI Agent -->
                                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-400">
                                        <h4 class="font-bold text-green-800 mb-4 text-lg">‚úÖ After AI Agent + Human Review</h4>
                                        <ul class="space-y-3 text-sm text-green-700">
                                            <li>‚Ä¢ <strong>Draft metadata for 127 fields in 30 minutes</strong><br><span class="text-green-600">AI discovers and catalogs data across all systems</span></li>
                                            <li>‚Ä¢ <strong>Suggested 44 high-priority CDEs</strong><br><span class="text-green-600">AI identifies CDEs with 94-96% confidence</span></li>
                                            <li>‚Ä¢ <strong>Key terms extracted from documents</strong><br><span class="text-green-600">AI parses and structures business knowledge</span></li>
                                            <li>‚Ä¢ <strong>Draft list of SMEs for review</strong><br><span class="text-green-600">AI suggests domain experts and data owners</span></li>
                                            <li>‚Ä¢ <strong>Automated compliance workflows</strong><br><span class="text-green-600">Continuous monitoring, 2-day audit prep</span></li>
                                        </ul>
                                        <div class="mt-4 p-3 bg-green-100 rounded text-sm">
                                            <div class="flex items-center">
                                                <i class="fas fa-clock mr-2 text-green-600"></i>
                                                <span class="font-semibold text-green-800">Time to Value: 2-3 weeks</span>
                                            </div>
                                            <div class="flex items-center mt-1">
                                                <i class="fas fa-dollar-sign mr-2 text-green-600"></i>
                                                <span class="font-semibold text-green-800">ROI: $2M+ annually, 85% time savings</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Key Metrics -->
                                <div class="grid grid-cols-4 gap-4 mt-8 text-center">
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-blue-600">85%</div>
                                        <div class="text-sm text-gray-600">Time Reduction</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-green-600">91%</div>
                                        <div class="text-sm text-gray-600">Quality Score</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-purple-600">48</div>
                                        <div class="text-sm text-gray-600">AI Contexts</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-orange-600">$2M+</div>
                                        <div class="text-sm text-gray-600">Annual ROI</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Complete Process Flow -->
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border">
                                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                                    <i class="fas fa-project-diagram mr-2"></i>Complete Data Governance Process Flow
                                </h3>
                                
                                <!-- Process Steps -->
                                <div class="flex justify-center mb-8">
                                    <div class="flex space-x-6">
                                        <div class="process-step active" id="general-step-1">
                                            <div class="step-number">1</div>
                                            <div class="step-label">Discover<br><span class="text-xs">Find Assets</span></div>
                                        </div>
                                        <div class="process-step" id="general-step-2">
                                            <div class="step-number">2</div>
                                            <div class="step-label">Standardize<br><span class="text-xs">CDEs</span></div>
                                        </div>
                                        <div class="process-step" id="general-step-3">
                                            <div class="step-number">3</div>
                                            <div class="step-label">Define<br><span class="text-xs">Metadata</span></div>
                                        </div>
                                        <div class="process-step" id="general-step-4">
                                            <div class="step-number">4</div>
                                            <div class="step-label">Protect<br><span class="text-xs">Quality Rules</span></div>
                                        </div>
                                        <div class="process-step" id="general-step-5">
                                            <div class="step-number">5</div>
                                            <div class="step-label">Report<br><span class="text-xs">Governance</span></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Process Control -->
                                <div class="text-center mb-6">
                                    <button onclick="startGeneralGovernanceProcess()" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-semibold shadow-lg text-lg">
                                        üöÄ Start Complete Governance Process
                                    </button>
                                    <button onclick="resetGeneralProcess()" class="ml-4 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all">
                                        <i class="fas fa-undo mr-2"></i>Reset Process
                                    </button>
                                </div>

                                <!-- Process Results -->
                                <div id="general-process-results" class="mt-6"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Use Cases & Implementation -->
                    <div id="use-cases-content" class="tab-content hidden">
                        <div class="space-y-8">
                            <!-- Use Cases Overview -->
                            <div>
                                <h3 class="text-2xl font-bold mb-6 text-gray-800">üéØ Data Governance Use Cases</h3>
                                <div id="use-cases-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <!-- Use cases will be loaded here -->
                                </div>
                            </div>

                            <!-- Selected Use Case Details -->
                            <div id="selected-use-case-details" class="hidden">
                                <h3 class="text-2xl font-bold mb-6 text-gray-800" id="selected-use-case-title">Use Case Implementation</h3>
                                
                                <!-- Implementation Components Grid -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                                    <!-- Data Inventory -->
                                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border-l-4 border-blue-500">
                                        <h4 class="text-xl font-bold mb-4 text-blue-700">
                                            <i class="fas fa-database mr-2"></i>Data Inventory
                                            <span class="text-sm font-normal text-blue-500 ml-2">(FINDABLE)</span>
                                        </h4>
                                        <div id="use-case-data-inventory">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Business Glossary & CDEs -->
                                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 border-l-4 border-green-500">
                                        <h4 class="text-xl font-bold mb-4 text-green-700">
                                            <i class="fas fa-book mr-2"></i>Business Glossary & CDEs
                                            <span class="text-sm font-normal text-green-500 ml-2">(REUSABLE)</span>
                                        </h4>
                                        <div id="use-case-glossary">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Data Quality -->
                                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 border-l-4 border-purple-500">
                                        <h4 class="text-xl font-bold mb-4 text-purple-700">
                                            <i class="fas fa-chart-line mr-2"></i>Data Quality Metrics
                                            <span class="text-sm font-normal text-purple-500 ml-2">(INTEROPERABLE)</span>
                                        </h4>
                                        <div id="use-case-quality">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Workflow -->
                                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6 border-l-4 border-orange-500">
                                        <h4 class="text-xl font-bold mb-4 text-orange-700">
                                            <i class="fas fa-cogs mr-2"></i>Compliance Workflow
                                            <span class="text-sm font-normal text-orange-500 ml-2">(ACCESSIBLE)</span>
                                        </h4>
                                        <div id="use-case-workflow">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Use Case Governance Process -->
                                <div class="bg-white rounded-lg shadow border p-6">
                                    <h4 class="text-xl font-bold mb-4 text-gray-800">Run Governance Process for This Use Case</h4>
                                    <div class="text-center">
                                        <button onclick="runSelectedUseCaseProcess()" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold shadow-lg">
                                            üöÄ Start Use Case Governance Process
                                        </button>
                                    </div>
                                    <div id="selected-use-case-results" class="mt-6"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: AI Assistant -->
                    <div id="ai-assistant-content" class="tab-content hidden">
                        <div class="space-y-8">
                            <!-- FAIR Principles & Persona Selection -->
                            <div class="bg-white rounded-lg shadow border p-6">
                                <div class="flex justify-between items-center mb-6">
                                    <!-- FAIR Navigation -->
                                    <div class="flex space-x-6">
                                        <button onclick="highlightFAIR('findable')" id="fair-findable" class="fair-nav-btn px-4 py-2 rounded-lg text-blue-600 bg-blue-50 font-semibold">
                                            üîç FINDABLE
                                        </button>
                                        <button onclick="highlightFAIR('accessible')" id="fair-accessible" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                                            üîì ACCESSIBLE
                                        </button>
                                        <button onclick="highlightFAIR('interoperable')" id="fair-interoperable" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                                            üîÑ INTEROPERABLE
                                        </button>
                                        <button onclick="highlightFAIR('reusable')" id="fair-reusable" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                                            ‚ôªÔ∏è REUSABLE
                                        </button>
                                    </div>
                                    
                                    <!-- Persona Selection -->
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm font-medium text-gray-700">View as:</span>
                                        <select id="persona-selector" onchange="switchPersona()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                            <option value="steward">üõ°Ô∏è Data Steward</option>
                                            <option value="owner">üëë Data Owner</option>
                                            <option value="sme">üß† SME</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Current Persona Description -->
                                <div id="persona-description" class="p-3 bg-blue-50 rounded-lg">
                                    <p class="text-sm text-blue-800">
                                        <strong>Data Steward View:</strong> Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across regulatory landscape.
                                    </p>
                                </div>
                            </div>

                            <!-- AI-Powered Data Discovery -->
                            <div class="bg-white rounded-lg shadow border p-6">
                                <h3 class="text-2xl font-bold mb-6 text-gray-800">
                                    <i class="fas fa-search mr-2 text-blue-600"></i>AI-Powered Data Discovery
                                </h3>
                                <div class="flex gap-4 mb-6">
                                    <input 
                                        type="text" 
                                        id="ai-search-input" 
                                        placeholder="Ask AI: 'Where can I find nicotine data?' or 'Show me biomarker assets'" 
                                        class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                    <select id="ai-use-case-filter" class="p-3 border border-gray-300 rounded-lg">
                                        <option value="">All Use Cases</option>
                                        <option value="Product Description (Nonclinical)">Product Description (Nonclinical)</option>
                                        <option value="Product Impact on Individual Health">Product Impact on Individual Health</option>
                                        <option value="Product Impact on Population Health">Product Impact on Population Health</option>
                                        <option value="Comprehensive Regulatory Compliance">Comprehensive Regulatory Compliance</option>
                                    </select>
                                    <button onclick="aiSearchData()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        <i class="fas fa-brain mr-2"></i>AI Search
                                    </button>
                                </div>

                                <!-- Data Discovery Results -->
                                <div id="ai-discovery-results" class="mb-6">
                                    <div class="text-center text-gray-500 py-8">
                                        <i class="fas fa-robot text-4xl mb-4"></i>
                                        <p>Ask AI to discover and locate your data assets</p>
                                    </div>
                                </div>

                                <!-- Where to Find Data Guide -->
                                <div class="bg-blue-50 rounded-lg p-4 mb-6">
                                    <h4 class="font-bold text-blue-800 mb-3">üó∫Ô∏è AI Data Location Guide</h4>
                                    <div id="data-location-guide" class="text-sm text-blue-700">
                                        <p>Use AI search above to get intelligent guidance on where to find specific data assets across your data landscape.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Smart Suggestions -->
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border-l-4 border-purple-500">
                                <h3 class="text-2xl font-bold mb-6 text-purple-800">
                                    <i class="fas fa-brain mr-2"></i>AI Smart Suggestions
                                </h3>
                                <div class="mb-4 text-sm text-purple-700">
                                    <p>AI provides context-aware suggestions based on your persona, current FAIR principle focus, and selected use case.</p>
                                </div>
                                <div id="ai-smart-suggestions" class="space-y-3">
                                    <!-- AI suggestions will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Global variables for demo state
        let currentPersona = 'steward';
        let currentFAIR = 'findable';
        
        // Persona definitions
        const personas = {
            steward: {
                name: "üõ°Ô∏è Data Steward",
                description: "Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across regulatory landscape.",
                color: "blue",
                priorities: ["Quality Metrics", "Compliance Tracking", "Governance Workflows"]
            },
            owner: {
                name: "üëë Data Owner", 
                description: "Manage data assets, control access, and demonstrate business value. Your goal: Maximize ROI from data while ensuring secure, controlled access.",
                color: "green",
                priorities: ["Asset Management", "Access Control", "Business Value", "ROI Tracking"]
            },
            sme: {
                name: "üß† SME",
                description: "Provide domain expertise, validate business definitions, and ensure data meets regulatory requirements. Your goal: Make data meaningful and fit-for-purpose.",
                color: "purple", 
                priorities: ["Business Definitions", "Domain Validation", "Regulatory Requirements"]
            }
        };

        // FAIR principle definitions
        const fairPrinciples = {
            findable: {
                title: "üîç FINDABLE",
                description: "AI indexes data across scattered sources and creates unified metadata catalog",
                example: "Data stewards ask: 'Show me datasets related to patient demographics' ‚Üí instant results",
                color: "blue"
            },
            accessible: {
                title: "üîì ACCESSIBLE", 
                description: "AI automates data access workflows with built-in compliance checks",
                example: "Steward requests access to claims data ‚Üí AI explains process, initiates request, tracks approvals",
                color: "green"
            },
            interoperable: {
                title: "üîÑ INTEROPERABLE",
                description: "AI identifies and standardizes data formats, units, and terminology",
                example: "AI suggests: 'Diagnosis_Code in System A maps to ICD-10 code in System B'",
                color: "orange"
            },
            reusable: {
                title: "‚ôªÔ∏è REUSABLE", 
                description: "AI drafts business definitions, flags CDEs, and enriches metadata",
                example: "AI drafts: 'Transaction Amount = Total billed amount per claim' + flags as CDE",
                color: "purple"
            }
        };

        function switchPersona() {
            const selector = document.getElementById('persona-selector');
            currentPersona = selector.value;
            const persona = personas[currentPersona];
            
            // Update description
            const description = document.getElementById('persona-description');
            description.innerHTML = `
                <p class="text-sm text-${persona.color}-800">
                    <strong>${persona.name} View:</strong> ${persona.description}
                </p>
            `;
            description.className = `mt-3 p-3 bg-${persona.color}-50 rounded-lg`;
            
            // Update AI activity
            updateAIActivity(`Adapting interface for ${persona.name}...`);
            
            // Reload data with persona context
            setTimeout(() => {
                loadPersonaSpecificData();
                updateAISuggestionsForContext();
                updateAIActivity(`Ready to assist ${persona.name} with FAIR data governance`);
            }, 1000);
        }

        function highlightFAIR(principle) {
            currentFAIR = principle;
            
            // Reset all FAIR buttons
            document.querySelectorAll('.fair-nav-btn').forEach(btn => {
                btn.className = 'fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50';
            });
            
            // Highlight selected principle
            const fairPrinciple = fairPrinciples[principle];
            const btn = document.getElementById(`fair-${principle}`);
            btn.className = `fair-nav-btn px-4 py-2 rounded-lg text-${fairPrinciple.color}-600 bg-${fairPrinciple.color}-50 font-semibold`;
            
            // Update AI activity
            updateAIActivity(`Demonstrating ${fairPrinciple.title} capabilities...`);
            
            // Show FAIR-specific UI elements and update suggestions
            setTimeout(() => {
                highlightFAIRFeatures(principle);
                updateAISuggestionsForContext();
                updateAIActivity(`${fairPrinciple.title} - ${fairPrinciple.description}`);
            }, 500);
        }

        function updateAIActivity(message) {
            const activity = document.getElementById('ai-activity');
            activity.textContent = message;
            
            // Show working animation
            const status = document.getElementById('ai-status');
            status.classList.add('animate-pulse');
            setTimeout(() => status.classList.remove('animate-pulse'), 2000);
        }

        function loadPersonaSpecificData() {
            const persona = personas[currentPersona];
            
            // Update impact metrics based on persona
            const metrics = document.getElementById('impact-metrics');
            if (currentPersona === 'owner') {
                metrics.innerHTML = `
                    <span class="mr-4">üí∞ $2M+ ROI annually</span>
                    <span class="mr-4">‚ö° 95% access automation</span>
                    <span>üîê 100% compliance tracking</span>
                `;
            } else if (currentPersona === 'sme') {
                metrics.innerHTML = `
                    <span class="mr-4">üìö 44 CDEs identified</span>
                    <span class="mr-4">üéØ 98% definition accuracy</span>
                    <span>‚ö° 80% validation time saved</span>
                `;
            } else {
                metrics.innerHTML = `
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                `;
            }
        }

        function highlightFAIRFeatures(principle) {
            // Add visual cues based on FAIR principle
            const elements = document.querySelectorAll('.bg-white');
            elements.forEach(el => {
                if (principle === 'findable' && el.querySelector('#search-input')) {
                    el.style.boxShadow = '0 0 15px rgba(59, 130, 246, 0.3)';
                } else if (principle === 'accessible' && el.querySelector('#workflow-result')) {
                    el.style.boxShadow = '0 0 15px rgba(34, 197, 94, 0.3)';
                } else if (principle === 'interoperable' && el.querySelector('#business-glossary')) {
                    el.style.boxShadow = '0 0 15px rgba(249, 115, 22, 0.3)';
                } else if (principle === 'reusable' && el.querySelector('#data-quality')) {
                    el.style.boxShadow = '0 0 15px rgba(147, 51, 234, 0.3)';
                } else {
                    el.style.boxShadow = '';
                }
            });
        }

        function updateAISuggestionsForContext() {
            const persona = personas[currentPersona];
            const fairPrinciple = fairPrinciples[currentFAIR];
            
            // Get current use case context
            const useCaseFilter = document.getElementById('use-case-filter').value;
            const useCase = useCaseFilter || 'general';
            
            let suggestions = [];
            
            // Generate suggestions based on FAIR principle + Persona + Use Case combination
            if (currentFAIR === 'findable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Product Characterization Discovery',
                                content: 'AI found 47 product specification fields across 8 systems. Implement unified catalog to reduce nonclinical data discovery from 2 days to 15 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Section 2.8 Data Indexing',
                                content: 'Auto-index product tabulation data per FDA Section 2.8 standards. Estimated effort savings: 35 hours/week for regulatory stewards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Biomarker Data Discovery',
                                content: 'AI indexed 156 biomarker fields across clinical databases. Unified discovery reduces individual health assessment prep from 4 days to 45 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Clinical Data Auto-Cataloging',
                                content: 'Smart indexing of cotinine, NNAL, and exposure biomarkers. Saves clinical stewards 25 hours/week in data preparation.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Surveillance Data Unification',
                                content: 'AI discovered 89 population health metrics across epidemiological systems. Unified catalog reduces surveillance prep from 5 days to 1 hour.'
                            },
                            {
                                type: 'indexing',
                                title: 'Public Health Data Indexing',
                                content: 'Auto-catalog demographic, behavioral, and health outcome data for population studies. Saves 40 hours/week for health stewards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Cross-Section Data Discovery',
                                content: 'AI unified discovery across Sections 2.7-2.10. Comprehensive regulatory package prep reduced from 3 weeks to 2 days.'
                            },
                            {
                                type: 'indexing',
                                title: 'FDA Submission Catalog',
                                content: 'Smart indexing for complete PMTA submissions. Auto-links product, clinical, and population data. Saves 60 hours/week.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Universal Data Discovery',
                                content: 'AI found 127 total fields across systems. Recommend implementing unified metadata catalog to improve discovery from 3 days to 30 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Smart Indexing Opportunity',
                                content: 'AI can auto-index 50+ Excel files and 12 email repositories. Estimated effort savings: 40 hours/week for your steward team.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Product Data Asset ROI',
                                content: 'Nonclinical data assets worth $800K annually. AI discovery increases utilization by 70%, adding $560K value to product development.'
                            },
                            {
                                type: 'catalog',
                                title: 'Product Catalog Investment',
                                content: 'Section 2.8 compliance catalog reduces regulatory delays by 40%. Estimated value: $2M saved in faster market entry.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Biomarker Asset Portfolio',
                                content: 'Clinical biomarker data valued at $1.2M. AI findability increases research productivity by 85%, adding $1M annual value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Clinical Discovery ROI',
                                content: 'Unified clinical catalog saves $300K annually in study startup costs. Faster biomarker discovery accelerates research timelines.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Population Data Monetization',
                                content: 'Surveillance data assets worth $600K annually. AI discovery enables 3x more health studies, generating $1.8M value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Epidemiological Investment',
                                content: 'Population health catalog reduces study planning by 60%. Value: $400K saved in faster public health insights.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Regulatory Portfolio Value',
                                content: 'Complete PMTA data portfolio worth $3.5M. AI findability reduces submission prep by 75%, saving $2.6M annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'FDA Submission ROI',
                                content: 'Comprehensive catalog accelerates submissions by 90 days. Faster approvals generate $5M+ in early market revenue.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Asset Visibility ROI',
                                content: 'Implementing AI discovery across 7 data sources could increase asset utilization by 60%. Projected value: $500K annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'Catalog Investment',
                                content: 'Unified metadata catalog reduces data discovery costs by $200K/year. Payback period: 6 months with current search volumes.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Product Metadata Validation',
                                content: 'AI suggests enriching product metadata with Section 2.8 nonclinical standards. Your expertise needed for product characterization accuracy.'
                            },
                            {
                                type: 'tagging',
                                title: 'Nonclinical Data Tagging',
                                content: 'AI can auto-tag product specification data with FDA categories (chemistry, toxicology, pharmacology). Expert validation needed: 94% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Biomarker Metadata Enhancement',
                                content: 'AI suggests enriching biomarker metadata with ICH bioanalytical guidelines. Your clinical expertise critical for accuracy validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Clinical Endpoint Tagging',
                                content: 'AI can classify biomarker data by endpoint type (exposure, effect, susceptibility). Clinical SME validation required: 91% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Epidemiological Metadata',
                                content: 'AI suggests enriching population data with WHO surveillance standards. Your public health expertise needed for study design validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Health Outcome Classification',
                                content: 'AI can categorize health outcomes by ICD-10 codes and severity. Epidemiological expert review needed: 89% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Cross-Section Validation',
                                content: 'AI suggests harmonizing metadata across Sections 2.7-2.10. Your regulatory expertise critical for FDA submission readiness.'
                            },
                            {
                                type: 'tagging',
                                title: 'PMTA Data Classification',
                                content: 'AI can tag data by PMTA section requirements (collection, tabulation, analysis, exchange). Regulatory SME validation needed: 96% confidence.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Metadata Enrichment',
                                content: 'AI suggests enriching product metadata with Section 2.8 standards. This improves findability for regulatory submissions.'
                            },
                            {
                                type: 'tagging',
                                title: 'Smart Tagging',
                                content: 'AI can auto-tag biomarker data with regulatory categories (FDA, ICH, ISO). Confidence: 96% based on content analysis.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'accessible') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Nonclinical Access Workflow',
                                content: 'AI automates product characterization data access with Section 2.8 compliance checks. Reduces access time from 5 days to 2 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Product Data Compliance',
                                content: 'Set up automated compliance monitoring for product specifications. AI tracks usage for FDA nonclinical audit readiness.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Clinical Data Access Control',
                                content: 'AI automates biomarker data access with GCP compliance checks. Reduces clinical data approval from 10 days to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Biomarker Data Governance',
                                content: 'Automated monitoring for clinical biomarker access ensures ICH guidelines compliance. AI tracks all research usage patterns.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Population Data Ethics',
                                content: 'AI automates surveillance data access with privacy compliance checks. Reduces IRB approval workflow from 3 weeks to 2 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'Public Health Data Tracking',
                                content: 'Automated monitoring for population health data ensures ethical research compliance. AI tracks all epidemiological usage.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Multi-Section Access Control',
                                content: 'AI orchestrates access across Sections 2.7-2.10 with comprehensive compliance. Reduces PMTA data prep from 3 weeks to 3 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'FDA Submission Tracking',
                                content: 'End-to-end compliance monitoring for complete regulatory submissions. AI ensures audit trail across all data sections.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Access Workflow Automation',
                                content: 'AI can automate 85% of data access requests with built-in compliance checks. Reduces approval time from 2 weeks to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Compliance Monitoring',
                                content: 'Set up automated FDA compliance monitoring for data access. AI tracks all data usage for audit readiness.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Product Data Access ROI',
                                content: 'Automated nonclinical access control saves $200K annually in compliance costs. Reduces product development security risks by 80%.'
                            },
                            {
                                type: 'audit',
                                title: 'Section 2.8 Audit Efficiency',
                                content: 'Automated product data tracking reduces FDA audit prep by 85%. Typical compliance review: 3 days vs 3 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Clinical Access ROI',
                                content: 'Automated biomarker access control saves $350K annually in GCP compliance. Reduces clinical trial security risks by 90%.'
                            },
                            {
                                type: 'audit',
                                title: 'Biomarker Audit Trail',
                                content: 'Automated clinical data tracking reduces regulatory audit prep by 90%. ICH compliance review: 2 days vs 4 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Population Data Ethics ROI',
                                content: 'Automated surveillance access saves $150K annually in IRB compliance costs. Reduces public health study risks by 85%.'
                            },
                            {
                                type: 'audit',
                                title: 'Epidemiological Audit',
                                content: 'Automated population health tracking reduces ethics audit prep by 80%. Privacy compliance review: 1 day vs 2 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'PMTA Access Management',
                                content: 'Comprehensive access control saves $500K annually across all regulatory sections. Reduces FDA submission risks by 95%.'
                            },
                            {
                                type: 'audit',
                                title: 'Multi-Section Audit Value',
                                content: 'Automated cross-section tracking reduces PMTA audit prep by 95%. Complete FDA review: 5 days vs 8 weeks manual.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Access Control ROI',
                                content: 'Implementing role-based access reduces security risks by 70% and saves 25 hours/week in manual approvals. Value: $300K/year.'
                            },
                            {
                                type: 'audit',
                                title: 'Audit Trail Investment',
                                content: 'Automated access tracking reduces compliance audit costs by 90%. Typical audit preparation: 2 days vs 3 weeks manual.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Product Access Guidelines',
                                content: 'AI suggests product characterization access rules based on FDA Section 2.8 guidelines. Your nonclinical expertise needed for protocol design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Product Data Protocols',
                                content: 'AI can draft tobacco product data access protocols aligned with nonclinical standards. Expert review needed for regulatory accuracy.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Clinical Access Design',
                                content: 'AI suggests biomarker access rules based on ICH GCP guidelines. Your clinical expertise critical for appropriate researcher permissions.'
                            },
                            {
                                type: 'protocols',
                                title: 'Biomarker Access Protocols',
                                content: 'AI can draft clinical biomarker access protocols aligned with Section 2.7 collection standards. Clinical SME validation required.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Population Ethics Framework',
                                content: 'AI suggests surveillance data access rules based on WHO privacy guidelines. Your epidemiological expertise needed for ethical design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Public Health Protocols',
                                content: 'AI can draft population health access protocols aligned with surveillance standards. Public health SME review required.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Cross-Section Access Design',
                                content: 'AI suggests comprehensive access rules spanning Sections 2.7-2.10. Your regulatory expertise critical for PMTA submission protocols.'
                            },
                            {
                                type: 'protocols',
                                title: 'FDA Submission Protocols',
                                content: 'AI can draft complete PMTA access protocols aligned with all regulatory sections. Regulatory SME validation essential.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Domain-Based Permissions',
                                content: 'AI suggests clinical data access rules based on ICH GCP guidelines. Ensures appropriate researcher access to biomarker studies.'
                            },
                            {
                                type: 'protocols',
                                title: 'Access Protocol Design',
                                content: 'AI can draft product-specific data access protocols aligned with Section 2.7 collection standards for your review.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'interoperable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Product Field Standardization',
                                content: 'AI identified 12 critical product field mappings for Section 2.8 compliance. Start with "PRODUCT_TYPE" ‚Üí "Product_Category" (97% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Nonclinical Data Harmonization',
                                content: 'Implementing AI-suggested product CDEs improves nonclinical data quality from 82% to 96%. Focus on chemistry and toxicology standards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Biomarker Field Mapping',
                                content: 'AI identified 18 biomarker field mappings for clinical compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Clinical Standards Alignment',
                                content: 'Implementing biomarker CDEs improves clinical data quality from 76% to 93%. Focus on exposure and effect biomarker standards.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Population Health Mapping',
                                content: 'AI identified 14 surveillance field mappings for epidemiological studies. Start with "AGE_GROUP" ‚Üí "Age_Category" (92% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Surveillance Standards',
                                content: 'Implementing population health CDEs improves surveillance data quality from 79% to 91%. Focus on demographic and outcome standards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Cross-Section Field Mapping',
                                content: 'AI identified 35 field mappings across Sections 2.7-2.10. Comprehensive PMTA standardization achieves 98% compliance readiness.'
                            },
                            {
                                type: 'standards',
                                title: 'FDA Standards Harmonization',
                                content: 'Implementing cross-section CDEs improves overall regulatory data quality from 85% to 97%. Complete PMTA standards alignment.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Field Mapping Priority',
                                content: 'AI identified 15 critical field mappings needed for tobacco regulatory compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Standards Harmonization',
                                content: 'Implementing AI-suggested CDE mappings improves data quality from 78% to 94%. Focus on Section 2.8-2.9 standards first.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Product Integration Savings',
                                content: 'AI nonclinical standardization reduces product development integration costs by 70%. Typical project: $150K vs $500K manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Product Data Reuse Value',
                                content: 'Standardized product data increases regulatory reuse by 400%. Each dataset now serves 5 submission types vs 1.2 previously.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Integration Cost Savings',
                                content: 'AI standardization reduces future integration costs by 60%. Typical project: $200K vs $500K for manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Data Reuse Value',
                                content: 'Standardized tobacco data increases reuse by 300%. Each dataset now serves 4 use cases vs 1.3 previously.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'Product CDE Validation',
                                content: 'AI detected "CHEMICAL_COMPOSITION" field requires expert validation for Section 2.8 CDE mapping. Chemistry expertise needed.'
                            },
                            {
                                type: 'terminology',
                                title: 'Product Terminology Standards',
                                content: 'AI suggests aligning "Tobacco_Type" with FDA product classification terminology. Your regulatory expertise needed for accuracy.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'CDE Validation Required',
                                content: 'AI detected "NNAL_CONC" field requires expert validation for CDE mapping. Please review against FDA biomarker guidance.'
                            },
                            {
                                type: 'terminology',
                                title: 'Terminology Standardization',
                                content: 'AI suggests aligning "Age_Verification" with ICH E6 Guidelines terminology. Your expertise needed for final validation.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'reusable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Product Data Quality Focus',
                                content: 'AI analysis shows 2 nonclinical files below 85% quality. Implement product specification cleansing to achieve 97% Section 2.8 readiness.'
                            },
                            {
                                type: 'governance',
                                title: 'Product Governance Policy',
                                content: 'AI suggests updating governance policies for tobacco product characterization quality rules. Draft Section 2.8 standards available.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Quality Score Improvement',
                                content: 'AI quality analysis shows 3 files below 80% quality threshold. Implement data cleansing workflow to achieve 95% target.'
                            },
                            {
                                type: 'governance',
                                title: 'Governance Policy Update',
                                content: 'AI suggests updating data governance policies to include tobacco-specific quality rules. Draft available for review.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Product Reuse ROI',
                                content: 'High-quality product data generates 6x ROI. Each $1 invested in nonclinical quality returns $6 in avoided regulatory rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Product Portfolio Value',
                                content: 'Nonclinical data portfolio valued at $2.1M with current quality. Reaching 97% Section 2.8 compliance increases value to $3.2M.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Reuse Multiplier Effect',
                                content: 'High-quality reusable data generates 5x ROI. Each $1 invested in quality improvement returns $5 in avoided rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Data Portfolio Value',
                                content: 'Your tobacco data portfolio valued at $3.2M with current quality scores. Reaching 95% quality increases value to $4.8M.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Product Definition Review',
                                content: 'AI drafted nonclinical definitions need expert review. Focus on "Chemical_Composition" definition for Section 2.8 regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Nonclinical Expert Validation',
                                content: 'AI confidence is 89% for "Toxicology_Endpoint" definition. Your chemistry expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Definition Enrichment Needed',
                                content: 'AI drafted business definitions need your expert review. Focus on "Exposure_Biomarker" definition for regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Expert Validation Request',
                                content: 'AI confidence is 87% for "Clinical_Endpoint" definition. Your domain expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    }
                }
            }
            
            // Display the updated suggestions
            displaySuggestions(suggestions);
        }

        function displaySuggestions(suggestions) {
            const panel = document.getElementById('ai-suggestions-panel');
            const container = document.getElementById('ai-suggestions');
            
            if (suggestions.length > 0) {
                container.innerHTML = suggestions.map(suggestion => `
                    <div class="bg-white p-4 rounded-lg border-l-4 border-${getColorByType(suggestion.type)}-400 shadow-sm">
                        <h4 class="font-bold text-${getColorByType(suggestion.type)}-800 text-sm mb-2">
                            ${getIconByType(suggestion.type)} ${suggestion.title}
                        </h4>
                        <p class="text-sm text-gray-700">${suggestion.content}</p>
                        <button class="mt-2 text-xs px-3 py-1 bg-${getColorByType(suggestion.type)}-100 text-${getColorByType(suggestion.type)}-700 rounded-full hover:bg-${getColorByType(suggestion.type)}-200">
                            Apply Suggestion
                        </button>
                    </div>
                `).join('');
                
                panel.style.display = 'block';
                
                // Update AI activity
                const persona = personas[currentPersona];
                const fairPrinciple = fairPrinciples[currentFAIR];
                setTimeout(() => {
                    updateAIActivity(`Generated ${suggestions.length} ${fairPrinciple.title} suggestions for ${persona.name}`);
                }, 500);
            } else {
                panel.style.display = 'none';
            }
        }

        function getColorByType(type) {
            const colors = {
                'access': 'green',
                'roi': 'blue', 
                'mapping': 'orange',
                'definition': 'purple',
                'quality': 'yellow',
                'compliance': 'red',
                'related': 'indigo',
                'discovery': 'blue',
                'indexing': 'cyan',
                'asset': 'green',
                'catalog': 'teal',
                'metadata': 'purple',
                'tagging': 'pink',
                'workflow': 'green',
                'access_control': 'emerald',
                'audit': 'slate',
                'permissions': 'lime',
                'protocols': 'sky',
                'standards': 'orange',
                'integration': 'amber',
                'reuse': 'violet',
                'cde_mapping': 'fuchsia',
                'terminology': 'rose',
                'governance': 'stone',
                'reuse_roi': 'blue',
                'portfolio': 'emerald',
                'definitions': 'purple',
                'validation': 'red'
            };
            return colors[type] || 'gray';
        }

        function getIconByType(type) {
            const icons = {
                'access': 'üîê',
                'roi': 'üí∞',
                'mapping': 'üîÑ',
                'definition': 'üìù',
                'quality': 'üìä',
                'compliance': 'üéØ',
                'related': 'üîç',
                'discovery': 'üîç',
                'indexing': 'üìë',
                'asset': 'üì¶',
                'catalog': 'üìö',
                'metadata': 'üè∑Ô∏è',
                'tagging': 'üè∑Ô∏è',
                'workflow': '‚ö°',
                'access_control': 'üîê',
                'audit': 'üìã',
                'permissions': 'üë•',
                'protocols': 'üìã',
                'standards': 'üìè',
                'integration': 'üîó',
                'reuse': '‚ôªÔ∏è',
                'cde_mapping': 'üó∫Ô∏è',
                'terminology': 'üìñ',
                'governance': '‚öñÔ∏è',
                'reuse_roi': 'üíé',
                'portfolio': 'üíº',
                'definitions': 'üìù',
                'validation': '‚úÖ'
            };
            return icons[type] || 'üí°';
        }

        // Global variables
        let useCases = [];
        let selectedUseCase = null;
        let currentGeneralStep = 1;

        // Tab Management
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active state from all tabs
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.remove('border-blue-500', 'text-blue-600');
                button.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active state to selected tab
            const activeTab = document.getElementById(tabName + '-tab');
            activeTab.classList.add('active', 'border-blue-500', 'text-blue-600');
            activeTab.classList.remove('border-transparent', 'text-gray-500');

            // Load tab-specific content
            if (tabName === 'use-cases') {
                loadUseCases();
            } else if (tabName === 'ai-assistant') {
                initializeAIAssistant();
            }
        }

        // Load use cases for Tab 2
        function loadUseCases() {
            fetch('/api/use-cases')
                .then(response => response.json())
                .then(data => {
                    useCases = data.use_cases; // Fix: access the use_cases property
                    displayUseCases(data.use_cases);
                })
                .catch(error => console.error('Error loading use cases:', error));
        }

        function displayUseCases(cases) {
            const grid = document.getElementById('use-cases-grid');
            grid.innerHTML = cases.map(useCase => `
                <div class="use-case-card bg-white rounded-lg shadow-lg p-6 border-2 border-transparent hover:border-blue-300" 
                     onclick="selectUseCase('${useCase.name}')">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">${useCase.icon}</div>
                        <h3 class="text-lg font-bold text-gray-800">${useCase.name}</h3>
                    </div>
                    <div class="space-y-2 text-sm text-gray-600">
                        <div class="flex justify-between">
                            <span>Assets:</span>
                            <span class="font-semibold text-blue-600">${useCase.assets}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>CDEs:</span>
                            <span class="font-semibold text-green-600">${useCase.cdes}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>FDA Section:</span>
                            <span class="font-semibold text-purple-600">${useCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-gray-50 rounded text-xs text-gray-500">
                        ${useCase.description}
                    </div>
                </div>
            `).join('');
        }

        function selectUseCase(useCaseName) {
            // Remove selection from all cards
            document.querySelectorAll('.use-case-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Find and select the clicked card
            const selectedCard = Array.from(document.querySelectorAll('.use-case-card'))
                .find(card => card.textContent.includes(useCaseName));
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            selectedUseCase = useCases.find(uc => uc.name === useCaseName);
            
            // Show use case details
            document.getElementById('selected-use-case-details').classList.remove('hidden');
            document.getElementById('selected-use-case-title').textContent = useCaseName + ' - Implementation Details';
            
            // Load use case specific data
            loadUseCaseDetails(selectedUseCase);
        }

        function loadUseCaseDetails(useCase) {
            // Create detailed data inventory based on use case
            let dataAssetsContent = '';
            let cdeContent = '';
            
            if (useCase.name === 'Product Description (Nonclinical)') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">3 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database<br>
                                    ‚Ä¢ Records: 2.3M records<br>
                                    ‚Ä¢ Tables: product_tests, batch_records, quality_metrics, composition_data<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. product_characterization_raw.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 45MB, 125,000 rows<br>
                                    ‚Ä¢ Fields: PROD_CHAR_ID, NIC_TOT, TAR_ANHY, CO_YLD, FILT_EFF, MOIST_CONT, PH_VAL<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 75%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Laboratory_LIMS_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SOAP API<br>
                                    ‚Ä¢ Endpoints: /test-results, /batch-tracking, /certifications, /equipment-calibration<br>
                                    ‚Ä¢ Response Time: < 500ms<br>
                                    ‚Ä¢ Owner: Quality Control<br>
                                    ‚Ä¢ Uptime: 99.5%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">12 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Tar_Content</div>
                                <div class="text-gray-600">Anhydrous tar yield measured under ISO conditions ‚Ä¢ DECIMAL(4,1)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Batch_Number</div>
                                <div class="text-gray-600">Unique manufacturing batch identifier ‚Ä¢ VARCHAR(12)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Quality_Score</div>
                                <div class="text-gray-600">Composite quality assessment score ‚Ä¢ DECIMAL(3,2)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 6 additional CDEs including Regulatory_Status, Carbon_Monoxide_Yield, Moisture_Content, pH_Value, Filter_Efficiency, Production_Facility_ID</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Product Impact on Individual Health') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">2 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Biomarker_Clinical_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: NoSQL Database<br>
                                    ‚Ä¢ Records: 850K documents<br>
                                    ‚Ä¢ Collections: biomarker_results, clinical_observations, adverse_events, subject_demographics<br>
                                    ‚Ä¢ Owner: Clinical Research Team<br>
                                    ‚Ä¢ Quality Score: 92%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. biomarker_exposure_data.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 28MB, 67,500 rows<br>
                                    ‚Ä¢ Fields: SUBJ_ID, COT_LEVEL, NNAL_CONC, AGE_VERIF, EXP_HIST, BMI_VAL, BP_SYS<br>
                                    ‚Ä¢ Owner: Clinical Research Team<br>
                                    ‚Ä¢ Quality Score: 82%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">9 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Subject_ID</div>
                                <div class="text-gray-600">Unique clinical study participant identifier ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Cotinine_Level</div>
                                <div class="text-gray-600">Biomarker for nicotine exposure measured in ng/mL ‚Ä¢ DECIMAL(8,2)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Clinical_Endpoint</div>
                                <div class="text-gray-600">Primary or secondary endpoint measured in clinical studies ‚Ä¢ VARCHAR(100)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Exposure_Biomarker</div>
                                <div class="text-gray-600">Biological indicators of product exposure ‚Ä¢ DECIMAL(10,3)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Study_Protocol_ID</div>
                                <div class="text-gray-600">Unique identifier for clinical study protocol ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Adverse_Event_Code</div>
                                <div class="text-gray-600">Standardized code for adverse events ‚Ä¢ VARCHAR(10)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 3 additional CDEs including Age_Verification, Blood_Pressure_Systolic, Body_Mass_Index</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Product Impact on Population Health') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">2 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Population_Surveillance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Data Warehouse<br>
                                    ‚Ä¢ Records: 12.5M records<br>
                                    ‚Ä¢ Datasets: population_surveys, health_outcomes, usage_patterns, demographic_profiles<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 89%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. surveillance_population_data.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 156MB, 425,000 rows<br>
                                    ‚Ä¢ Fields: SURV_ID, USE_PAT, HEALTH_OUT, DEMO_DATA, GEO_LOC, EDU_LEV<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 78%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">8 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Population_Demographics</div>
                                <div class="text-gray-600">Age, gender, and geographic distribution of use population ‚Ä¢ JSON</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Exposure_Biomarker</div>
                                <div class="text-gray-600">Biological indicators of product exposure in study populations ‚Ä¢ DECIMAL(10,3)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Age_Verification</div>
                                <div class="text-gray-600">Confirmed age verification status for product access ‚Ä¢ BOOLEAN</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Survey_ID</div>
                                <div class="text-gray-600">Unique identifier for population survey responses ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Health_Outcome</div>
                                <div class="text-gray-600">Measured health outcomes in population studies ‚Ä¢ VARCHAR(50)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 3 additional CDEs including Geographic_Location, Education_Level, Usage_Pattern</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Comprehensive Regulatory Compliance') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">4 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Regulatory_Compliance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Document Store<br>
                                    ‚Ä¢ Records: 45K documents<br>
                                    ‚Ä¢ Types: submission_packages, compliance_reports, audit_trails, regulatory_correspondence<br>
                                    ‚Ä¢ Owner: Regulatory Affairs<br>
                                    ‚Ä¢ Quality Score: 98%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. FDA_Submission_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: REST API<br>
                                    ‚Ä¢ Endpoints: /pmta, /mrtp, /compliance, /labeling, /adverse-events<br>
                                    ‚Ä¢ Response Time: < 200ms<br>
                                    ‚Ä¢ Owner: Regulatory IT<br>
                                    ‚Ä¢ Uptime: 99.8%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database (shared with Product Description)<br>
                                    ‚Ä¢ Focus: Regulatory compliance data views<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">4. Clinical_Data_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: GraphQL API<br>
                                    ‚Ä¢ Endpoints: /biomarkers, /adverse-events, /demographics, /exposure-data<br>
                                    ‚Ä¢ Response Time: < 300ms<br>
                                    ‚Ä¢ Owner: Clinical IT<br>
                                    ‚Ä¢ Uptime: 99.7%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">15 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Regulatory_Status</div>
                                <div class="text-gray-600">Current regulatory approval status for product ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Subject_ID</div>
                                <div class="text-gray-600">Unique clinical study participant identifier ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Adverse_Event_Code</div>
                                <div class="text-gray-600">Standardized code for adverse events following product exposure ‚Ä¢ VARCHAR(10)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Study_Protocol_ID</div>
                                <div class="text-gray-600">Unique identifier for clinical study protocol ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 8 additional CDEs including Cotinine_Level, Exposure_Biomarker, Age_Verification, Population_Demographics, Batch_Number, Quality_Score, Clinical_Endpoint, Tar_Content</div>
                        </div>
                    </div>
                `;
            }

            // Load data inventory for this use case
            document.getElementById('use-case-data-inventory').innerHTML = dataAssetsContent;

            // Load glossary/CDEs for this use case
            document.getElementById('use-case-glossary').innerHTML = cdeContent;

            // Load quality metrics
            document.getElementById('use-case-quality').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-purple-800">Quality Assessment</div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span>Completeness:</span>
                            <span class="text-green-600 font-semibold">94%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Accuracy:</span>
                            <span class="text-green-600 font-semibold">97%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Consistency:</span>
                            <span class="text-yellow-600 font-semibold">89%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>CDE Coverage:</span>
                            <span class="text-blue-600 font-semibold">${Math.round((useCase.cdes / 15) * 100)}%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Regulatory Readiness:</span>
                            <span class="text-green-600 font-semibold">98%</span>
                        </div>
                    </div>
                </div>
            `;

            // Load workflow
            document.getElementById('use-case-workflow').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-orange-800">Compliance Workflow</div>
                    <div class="text-xs space-y-2">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Data Collection ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Quality Check ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>CDE Mapping ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                            <span>FDA Submission (In Progress)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                            <span>Audit Trail Generation (Pending)</span>
                        </div>
                    </div>
                    <div class="mt-3 text-xs text-gray-600">
                        <strong>Next Steps:</strong> Regulatory review, final validation, submission package generation
                    </div>
                </div>
            `;
        }

        function runSelectedUseCaseProcess() {
            if (!selectedUseCase) {
                alert('Please select a use case first');
                return;
            }

            const resultsDiv = document.getElementById('selected-use-case-results');
            resultsDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h5 class="font-bold text-blue-800 mb-3">Running Governance Process for: ${selectedUseCase.name}</h5>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Discovered ${selectedUseCase.assets} data assets</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Identified ${selectedUseCase.cdes} high-priority CDEs</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated metadata catalog</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Applied quality rules</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated compliance report for ${selectedUseCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded text-sm">
                        <span class="font-semibold text-green-800">Success!</span> Governance process completed for ${selectedUseCase.name} with 94% confidence score.
                    </div>
                </div>
            `;
        }

        // General Process Flow Functions
        function startGeneralGovernanceProcess() {
            currentGeneralStep = 1;
            simulateGeneralProcess();
        }

        function simulateGeneralProcess() {
            const maxSteps = 5;
            const steps = ['Discover', 'Standardize', 'Define', 'Protect', 'Report'];
            
            if (currentGeneralStep <= maxSteps) {
                // Update step visualization
                for (let i = 1; i <= maxSteps; i++) {
                    const step = document.getElementById(`general-step-${i}`);
                    if (i < currentGeneralStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (i === currentGeneralStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                }

                // Show progress
                const resultsDiv = document.getElementById('general-process-results');
                const stepName = steps[currentGeneralStep - 1];
                resultsDiv.innerHTML = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                                ${currentGeneralStep}
                            </div>
                            <h4 class="font-bold text-blue-800">Step ${currentGeneralStep}: ${stepName}</h4>
                        </div>
                        <div class="text-sm text-blue-700">
                            ${getStepDescription(currentGeneralStep)}
                        </div>
                        <div class="mt-3">
                            <div class="bg-blue-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(currentGeneralStep/maxSteps)*100}%"></div>
                            </div>
                        </div>
                    </div>
                `;

                currentGeneralStep++;
                
                if (currentGeneralStep <= maxSteps) {
                    setTimeout(simulateGeneralProcess, 2000);
                } else {
                    showGeneralCompletionResults();
                }
            }
        }

        function getStepDescription(step) {
            const descriptions = {
                1: "üîç AI scanning 50+ data systems, identifying 127 related data fields...",
                2: "üìã Analyzing data standards, suggesting 44 high-priority CDEs with 94-96% confidence...", 
                3: "üìù Generating metadata definitions, extracting business knowledge from documents...",
                4: "üõ°Ô∏è Applying quality rules, setting up data governance controls...",
                5: "üìä Creating compliance reports for FDA Sections 2.7-2.10..."
            };
            return descriptions[step] || "";
        }

        function showGeneralCompletionResults() {
            const resultsDiv = document.getElementById('general-process-results');
            resultsDiv.innerHTML = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <h4 class="font-bold text-green-800 mb-4 text-xl">üéâ Complete Governance Process Finished!</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Assets Processed:</div>
                            <div>‚Ä¢ 11 total data assets discovered</div>
                            <div>‚Ä¢ 127 data fields cataloged</div>
                            <div>‚Ä¢ 44 CDEs identified</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Quality Metrics:</div>
                            <div>‚Ä¢ 91% overall quality score</div>
                            <div>‚Ä¢ 85% time reduction achieved</div>
                            <div>‚Ä¢ $2M+ annual ROI projected</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded">
                        <span class="font-semibold">Next Steps:</span> Review AI suggestions, validate CDEs with domain experts, proceed to FDA submission preparation.
                    </div>
                </div>
            `;
        }

        function resetGeneralProcess() {
            currentGeneralStep = 1;
            document.querySelectorAll('[id^="general-step-"]').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.getElementById('general-step-1').classList.add('active');
            document.getElementById('general-process-results').innerHTML = '';
        }

        // AI Assistant Functions (Tab 3)
        function initializeAIAssistant() {
            // Load initial AI suggestions
            loadAISmartSuggestions();
        }

        function aiSearchData() {
            const query = document.getElementById('ai-search-input').value;
            const useCase = document.getElementById('ai-use-case-filter').value;
            
            if (!query.trim()) {
                alert('Please enter a search query');
                return;
            }

            // Simulate AI search
            const resultsDiv = document.getElementById('ai-discovery-results');
            resultsDiv.innerHTML = `
                <div class="bg-white border rounded-lg p-4">
                    <h4 class="font-bold text-gray-800 mb-3">ü§ñ AI Search Results for: "${query}"</h4>
                    <div class="space-y-3">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <div class="font-semibold text-blue-700">Nicotine Content Database (DB001)</div>
                            <div class="text-sm text-gray-600">Location: Clinical Data Warehouse ‚Üí Product Characterization</div>
                            <div class="text-xs text-blue-600">Confidence: 96% | Use Case: Product Description</div>
                        </div>
                        <div class="border-l-4 border-green-500 pl-4">
                            <div class="font-semibold text-green-700">Biomarker Analysis Files (FILE002)</div>
                            <div class="text-sm text-gray-600">Location: Research Repository ‚Üí Individual Health Studies</div>
                            <div class="text-xs text-green-600">Confidence: 94% | Use Case: Individual Health Impact</div>
                        </div>
                    </div>
                </div>
            `;

            // Update location guide
            updateDataLocationGuide(query);
        }

        function updateDataLocationGuide(query) {
            const guideDiv = document.getElementById('data-location-guide');
            guideDiv.innerHTML = `
                <div class="space-y-2">
                    <div><strong>Primary Locations for "${query}":</strong></div>
                    <div>‚Ä¢ Clinical Data Warehouse ‚Üí Product Characterization section</div>
                    <div>‚Ä¢ Research Repository ‚Üí Health Impact studies</div>
                    <div>‚Ä¢ Regulatory Database ‚Üí FDA submission files</div>
                    <div class="mt-2 text-blue-600">üí° <strong>AI Tip:</strong> Most ${query} data is centralized in the Clinical Data Warehouse with backup copies in Research Repository.</div>
                </div>
            `;
        }

        function loadAISmartSuggestions() {
            const suggestionsDiv = document.getElementById('ai-smart-suggestions');
            const suggestions = [
                {
                    icon: "üéØ",
                    title: "Focus on Population Health Use Case",
                    description: "Based on current regulatory trends, prioritize Population Health compliance data.",
                    action: "View Use Case"
                },
                {
                    icon: "üìä", 
                    title: "Validate High-Priority CDEs",
                    description: "44 CDEs identified with >94% confidence. Review with domain experts.",
                    action: "Review CDEs"
                },
                {
                    icon: "üîç",
                    title: "Discover Missing Biomarker Data",
                    description: "AI detected potential gaps in biomarker data for FDA Section 2.8.",
                    action: "Search Data"
                }
            ];

            suggestionsDiv.innerHTML = suggestions.map(suggestion => `
                <div class="bg-white border border-purple-200 rounded-lg p-4 hover:shadow-md transition-all">
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">${suggestion.icon}</div>
                        <div class="flex-1">
                            <div class="font-semibold text-purple-800">${suggestion.title}</div>
                            <div class="text-sm text-gray-600 mt-1">${suggestion.description}</div>
                            <button class="mt-2 px-3 py-1 bg-purple-100 text-purple-700 rounded text-xs hover:bg-purple-200">
                                ${suggestion.action}
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Start with the first tab active
            switchTab('process');
        });
    </script>
</body>
</html> 