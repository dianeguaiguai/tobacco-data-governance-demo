<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Governance Agent - Life Sciences Industry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }
        .use-case-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .tobacco-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .product-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .use-case-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 10px;
        }

        .process-step:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .process-step.active .step-number {
            background-color: #3b82f6;
            color: white;
        }

        .process-step.completed .step-number {
            background-color: #10b981;
            color: white;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .step-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            line-height: 1.2;
        }

        .process-step.active .step-label {
            color: #3b82f6;
        }

        .process-step.completed .step-label {
            color: #10b981;
        }

        /* Tab Styling */
        .tab-button {
            transition: all 0.2s ease;
        }

        .tab-button.active {
            color: #3b82f6 !important;
            border-color: #3b82f6 !important;
        }

        .tab-content {
            min-height: 600px;
        }

        .tab-content.hidden {
            display: none;
        }

        /* Use Case Selection */
        .use-case-card.selected {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .role-btn {
            @apply bg-white border border-gray-200 rounded-lg p-4 text-center hover:border-blue-300 hover:shadow-md transition-all duration-200 cursor-pointer;
        }
        
        .active-role {
            @apply border-blue-500 bg-blue-50 shadow-lg;
        }
        
        .role-btn:hover {
            transform: translateY(-2px);
        }
        
        .active-role:hover {
            transform: none;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white p-6">
        <div class="container mx-auto">
            <h1 class="text-4xl font-bold mb-2">ü§ñ Data Governance Agent</h1>
            <p class="text-xl opacity-90">Intelligent assistant that adapts to your role, understands FAIR principles, and provides context-aware recommendations for data governance workflows</p>
            <div class="mt-4 text-sm opacity-80">
                Capabilities: Dynamic persona switching ‚Ä¢ Real-time FAIR guidance ‚Ä¢ Use case-specific insights ‚Ä¢ Automated compliance workflows ‚Ä¢ ROI quantification
            </div>
        </div>
    </header>

    <!-- AI Intelligence Panel -->
    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border-b">
        <div class="container mx-auto p-4">
            <div id="ai-status" class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium text-gray-700">AI Agent Active</span>
                    <span id="ai-activity" class="text-xs text-gray-500">Ready to assist with FAIR data governance</span>
                </div>
                <div id="impact-metrics" class="text-xs text-purple-600">
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-6">
        
        <!-- Three-Tab Interface -->
        <section class="mb-8">
            <div class="bg-white rounded-lg shadow-lg">
                <!-- Tab Navigation -->
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6" aria-label="Tabs">
                        <button onclick="switchTab('process')" id="process-tab" class="tab-button active py-4 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600">
                            <i class="fas fa-cogs mr-2"></i>Data Governance Policy to Implementation
                        </button>
                        <button onclick="switchTab('use-cases')" id="use-cases-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-th-large mr-2"></i>Governance Project
                        </button>
                        <button onclick="switchTab('ai-assistant')" id="ai-assistant-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-robot mr-2"></i>AI Assistant
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div class="p-6">
                    <!-- Tab 1: Data Governance Process (General) -->
                    <div id="process-content" class="tab-content">
                        <div class="space-y-12">
                            <!-- Component 1: Centralized, Standardized Metadata Management -->
                            <div class="bg-gradient-to-r from-red-50 to-green-50 rounded-lg p-6 border shadow-lg">
                                <h3 class="text-2xl font-bold mb-8 text-center text-gray-800">
                                    <i class="fas fa-sitemap mr-2"></i>Component 1: Centralized, Standardized Metadata Management - Before vs. After
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <!-- Before AI Agent -->
                                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500 shadow-md">
                                        <h4 class="font-bold text-red-800 mb-4 text-xl flex items-center">
                                            <i class="fas fa-exclamation-triangle mr-3 text-red-600"></i>‚ùå Before: Data Chaos & Inconsistency
                                        </h4>
                                        <ul class="space-y-3 text-sm text-red-700">
                                            <li class="flex items-start"><i class="fas fa-folder-open mr-2 mt-1 text-red-500"></i><div><strong>Scattered & Siloed Data:</strong><br><span class="text-red-600">Information fragmented across numerous, disconnected systems.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-question-circle mr-2 mt-1 text-red-500"></i><div><strong>Undefined & Inconsistent Metadata:</strong><br><span class="text-red-600">Lack of clear definitions, outdated documentation, varying standards.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-hand-paper mr-2 mt-1 text-red-500"></i><div><strong>Manual & Error-Prone Processes:</strong><br><span class="text-red-600">Heavy reliance on manual efforts for data discovery and quality checks.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-eye-slash mr-2 mt-1 text-red-500"></i><div><strong>Poor Data Lineage & Visibility:</strong><br><span class="text-red-600">Difficult to trace data origins and transformations.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-shield-alt mr-2 mt-1 text-red-500"></i><div><strong>Increased Compliance Risks:</strong><br><span class="text-red-600">Inability to consistently meet regulatory requirements.</span></div></li>
                                        </ul>
                                        <div class="mt-6 p-3 bg-red-100 rounded text-sm border border-red-200">
                                            <div class="flex items-center">
                                                <i class="fas fa-tachometer-alt mr-2 text-red-600"></i>
                                                <span class="font-semibold text-red-800">Impact: Slow, Costly, Risky</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- After AI Agent -->
                                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500 shadow-md">
                                        <h4 class="font-bold text-green-800 mb-4 text-xl flex items-center">
                                            <i class="fas fa-check-circle mr-3 text-green-600"></i>‚úÖ After: AI-Powered Data Clarity & Control
                                        </h4>
                                        <ul class="space-y-3 text-sm text-green-700">
                                            <li class="flex items-start"><i class="fas fa-database mr-2 mt-1 text-green-500"></i><div><strong>AI-Powered Data Hub (Single Source of Truth):</strong><br><span class="text-green-600">Centralized catalog with auto-discovered and classified data.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-book-open mr-2 mt-1 text-green-500"></i><div><strong>Standardized & Enriched Metadata:</strong><br><span class="text-green-600">AI suggests definitions, business glossary, and CDEs. Quality: <span class="font-bold">91% Score</span>.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-cogs mr-2 mt-1 text-green-500"></i><div><strong>Automated Data Lineage & Quality Rules:</strong><br><span class="text-green-600">Visual lineage tracing and AI-driven quality monitoring.</span></div></li>
                                            <li class="flex items-start"><i class="fas fa-search mr-2 mt-1 text-green-500"></i><div><strong>Enhanced Data Discovery & Accessibility:</strong><br><span class="text-green-600">Easily find and understand trusted data assets.</span></div></li>
                                             <li class="flex items-start"><i class="fas fa-lightbulb mr-2 mt-1 text-green-500"></i><div><strong>Proactive Compliance & Governance:</strong><br><span class="text-green-600">AI monitors policies, flags risks. Readiness: <span class="font-bold">98%</span>.</span></div></li>
                                        </ul>
                                        <div class="mt-6 p-3 bg-green-100 rounded text-sm border border-green-200">
                                            <div class="flex items-center">
                                                <i class="fas fa-rocket mr-2 text-green-600"></i>
                                                <span class="font-semibold text-green-800">Impact: Efficient, Valuable, Compliant</span>
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            <!-- Component 2: AI-Powered 5-Step Lifecycle -->
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border shadow-lg">
                                <h3 class="text-2xl font-bold mb-8 text-center text-gray-800">
                                    <i class="fas fa-project-diagram mr-2"></i>Component 2: AI-Powered 5-Step Lifecycle
                                </h3>
                                <!-- New Descriptive Content for Component 2 -->
                                <div class="mb-8 space-y-6 text-left text-sm text-gray-700">
                                    <p class="text-base text-gray-800 leading-relaxed">
                                        Our AI-Powered 5-Step Lifecycle provides a structured, iterative approach to transform raw data into governed, valuable, and FAIR-compliant assets. Each step is supercharged by AI to enhance efficiency, accuracy, and insight, ensuring data governance policies are practically implemented and their impact is measurable.
                                    </p>

                                    <div class="p-4 bg-white rounded-lg shadow border border-gray-200">
                                        <h4 class="font-semibold text-lg text-blue-700 mb-2 flex items-center"><i class="fas fa-search mr-2"></i>1. Discover</h4>
                                        <p class="mb-1"><strong>About:</strong> Automatically identify, profile, and inventory data assets across disparate sources. AI helps in understanding data landscapes, detecting sensitive data, and assessing initial quality.</p>
                                        <p class="mb-1"><strong>Key Personas:</strong> Data Stewards, Data Architects, System Owners.</p>
                                        <p><strong>Key Deliverables:</strong> Comprehensive Data Asset Inventory, Data Lineage Maps (initial), Data Quality Baseline Report, Sensitive Data Identification.</p>
                                    </div>
                                    <div class="p-4 bg-white rounded-lg shadow border border-gray-200">
                                        <h4 class="font-semibold text-lg text-green-700 mb-2 flex items-center"><i class="fas fa-tags mr-2"></i>2. Define</h4>
                                        <p class="mb-1"><strong>About:</strong> Establish clear, consistent business and technical metadata. AI assists in suggesting definitions, linking terms to a business glossary, and identifying Critical Data Elements (CDEs).</p>
                                        <p class="mb-1"><strong>Key Personas:</strong> Data Stewards, Business SMEs, Data Owners.</p>
                                        <p><strong>Key Deliverables:</strong> Approved Business Glossary, Standardized Data Definitions, Critical Data Element (CDE) Register, Metadata Repository.</p>
                                    </div>
                                    <div class="p-4 bg-white rounded-lg shadow border border-gray-200">
                                        <h4 class="font-semibold text-lg text-purple-700 mb-2 flex items-center"><i class="fas fa-sync-alt mr-2"></i>3. Standardize</h4>
                                        <p class="mb-1"><strong>About:</strong> Harmonize data formats, values, and structures to ensure interoperability and consistency. AI aids in identifying mapping rules, suggesting transformations, and aligning data to industry/internal standards.</p>
                                        <p class="mb-1"><strong>Key Personas:</strong> Data Stewards, Data Architects, Integration Specialists.</p>
                                        <p><strong>Key Deliverables:</strong> Data Standardization Rules, Transformation Logic, Harmonized Data Models, CDE Implementation Guidelines.</p>
                                    </div>
                                    <div class="p-4 bg-white rounded-lg shadow border border-gray-200">
                                        <h4 class="font-semibold text-lg text-red-700 mb-2 flex items-center"><i class="fas fa-shield-alt mr-2"></i>4. Protect</h4>
                                        <p class="mb-1"><strong>About:</strong> Implement data quality rules, security policies, and access controls to ensure data integrity, compliance, and appropriate usage. AI powers automated quality monitoring, anomaly detection, and policy enforcement.</p>
                                        <p class="mb-1"><strong>Key Personas:</strong> Data Stewards, Data Owners, Security Officers, Compliance Officers.</p>
                                        <p><strong>Key Deliverables:</strong> Data Quality Rulebook & Monitoring Dashboard, Access Control Policies Implemented, Security & Compliance Framework, Data Masking/Anonymization Rules.</p>
                                    </div>
                                    <div class="p-4 bg-white rounded-lg shadow border border-gray-200">
                                        <h4 class="font-semibold text-lg text-indigo-700 mb-2 flex items-center"><i class="fas fa-chart-line mr-2"></i>5. Govern & Optimize</h4>
                                        <p class="mb-1"><strong>About:</strong> Continuously monitor data governance effectiveness, measure its impact, and optimize processes. AI provides insights for continuous improvement, automates reporting, and helps quantify the value of governed data.</p>
                                        <p class="mb-1"><strong>Key Personas:</strong> Data Governance Council, Data Owners, Business Leaders.</p>
                                        <p><strong>Key Deliverables:</strong> Data Governance KPIs & Dashboards, ROI & Impact Analysis, Process Optimization Recommendations, Audit Trails & Compliance Reports.</p>
                                    </div>
                                </div>
                                <div id="process-steps-container" class="flex justify-between items-start space-x-4 mb-6 overflow-x-auto pb-4">
                                    <!-- Steps will be dynamically injected here by JavaScript -->
                                    <!-- Example of how a step might look with AI icon: -->
                                    <!-- 
                                    <div class="process-step flex-1 min-w-[120px]" data-step="discover">
                                        <div class="step-number"><i class="fas fa-search"></i></div>
                                        <div class="step-label">Discover <span class="text-xs text-blue-500 block">(<i class="fas fa-robot text-xs"></i> AI Auto-Discovery)</span></div>
                                    </div>
                                    -->
                                </div>
                                <div class="text-center text-sm text-gray-600">
                                    <p>This iterative process, supercharged by AI at each stage, transforms raw data into governed, valuable assets.</p>
                                </div>
                            </div>

                            <!-- Grid for Components 3, 4, 5 -->
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

                                <!-- Component 3: Clear Roles & Responsibilities -->
                                <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                                    <h3 class="text-xl font-semibold mb-4 text-gray-700 flex items-center">
                                        <i class="fas fa-users-cog mr-2 text-indigo-500"></i>Component 3: Clear Roles & Accountability
                                </h3>
                                    <div class="border p-4 rounded-md bg-indigo-50">
                                        <ul class="space-y-2 text-sm text-indigo-700">
                                            <li class="flex items-center"><i class="fas fa-user-shield mr-2"></i>Defined Data Stewards & Owners</li>
                                            <li class="flex items-center"><i class="fas fa-tasks mr-2"></i>Automated Workflow Handoffs</li>
                                            <li class="flex items-center"><i class="fas fa-check-double mr-2"></i>RACI Aligned for Clarity</li>
                                            <li class="flex items-center"><i class="fas fa-comments mr-2"></i>AI-Assisted Stakeholder Engagement</li>
                                        </ul>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-3">Ensuring everyone knows their part in maintaining data integrity.</p>
                                </div>

                                <!-- Component 4: Value-Driven & Compliance-Focused -->
                                <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                                    <h3 class="text-xl font-semibold mb-4 text-gray-700 flex items-center">
                                        <i class="fas fa-balance-scale mr-2 text-teal-500"></i>Component 4: Value-Driven & Compliance
                                    </h3>
                                    <div class="space-y-4">
                                        <div class="border p-4 rounded-md bg-teal-50">
                                            <h4 class="font-semibold text-md text-teal-800 mb-2 flex items-center"><i class="fas fa-chart-line mr-2"></i>Value Delivered</h4>
                                            <ul class="space-y-1 text-sm text-teal-700">
                                                <li><span class="font-bold">$2M+</span> Annual ROI</li>
                                                <li><span class="font-bold">85%</span> Time Reduction in Data Prep</li>
                                                <li><span class="font-bold">91%</span> Overall Data Quality Score</li>
                                            </ul>
                                        </div>
                                        <div class="border p-4 rounded-md bg-cyan-50">
                                            <h4 class="font-semibold text-md text-cyan-800 mb-2 flex items-center"><i class="fas fa-gavel mr-2"></i>Life Sciences Focused & Compliance Ready</h4>
                                            <ul class="space-y-1 text-sm text-cyan-700">
                                                <li><i class="fas fa-microscope mr-1"></i>Adherence to FDA, GxP Standards</li>
                                                <li><i class="far fa-file-alt mr-1"></i>21 CFR Part 11 Considerations</li>
                                                <li><span class="font-bold">98%</span> Regulatory Compliance Readiness</li>
                                            </ul>
                                        </div>
                                        </div>
                                    <p class="text-xs text-gray-500 mt-3">Tangible benefits and assured regulatory alignment for Life Sciences.</p>
                                        </div>

                                <!-- Component 5: Operationalized FAIR Principles -->
                                <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                                    <h3 class="text-xl font-semibold mb-4 text-gray-700 flex items-center">
                                        <i class="fas fa-puzzle-piece mr-2 text-amber-500"></i>Component 5: Operationalized FAIR Principles
                                    </h3>
                                    <div class="border p-4 rounded-md bg-amber-50 text-center">
                                        <div class="flex justify-around items-center mb-3">
                                            <div class="text-center">
                                                <i class="fas fa-search fa-2x text-amber-600"></i>
                                                <p class="text-sm font-semibold text-amber-700 mt-1">Findable</p>
                                        </div>
                                            <div class="text-center">
                                                <i class="fas fa-key fa-2x text-amber-600"></i>
                                                <p class="text-sm font-semibold text-amber-700 mt-1">Accessible</p>
                                    </div>
                                            <div class="text-center">
                                                <i class="fas fa-cogs fa-2x text-amber-600"></i> 
                                                <p class="text-sm font-semibold text-amber-700 mt-1">Interoperable</p>
                                            </div>
                                            <div class="text-center">
                                                <i class="fas fa-recycle fa-2x text-amber-600"></i>
                                                <p class="text-sm font-semibold text-amber-700 mt-1">Reusable</p>
                                            </div>
                                        </div>
                                        <p class="text-sm text-amber-800 font-medium">Unlocking Data's Full Potential through AI-driven FAIRification.</p>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-3">Making data discoverable, usable, and valuable across the enterprise.</p>
                                </div>

                                </div>

                            <!-- Key Metrics (Original location - consider if still needed here or if integrated above is sufficient) -->
                            <!-- This section might be redundant if metrics are well-integrated into Component 1 & 4 -->
                            <!-- 
                                <div class="grid grid-cols-4 gap-4 mt-8 text-center">
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-blue-600">85%</div>
                                        <div class="text-sm text-gray-600">Time Reduction</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-green-600">91%</div>
                                        <div class="text-sm text-gray-600">Quality Score</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-purple-600">48</div>
                                        <div class="text-sm text-gray-600">AI Contexts</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-orange-600">$2M+</div>
                                        <div class="text-sm text-gray-600">Annual ROI</div>
                                    </div>
                            </div>
                            -->
                                </div>
                            </div>

                    <!-- Tab 2: Governance Project -->
                    <div id="use-cases-content" class="tab-content hidden">
                        <div class="space-y-8">
                            <!-- Use Cases Overview -->
                            <div>
                                        <h3 class="text-2xl font-bold mb-6 text-gray-800">üéØ Data Governance Use Cases</h3>
                                <div id="use-cases-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <!-- Use cases will be loaded here -->
                                </div>
                            </div>

                            <!-- Selected Use Case Details -->
                            <div id="selected-use-case-details" class="hidden">
                                <h3 class="text-2xl font-bold mb-6 text-gray-800" id="selected-use-case-title">Use Case Implementation</h3>
                                
                                <!-- Enhanced Interactive Implementation Interface for Individual Health -->
                                <div id="individual-health-detailed-interface" class="hidden bg-white rounded-lg shadow-lg border p-6 mb-6">
                                    <h4 class="text-xl font-bold mb-6 text-blue-800">
                                        <i class="fas fa-heartbeat mr-2"></i>AI-Powered 5-Step Lifecycle: Product Impact on Individual Health
                                    </h4>
                                    
                                    <!-- TIG Section Progress Tracker -->
                                    <div class="mb-6 bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg border border-indigo-200">
                                        <h5 class="font-semibold text-indigo-800 mb-3">üìã TIG Section 3.3 Implementation Progress</h5>
                                        <div class="grid grid-cols-2 lg:grid-cols-6 gap-2 text-xs">
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.1</div>
                                                <div class="text-gray-600">Trial Design</div>
                                                <div class="text-green-600 text-xs">‚úì Complete</div>
                                        </div>
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.2</div>
                                                <div class="text-gray-600">Routine Data</div>
                                                <div class="text-green-600 text-xs">‚úì Complete</div>
                                        </div>
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.3</div>
                                                <div class="text-gray-600">Assessments</div>
                                                <div class="text-blue-600 text-xs">üîÑ Current</div>
                                        </div>
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.4</div>
                                                <div class="text-gray-600">Exposure</div>
                                                <div class="text-gray-400 text-xs">‚è≥ Pending</div>
                                        </div>
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.5</div>
                                                <div class="text-gray-600">QRS</div>
                                                <div class="text-gray-400 text-xs">‚è≥ Pending</div>
                                            </div>
                                            <div class="bg-white p-2 rounded border text-center">
                                                <div class="font-semibold text-indigo-700">3.3.6</div>
                                                <div class="text-gray-600">ADaM</div>
                                                <div class="text-gray-400 text-xs">‚è≥ Pending</div>
                                        </div>
                                    </div>
                                </div>

                                    <!-- 5-Step Lifecycle Navigation -->
                                    <div class="flex justify-center mb-6">
                                        <div class="flex space-x-2">
                                            <button onclick="showDetailedStep(1)" id="detailed-step-1" class="detailed-step-btn active px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold">
                                                Step 1: Discover
                                    </button>
                                            <button onclick="showDetailedStep(2)" id="detailed-step-2" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                Step 2: Define  
                                            </button>
                                            <button onclick="showDetailedStep(3)" id="detailed-step-3" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                Step 3: Standardize
                                            </button>
                                            <button onclick="showDetailedStep(4)" id="detailed-step-4" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                Step 4: Protect
                                            </button>
                                            <button onclick="showDetailedStep(5)" id="detailed-step-5" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                Step 5: Govern & Optimize
                                    </button>
                                        </div>
                                </div>

                                    <!-- Step 1: Discover - TIG Sections 3.3.1 & 3.3.2 -->
                                    <div id="detailed-step-content-1" class="detailed-step-content">
                                        <div class="bg-blue-50 rounded-lg p-4 border border-blue-200 mb-4">
                                            <h5 class="font-bold text-blue-800 mb-3">
                                                <i class="fas fa-search mr-2"></i>Step 1: Discover - AI-Powered Clinical Data Discovery (FINDABLE)
                                            </h5>
                                            <p class="text-sm text-blue-700 mb-4">AI automatically scans and catalogs clinical data assets, making them easily discoverable through rich metadata and intelligent indexing.</p>
                            </div>

                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <!-- TIG 3.3.1: Trial Design Discovery -->
                                            <div class="bg-white rounded-lg p-4 border border-indigo-200">
                                                <h6 class="font-bold text-indigo-800 mb-3">üìã TIG 3.3.1: Trial Design Discovery</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-indigo-50 p-3 rounded">
                                                        <div class="font-semibold text-indigo-700 mb-1">AI-Discovered SDTM Domains:</div>
                                                        <div class="grid grid-cols-3 gap-2 text-xs">
                                                            <div class="bg-white p-1 rounded text-center font-medium">TV</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">TA</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">TE</div>
                                                        </div>
                                                        <div class="text-indigo-600 mt-2 text-xs">
                                                            ‚Ä¢ Visit schedules & timelines cataloged<br>
                                                            ‚Ä¢ Trial arms automatically mapped<br>
                                                            ‚Ä¢ Study elements & epochs indexed
                                                        </div>
                                                    </div>
                                                    <div class="bg-green-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-green-700">FAIR Impact:</span> Trial design now searchable by study phase, arm type, and visit pattern across all clinical databases.
                                                    </div>
                        </div>
                    </div>

                                            <!-- TIG 3.3.2: Routinely-collected Data Discovery -->
                                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                                <h6 class="font-bold text-green-800 mb-3">üè• TIG 3.3.2: Core Baseline & Safety Data Discovery</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-green-50 p-3 rounded">
                                                        <div class="font-semibold text-green-700 mb-1">AI-Cataloged Safety Domains (12 found):</div>
                                                        <div class="grid grid-cols-4 gap-1 text-xs">
                                                            <div class="bg-white p-1 rounded text-center font-medium">DM</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">SC</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">AE</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">VS</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">EG</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">LB</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">MH</div>
                                                            <div class="bg-white p-1 rounded text-center font-medium">CM</div>
                                                        </div>
                                                        <div class="text-green-600 mt-2 text-xs">
                                                            ‚Ä¢ 2,847 subjects indexed across demographics<br>
                                                            ‚Ä¢ 68,923 lab tests cataloged with reference ranges<br>
                                                            ‚Ä¢ 1,247 adverse events linked to terminology
                                                        </div>
                                                    </div>
                                                    <div class="bg-blue-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-blue-700">FAIR Impact:</span> All baseline safety data now discoverable through standardized variable names, units, and clinical significance codes.
                                                    </div>
                                                </div>
                                </div>
                            </div>

                                        <!-- Real-time Discovery Results -->
                                        <div class="mt-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200">
                                            <h6 class="font-bold text-purple-800 mb-3">üìä Real-time Discovery Results</h6>
                                            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center text-sm">
                                                <div class="bg-white p-3 rounded">
                                                    <div class="text-2xl font-bold text-blue-600">15</div>
                                                    <div class="text-xs text-gray-600">SDTM Domains Found</div>
                                                </div>
                                                <div class="bg-white p-3 rounded">
                                                    <div class="text-2xl font-bold text-green-600">347</div>
                                                    <div class="text-xs text-gray-600">Clinical Variables</div>
                                                </div>
                                                <div class="bg-white p-3 rounded">
                                                    <div class="text-2xl font-bold text-purple-600">98%</div>
                                                    <div class="text-xs text-gray-600">Metadata Coverage</div>
                                                </div>
                                                <div class="bg-white p-3 rounded">
                                                    <div class="text-2xl font-bold text-orange-600">4.2s</div>
                                                    <div class="text-xs text-gray-600">Discovery Time</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 2: Define - TIG Section 3.3.3 -->
                                    <div id="detailed-step-content-2" class="detailed-step-content hidden">
                                        <div class="bg-green-50 rounded-lg p-4 border border-green-200 mb-4">
                                            <h5 class="font-bold text-green-800 mb-3">
                                                <i class="fas fa-tags mr-2"></i>Step 2: Define - AI-Enhanced Clinical Metadata Definition (REUSABLE)
                                            </h5>
                                            <p class="text-sm text-green-700 mb-4">AI suggests standardized definitions and business glossary terms based on regulatory guidelines, making clinical data reusable across studies.</p>
                                        </div>

                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <!-- TIG 3.3.3: Assessments of Interest -->
                                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                                <h6 class="font-bold text-purple-800 mb-3">üß™ TIG 3.3.3: Specialized Tobacco Research Endpoints</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-purple-50 p-3 rounded">
                                                        <div class="font-semibold text-purple-700 mb-2">AI-Defined Biomarker CDEs:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-purple-700">Cotinine_Level (PC)</div>
                                                                <div class="text-gray-600">Definition: Nicotine metabolite concentration (ng/mL)<br>
                                                                Standard: ICH bioanalytical guidelines<br>
                                                                Range: 0.1-500.0 ng/mL</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-purple-700">NNAL_Concentration (PC)</div>
                                                                <div class="text-gray-600">Definition: TSN exposure biomarker (pmol/mL)<br>
                                                                Standard: FDA guidance<br>
                                                                Range: 0.05-50.0 pmol/mL</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-teal-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-teal-700">FAIR Impact:</span> Biomarker definitions now standardized with units, methods, and clinical significance, enabling cross-study reuse.
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Business Glossary Integration -->
                                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                                <h6 class="font-bold text-amber-800 mb-3">üìñ Clinical Business Glossary Integration</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-amber-50 p-3 rounded">
                                                        <div class="font-semibold text-amber-700 mb-2">AI-Linked Regulatory Standards:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-amber-700">ICH E6 (GCP)</div>
                                                                <div class="text-gray-600">Good Clinical Practice guidelines for biomarker validation</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-amber-700">FDA Bioanalytical</div>
                                                                <div class="text-gray-600">Method validation guidance for exposure biomarkers</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-amber-700">CDISC SDTM</div>
                                                                <div class="text-gray-600">Standard variable naming conventions</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-green-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-green-700">FAIR Impact:</span> All clinical terms linked to authoritative sources, ensuring consistent interpretation across research teams.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Standardize - TIG Sections 3.3.4 & 3.3.5 -->
                                    <div id="detailed-step-content-3" class="detailed-step-content hidden">
                                        <div class="bg-purple-50 rounded-lg p-4 border border-purple-200 mb-4">
                                            <h5 class="font-bold text-purple-800 mb-3">
                                                <i class="fas fa-sync-alt mr-2"></i>Step 3: Standardize - AI-Driven Harmonization (INTEROPERABLE)
                                            </h5>
                                            <p class="text-sm text-purple-700 mb-4">AI maps and transforms data to common standards, enabling seamless integration across clinical systems and studies.</p>
                                        </div>

                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <!-- TIG 3.3.4: Exposure Assessments -->
                                            <div class="bg-white rounded-lg p-4 border border-indigo-200">
                                                <h6 class="font-bold text-indigo-800 mb-3">üí® TIG 3.3.4: Product Exposure Standardization</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-indigo-50 p-3 rounded">
                                                        <div class="font-semibold text-indigo-700 mb-2">AI-Standardized EX Domain:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">EXDOSE ‚Üí Standard Units</div>
                                                                <div class="text-gray-600">Original: "2 puffs/day" ‚Üí Standard: "2.0 PUFFS/DAY"</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">Puff Topography Mapping</div>
                                                                <div class="text-gray-600">Volume (mL) ‚Üí PUFFVOL, Duration (sec) ‚Üí PUFFDUR</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-blue-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-blue-700">FAIR Impact:</span> Exposure data harmonized across devices and studies, enabling pooled analysis and meta-studies.
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- TIG 3.3.5: QRS Instruments -->
                                            <div class="bg-white rounded-lg p-4 border border-teal-200">
                                                <h6 class="font-bold text-teal-800 mb-3">üß† TIG 3.3.5: Behavioral Assessment Standardization</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-teal-50 p-3 rounded">
                                                        <div class="font-semibold text-teal-700 mb-2">AI-Mapped QS Instruments:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">FTND Scale</div>
                                                                <div class="text-gray-600">Fagerstr√∂m Test ‚Üí QSCAT="NICOTINE DEPENDENCE"</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">QSU-Brief</div>
                                                                <div class="text-gray-600">Craving scores ‚Üí QSTESTCD="QSU001-QSU010"</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-purple-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-purple-700">FAIR Impact:</span> Behavioral assessments standardized with ISO-8601 timestamps and validated scoring algorithms.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 4: Protect - Quality & Security -->
                                    <div id="detailed-step-content-4" class="detailed-step-content hidden">
                                        <div class="bg-red-50 rounded-lg p-4 border border-red-200 mb-4">
                                            <h5 class="font-bold text-red-800 mb-3">
                                                <i class="fas fa-shield-alt mr-2"></i>Step 4: Protect - AI-Powered Quality & Security (ACCESSIBLE)
                                            </h5>
                                            <p class="text-sm text-red-700 mb-4">AI implements quality rules and access controls, ensuring data is accessible under proper conditions with maintained integrity.</p>
                                        </div>

                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <!-- Quality Monitoring -->
                                            <div class="bg-white rounded-lg p-4 border border-red-200">
                                                <h6 class="font-bold text-red-800 mb-3">üìä AI-Powered Quality Monitoring</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-red-50 p-3 rounded">
                                                        <div class="font-semibold text-red-700 mb-2">Clinical Data Quality Rules:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">Biomarker Range Checks</div>
                                                                <div class="text-gray-600">Cotinine: 0.1-500.0 ng/mL (99.2% pass rate)</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">Subject ID Validation</div>
                                                                <div class="text-gray-600">Format: [STUDY]_[SITE]_[SUBJ] (100% compliance)</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-green-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-green-700">Quality Score: 96.8%</span> - Exceeds FDA expectations for clinical data integrity
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Access Control -->
                                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                                <h6 class="font-bold text-orange-800 mb-3">üîê Intelligent Access Control</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-orange-50 p-3 rounded">
                                                        <div class="font-semibold text-orange-700 mb-2">Role-Based Data Access:</div>
                                                        <div class="space-y-2 text-xs">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">Clinical Researchers</div>
                                                                <div class="text-gray-600">Access: De-identified biomarker data only</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold">Principal Investigators</div>
                                                                <div class="text-gray-600">Access: Full dataset with audit trail</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="bg-blue-50 p-2 rounded text-xs">
                                                        <span class="font-semibold text-blue-700">FAIR Impact:</span> Clinical data accessible to authorized users through standardized APIs with comprehensive audit logging.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 5: Govern & Optimize - TIG Section 3.3.6 -->
                                    <div id="detailed-step-content-5" class="detailed-step-content hidden">
                                        <div class="bg-indigo-50 rounded-lg p-4 border border-indigo-200 mb-4">
                                            <h5 class="font-bold text-indigo-800 mb-3">
                                                <i class="fas fa-chart-line mr-2"></i>Step 5: Govern & Optimize - Governance Monitoring & Optimization (FAIR-Complete)
                                            </h5>
                                            <p class="text-sm text-indigo-700 mb-4">Continuously monitor data governance effectiveness, measure its impact, and optimize processes. AI provides insights for continuous improvement, automates reporting, and helps quantify the value of governed data.</p>
                                        </div>

                                        <!-- TIG 3.3.6: Analysis Datasets -->
                                        <div class="bg-white rounded-lg p-4 border border-indigo-200 mb-6">
                                            <h6 class="font-bold text-indigo-800 mb-3">üìä TIG 3.3.6: Governance Monitoring & Analytics</h6>
                                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 text-sm">
                                                <div class="bg-indigo-50 p-3 rounded">
                                                    <div class="font-semibold text-indigo-700 mb-2">Data Quality Monitoring:</div>
                                                    <div class="text-xs space-y-1">
                                                        <div>‚Ä¢ Automated completeness checks</div>
                                                        <div>‚Ä¢ CDISC compliance validation</div>
                                                        <div>‚Ä¢ Real-time anomaly detection</div>
                                                        <div>‚Ä¢ 2,847 subjects continuously monitored</div>
                                                    </div>
                                                </div>
                                                <div class="bg-green-50 p-3 rounded">
                                                    <div class="font-semibold text-green-700 mb-2">Process Optimization:</div>
                                                    <div class="text-xs space-y-1">
                                                        <div>‚Ä¢ Workflow efficiency tracking</div>
                                                        <div>‚Ä¢ Cost/benefit analysis</div>
                                                        <div>‚Ä¢ Bottleneck identification</div>
                                                        <div>‚Ä¢ 15,432 process improvements identified</div>
                                                    </div>
                                                </div>
                                                <div class="bg-purple-50 p-3 rounded">
                                                    <div class="font-semibold text-purple-700 mb-2">Governance Effectiveness:</div>
                                                    <div class="text-xs space-y-1">
                                                        <div>‚Ä¢ Policy adherence tracking</div>
                                                        <div>‚Ä¢ Risk assessment automation</div>
                                                        <div>‚Ä¢ Compliance reporting</div>
                                                        <div>‚Ä¢ 1,247 governance events tracked</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Governance KPIs & FAIR Metrics -->
                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                                <h6 class="font-bold text-green-800 mb-3">üìà Data Governance KPIs</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="bg-green-50 p-3 rounded text-center">
                                                            <div class="text-xl font-bold text-green-600">98.7%</div>
                                                            <div class="text-xs text-gray-600">CDISC Compliance</div>
                                                        </div>
                                                        <div class="bg-blue-50 p-3 rounded text-center">
                                                            <div class="text-xl font-bold text-blue-600">96.8%</div>
                                                            <div class="text-xs text-gray-600">Data Quality Score</div>
                                                        </div>
                                                        <div class="bg-purple-50 p-3 rounded text-center">
                                                            <div class="text-xl font-bold text-purple-600">14 days</div>
                                                            <div class="text-xs text-gray-600">Submission Prep Time</div>
                                                        </div>
                                                        <div class="bg-orange-50 p-3 rounded text-center">
                                                            <div class="text-xl font-bold text-orange-600">$850K</div>
                                                            <div class="text-xs text-gray-600">Annual Cost Savings</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                                <h6 class="font-bold text-amber-800 mb-3">üåü FAIR Principles Achievement</h6>
                                                <div class="space-y-3 text-sm">
                                                    <div class="bg-amber-50 p-3 rounded">
                                                        <div class="grid grid-cols-2 gap-2 text-xs">
                                                            <div class="bg-white p-2 rounded text-center">
                                                                <div class="font-semibold text-blue-600">F</div>
                                                                <div class="text-gray-600">98% Indexed</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded text-center">
                                                                <div class="font-semibold text-green-600">A</div>
                                                                <div class="text-gray-600">99% Uptime</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded text-center">
                                                                <div class="font-semibold text-orange-600">I</div>
                                                                <div class="text-gray-600">95% CDISC</div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded text-center">
                                                                <div class="font-semibold text-purple-600">R</div>
                                                                <div class="text-gray-600">87% Reused</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="text-xs text-amber-700 text-center">
                                                        Clinical data now fully FAIR-compliant and regulatory-ready
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Tab 3: AI Assistant -->
                    <div id="ai-assistant-content" class="tab-content hidden">
                        <!-- Component 3 Header -->
                        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-lg mb-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h2 class="text-2xl font-bold mb-2">üéØ Component 3: Clear Roles & Accountability</h2>
                                    <p class="text-indigo-100">AI-powered role-based governance collaboration - replacing emails, PowerPoint & Excel</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-indigo-200">Context: Individual Health Workflow</div>
                                    <div class="text-lg font-semibold">RACI Framework in Action</div>
                                </div>
                            </div>
                        </div>

                        <!-- Role Selector -->
                        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">üë• Select Your Role & Perspective</h3>
                            <div class="grid grid-cols-1 lg:grid-cols-5 gap-3">
                                <button onclick="switchRole('steward')" id="role-steward" class="role-btn active-role">
                                    <div class="text-2xl mb-2">üõ°Ô∏è</div>
                                    <div class="font-semibold text-sm">Data Stewards</div>
                                    <div class="text-xs text-gray-600">& SMEs</div>
                                    <div class="text-xs font-bold text-blue-600 mt-1">RESPONSIBLE</div>
                                        </button>
                                <button onclick="switchRole('owner')" id="role-owner" class="role-btn">
                                    <div class="text-2xl mb-2">üëë</div>
                                    <div class="font-semibold text-sm">Data Owners</div>
                                    <div class="text-xs text-gray-600">& Compliance</div>
                                    <div class="text-xs font-bold text-green-600 mt-1">ACCOUNTABLE</div>
                                        </button>
                                <button onclick="switchRole('architect')" id="role-architect" class="role-btn">
                                    <div class="text-2xl mb-2">üèóÔ∏è</div>
                                    <div class="font-semibold text-sm">IT & Data</div>
                                    <div class="text-xs text-gray-600">Architecture</div>
                                    <div class="text-xs font-bold text-orange-600 mt-1">CONSULTED</div>
                                        </button>
                                <button onclick="switchRole('executive')" id="role-executive" class="role-btn">
                                    <div class="text-2xl mb-2">üìä</div>
                                    <div class="font-semibold text-sm">Senior Mgmt</div>
                                    <div class="text-xs text-gray-600">& Business Leaders</div>
                                    <div class="text-xs font-bold text-purple-600 mt-1">INFORMED</div>
                                </button>
                                <button onclick="switchRole('governance')" id="role-governance" class="role-btn">
                                    <div class="text-2xl mb-2">üéØ</div>
                                    <div class="font-semibold text-sm">Corporate</div>
                                    <div class="text-xs text-gray-600">Governance Team</div>
                                    <div class="text-xs font-bold text-red-600 mt-1">ORCHESTRATES</div>
                                        </button>
                            </div>
                                    </div>
                                    
                        <!-- Role-Specific AI Assistant Interface -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Left Column: Role-Specific AI Chat -->
                            <div class="lg:col-span-2">
                                <div class="bg-white rounded-lg shadow-lg h-auto min-h-96 flex flex-col">
                                    <!-- AI Assistant Header -->
                                    <div id="ai-header" class="bg-blue-50 px-6 py-4 border-b border-blue-200 rounded-t-lg">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h3 id="ai-title" class="text-lg font-semibold text-blue-800">üõ°Ô∏è Data Steward AI Assistant</h3>
                                                <p id="ai-subtitle" class="text-sm text-blue-600">Responsible for data quality, CDEs, and compliance validation</p>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                    <span class="w-2 h-2 bg-green-400 rounded-full mr-1"></span>
                                                    Active
                                                </span>
                                            </div>
                                    </div>
                                </div>
                                
                                    <!-- Key Questions Section -->
                                    <div class="p-6 border-b border-gray-200">
                                        <h4 class="font-semibold text-gray-800 mb-3">üîç Key Questions You Want to Address:</h4>
                                        <div id="key-questions" class="space-y-2">
                                            <!-- Content will be populated by switchRole() -->
                                </div>
                            </div>

                                    <!-- Interactive AI Chat Interface -->
                                    <div class="p-6 flex-1 flex flex-col">
                                        <div class="flex items-center justify-between mb-4">
                                            <h4 class="font-semibold text-gray-800">üí¨ Ask Your AI Assistant</h4>
                                            <button onclick="clearAIChat()" class="text-gray-400 hover:text-gray-600 text-sm">
                                                Clear Chat
                                            </button>
                                        </div>
                                        
                                        <!-- Chat Messages Area -->
                                        <div id="ai-chat-messages" class="flex-1 bg-gray-50 rounded-lg p-4 mb-4 h-64 overflow-y-auto space-y-3">
                                            <!-- Welcome message will be populated by role -->
                                        </div>
                                        
                                        <!-- Chat Input -->
                                        <div class="flex space-x-2">
                                    <input 
                                        type="text" 
                                                id="ai-chat-input" 
                                                placeholder="Ask me anything about your governance workflow..."
                                                class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
                                                onkeypress="if(event.key==='Enter') sendAIMessage()"
                                            >
                                            <button 
                                                onclick="sendAIMessage()" 
                                                class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 text-sm"
                                            >
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                                </svg>
                                                <span>Send</span>
                                    </button>
                                </div>

                                        <!-- Quick Questions -->
                                        <div class="mt-4">
                                            <h5 class="text-xs font-semibold text-gray-600 mb-2">Quick Questions:</h5>
                                            <div id="quick-questions" class="flex flex-wrap gap-2">
                                                <!-- Will be populated by role -->
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                </div>

                            <!-- Right Column: Collaboration & Context -->
                            <div class="space-y-6">
                                <!-- Active Collaborations -->
                                <div class="bg-white rounded-lg shadow-lg p-6">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                        <span class="w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center mr-2">
                                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                                            </svg>
                                        </span>
                                        Active Collaborations
                                    </h3>
                                    <div id="collaborations" class="space-y-3">
                                        <!-- Content will be populated by role -->
                                    </div>
                                </div>

                                <!-- Workflow Status -->
                                <div class="bg-white rounded-lg shadow-lg p-6">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                        <span class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2">
                                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                        </span>
                                        Your Context
                                    </h3>
                                    <div id="role-context" class="space-y-3 text-sm">
                                        <!-- Content will be populated by role -->
                                </div>
                            </div>

                                <!-- Smart Handoffs -->
                                <div class="bg-white rounded-lg shadow-lg p-6">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                        <span class="w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-2">
                                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                            </svg>
                                        </span>
                                        Smart Handoffs
                                </h3>
                                    <div id="smart-handoffs" class="space-y-2">
                                        <!-- Content will be populated by role -->
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cross-Role Coordination Dashboard -->
                        <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-6 mt-6 border border-blue-200">
                            <h3 class="text-xl font-bold mb-4 text-gray-800">
                                <i class="fas fa-network-wired mr-2 text-blue-600"></i>Cross-Role Coordination Dashboard
                            </h3>
                            <div class="grid grid-cols-1 lg:grid-cols-5 gap-4">
                                <div id="coord-steward" class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üõ°Ô∏è</div>
                                        <div class="font-semibold text-sm text-blue-700">Data Stewards</div>
                                        <div class="text-xs text-gray-600 mt-1">6 CDEs pending</div>
                                        <div class="text-xs text-green-600">2 completed today</div>
                                    </div>
                                </div>
                                <div id="coord-owner" class="bg-white rounded-lg p-4 border border-green-200">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üëë</div>
                                        <div class="font-semibold text-sm text-green-700">Data Owners</div>
                                        <div class="text-xs text-gray-600 mt-1">1 access review</div>
                                        <div class="text-xs text-orange-600">Decision needed</div>
                                    </div>
                                </div>
                                <div id="coord-architect" class="bg-white rounded-lg p-4 border border-orange-200">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üèóÔ∏è</div>
                                        <div class="font-semibold text-sm text-orange-700">IT & Architecture</div>
                                        <div class="text-xs text-gray-600 mt-1">2 tech consults</div>
                                        <div class="text-xs text-blue-600">On schedule</div>
                                    </div>
                                </div>
                                <div id="coord-executive" class="bg-white rounded-lg p-4 border border-purple-200">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üìä</div>
                                        <div class="font-semibold text-sm text-purple-700">Senior Management</div>
                                        <div class="text-xs text-gray-600 mt-1">Weekly report</div>
                                        <div class="text-xs text-green-600">Ready for review</div>
                                    </div>
                                </div>
                                <div id="coord-governance" class="bg-white rounded-lg p-4 border border-red-200">
                                    <div class="text-center">
                                        <div class="text-2xl mb-2">üéØ</div>
                                        <div class="font-semibold text-sm text-red-700">Governance Team</div>
                                        <div class="text-xs text-gray-600 mt-1">Orchestrating all</div>
                                        <div class="text-xs text-blue-600">67% complete</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Global variables for demo state
        let currentPersona = 'steward';
        let currentFAIR = 'findable';
        
        // Persona definitions
        const personas = {
            steward: {
                name: "üõ°Ô∏è Data Steward",
                description: "Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across regulatory landscape.",
                color: "blue",
                priorities: ["Quality Metrics", "Compliance Tracking", "Governance Workflows"]
            },
            owner: {
                name: "üëë Data Owner", 
                description: "Manage data assets, control access, and demonstrate business value. Your goal: Maximize ROI from data while ensuring secure, controlled access.",
                color: "green",
                priorities: ["Asset Management", "Access Control", "Business Value", "ROI Tracking"]
            },
            sme: {
                name: "üß† SME",
                description: "Provide domain expertise, validate business definitions, and ensure data meets regulatory requirements. Your goal: Make data meaningful and fit-for-purpose.",
                color: "purple", 
                priorities: ["Business Definitions", "Domain Validation", "Regulatory Requirements"]
            }
        };

        // FAIR principle definitions
        const fairPrinciples = {
            findable: {
                title: "üîç FINDABLE",
                description: "AI indexes data across scattered sources and creates unified metadata catalog",
                example: "Data stewards ask: 'Show me datasets related to patient demographics' ‚Üí instant results",
                color: "blue"
            },
            accessible: {
                title: "üîì ACCESSIBLE", 
                description: "AI automates data access workflows with built-in compliance checks",
                example: "Steward requests access to claims data ‚Üí AI explains process, initiates request, tracks approvals",
                color: "green"
            },
            interoperable: {
                title: "üîÑ INTEROPERABLE",
                description: "AI identifies and standardizes data formats, units, and terminology",
                example: "AI suggests: 'Diagnosis_Code in System A maps to ICD-10 code in System B'",
                color: "orange"
            },
            reusable: {
                title: "‚ôªÔ∏è REUSABLE", 
                description: "AI drafts business definitions, flags CDEs, and enriches metadata",
                example: "AI drafts: 'Transaction Amount = Total billed amount per claim' + flags as CDE",
                color: "purple"
            }
        };

        function switchPersona() {
            const selector = document.getElementById('persona-selector');
            currentPersona = selector.value;
            const persona = personas[currentPersona];
            
            // Update description
            const description = document.getElementById('persona-description');
            description.innerHTML = `
                <p class="text-sm text-${persona.color}-800">
                    <strong>${persona.name} View:</strong> ${persona.description}
                </p>
            `;
            description.className = `mt-3 p-3 bg-${persona.color}-50 rounded-lg`;
            
            // Update AI activity
            updateAIActivity(`Adapting interface for ${persona.name}...`);
            
            // Reload data with persona context
            setTimeout(() => {
                loadPersonaSpecificData();
                updateAISuggestionsForContext();
                updateAIActivity(`Ready to assist ${persona.name} with FAIR data governance`);
            }, 1000);
        }

        function highlightFAIR(principle) {
            currentFAIR = principle;
            
            // Reset all FAIR buttons
            document.querySelectorAll('.fair-nav-btn').forEach(btn => {
                btn.className = 'fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50';
            });
            
            // Highlight selected principle
            const fairPrinciple = fairPrinciples[principle];
            const btn = document.getElementById(`fair-${principle}`);
            btn.className = `fair-nav-btn px-4 py-2 rounded-lg text-${fairPrinciple.color}-600 bg-${fairPrinciple.color}-50 font-semibold`;
            
            // Update AI activity
            updateAIActivity(`Demonstrating ${fairPrinciple.title} capabilities...`);
            
            // Show FAIR-specific UI elements and update suggestions
            setTimeout(() => {
                highlightFAIRFeatures(principle);
                updateAISuggestionsForContext();
                updateAIActivity(`${fairPrinciple.title} - ${fairPrinciple.description}`);
            }, 500);
        }

        function updateAIActivity(message) {
            const activity = document.getElementById('ai-activity');
            activity.textContent = message;
            
            // Show working animation
            const status = document.getElementById('ai-status');
            status.classList.add('animate-pulse');
            setTimeout(() => status.classList.remove('animate-pulse'), 2000);
        }

        function loadPersonaSpecificData() {
            const persona = personas[currentPersona];
            
            // Update impact metrics based on persona
            const metrics = document.getElementById('impact-metrics');
            if (currentPersona === 'owner') {
                metrics.innerHTML = `
                    <span class="mr-4">üí∞ $2M+ ROI annually</span>
                    <span class="mr-4">‚ö° 95% access automation</span>
                    <span>üîê 100% compliance tracking</span>
                `;
            } else if (currentPersona === 'sme') {
                metrics.innerHTML = `
                    <span class="mr-4">üìö 44 CDEs identified</span>
                    <span class="mr-4">üéØ 98% definition accuracy</span>
                    <span>‚ö° 80% validation time saved</span>
                `;
            } else {
                metrics.innerHTML = `
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                `;
            }
        }

        function highlightFAIRFeatures(principle) {
            // Add visual cues based on FAIR principle
            const elements = document.querySelectorAll('.bg-white');
            elements.forEach(el => {
                if (principle === 'findable' && el.querySelector('#search-input')) {
                    el.style.boxShadow = '0 0 15px rgba(59, 130, 246, 0.3)';
                } else if (principle === 'accessible' && el.querySelector('#workflow-result')) {
                    el.style.boxShadow = '0 0 15px rgba(34, 197, 94, 0.3)';
                } else if (principle === 'interoperable' && el.querySelector('#business-glossary')) {
                    el.style.boxShadow = '0 0 15px rgba(249, 115, 22, 0.3)';
                } else if (principle === 'reusable' && el.querySelector('#data-quality')) {
                    el.style.boxShadow = '0 0 15px rgba(147, 51, 234, 0.3)';
                } else {
                    el.style.boxShadow = '';
                }
            });
        }

        function updateAISuggestionsForContext() {
            const persona = personas[currentPersona];
            const fairPrinciple = fairPrinciples[currentFAIR];
            
            // Get current use case context
            const useCaseFilter = document.getElementById('use-case-filter').value;
            const useCase = useCaseFilter || 'general';
            
            let suggestions = [];
            
            // Generate suggestions based on FAIR principle + Persona + Use Case combination
            if (currentFAIR === 'findable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Product Characterization Discovery',
                                content: 'AI found 47 product specification fields across 8 systems. Implement unified catalog to reduce nonclinical data discovery from 2 days to 15 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Section 2.8 Data Indexing',
                                content: 'Auto-index product tabulation data per FDA Section 2.8 standards. Estimated effort savings: 35 hours/week for regulatory stewards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Biomarker Data Discovery',
                                content: 'AI indexed 156 biomarker fields across clinical databases. Unified discovery reduces individual health assessment prep from 4 days to 45 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Clinical Data Auto-Cataloging',
                                content: 'Smart indexing of cotinine, NNAL, and exposure biomarkers. Saves clinical stewards 25 hours/week in data preparation.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Surveillance Data Unification',
                                content: 'AI discovered 89 population health metrics across epidemiological systems. Unified catalog reduces surveillance prep from 5 days to 1 hour.'
                            },
                            {
                                type: 'indexing',
                                title: 'Public Health Data Indexing',
                                content: 'Auto-catalog demographic, behavioral, and health outcome data for population studies. Saves 40 hours/week for health stewards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Cross-Section Data Discovery',
                                content: 'AI unified discovery across Sections 2.7-2.10. Comprehensive regulatory package prep reduced from 3 weeks to 2 days.'
                            },
                            {
                                type: 'indexing',
                                title: 'FDA Submission Catalog',
                                content: 'Smart indexing for complete PMTA submissions. Auto-links product, clinical, and population data. Saves 60 hours/week.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Universal Data Discovery',
                                content: 'AI found 127 total fields across systems. Recommend implementing unified metadata catalog to improve discovery from 3 days to 30 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Smart Indexing Opportunity',
                                content: 'AI can auto-index 50+ Excel files and 12 email repositories. Estimated effort savings: 40 hours/week for your steward team.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Product Data Asset ROI',
                                content: 'Nonclinical data assets worth $800K annually. AI discovery increases utilization by 70%, adding $560K value to product development.'
                            },
                            {
                                type: 'catalog',
                                title: 'Product Catalog Investment',
                                content: 'Section 2.8 compliance catalog reduces regulatory delays by 40%. Estimated value: $2M saved in faster market entry.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Biomarker Asset Portfolio',
                                content: 'Clinical biomarker data valued at $1.2M. AI findability increases research productivity by 85%, adding $1M annual value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Clinical Discovery ROI',
                                content: 'Unified clinical catalog saves $300K annually in study startup costs. Faster biomarker discovery accelerates research timelines.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Population Data Monetization',
                                content: 'Surveillance data assets worth $600K annually. AI discovery enables 3x more health studies, generating $1.8M value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Epidemiological Investment',
                                content: 'Population health catalog reduces study planning by 60%. Value: $400K saved in faster public health insights.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Regulatory Portfolio Value',
                                content: 'Complete PMTA data portfolio worth $3.5M. AI findability reduces submission prep by 75%, saving $2.6M annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'FDA Submission ROI',
                                content: 'Comprehensive catalog accelerates submissions by 90 days. Faster approvals generate $5M+ in early market revenue.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Asset Visibility ROI',
                                content: 'Implementing AI discovery across 7 data sources could increase asset utilization by 60%. Projected value: $500K annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'Catalog Investment',
                                content: 'Unified metadata catalog reduces data discovery costs by $200K/year. Payback period: 6 months with current search volumes.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Product Metadata Validation',
                                content: 'AI suggests enriching product metadata with Section 2.8 nonclinical standards. Your expertise needed for product characterization accuracy.'
                            },
                            {
                                type: 'tagging',
                                title: 'Nonclinical Data Tagging',
                                content: 'AI can auto-tag product specification data with FDA categories (chemistry, toxicology, pharmacology). Expert validation needed: 94% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Biomarker Metadata Enhancement',
                                content: 'AI suggests enriching biomarker metadata with ICH bioanalytical guidelines. Your clinical expertise critical for accuracy validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Clinical Endpoint Tagging',
                                content: 'AI can classify biomarker data by endpoint type (exposure, effect, susceptibility). Data Steward validation required: 91% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Epidemiological Metadata',
                                content: 'AI suggests enriching population data with WHO surveillance standards. Your public health expertise needed for study design validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Health Outcome Classification',
                                content: 'AI can categorize health outcomes by ICD-10 codes and severity. Epidemiological expert review needed: 89% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Cross-Section Validation',
                                content: 'AI suggests harmonizing metadata across Sections 2.7-2.10. Your regulatory expertise critical for FDA submission readiness.'
                            },
                            {
                                type: 'tagging',
                                title: 'PMTA Data Classification',
                                content: 'AI can tag data by PMTA section requirements (collection, tabulation, analysis, exchange). Regulatory SME validation needed: 96% confidence.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Metadata Enrichment',
                                content: 'AI suggests enriching product metadata with Section 2.8 standards. This improves findability for regulatory submissions.'
                            },
                            {
                                type: 'tagging',
                                title: 'Smart Tagging',
                                content: 'AI can auto-tag biomarker data with regulatory categories (FDA, ICH, ISO). Confidence: 96% based on content analysis.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'accessible') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Nonclinical Access Workflow',
                                content: 'AI automates product characterization data access with Section 2.8 compliance checks. Reduces access time from 5 days to 2 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Product Data Compliance',
                                content: 'Set up automated compliance monitoring for product specifications. AI tracks usage for FDA nonclinical audit readiness.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Clinical Data Access Control',
                                content: 'AI automates biomarker data access with GCP compliance checks. Reduces clinical data approval from 10 days to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Biomarker Data Governance',
                                content: 'Automated monitoring for clinical biomarker access ensures ICH guidelines compliance. AI tracks all research usage patterns.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Population Data Ethics',
                                content: 'AI automates surveillance data access with privacy compliance checks. Reduces IRB approval workflow from 3 weeks to 2 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'Public Health Data Tracking',
                                content: 'Automated monitoring for population health data ensures ethical research compliance. AI tracks all epidemiological usage.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Multi-Section Access Control',
                                content: 'AI orchestrates access across Sections 2.7-2.10 with comprehensive compliance. Reduces PMTA data prep from 3 weeks to 3 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'FDA Submission Tracking',
                                content: 'End-to-end compliance monitoring for complete regulatory submissions. AI ensures audit trail across all data sections.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Access Workflow Automation',
                                content: 'AI can automate 85% of data access requests with built-in compliance checks. Reduces approval time from 2 weeks to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Compliance Monitoring',
                                content: 'Set up automated FDA compliance monitoring for data access. AI tracks all data usage for audit readiness.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Product Data Access ROI',
                                content: 'Automated nonclinical access control saves $200K annually in compliance costs. Reduces product development security risks by 80%.'
                            },
                            {
                                type: 'audit',
                                title: 'Section 2.8 Audit Efficiency',
                                content: 'Automated product data tracking reduces FDA audit prep by 85%. Typical compliance review: 3 days vs 3 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Clinical Access ROI',
                                content: 'Automated biomarker access control saves $350K annually in GCP compliance. Reduces clinical trial security risks by 90%.'
                            },
                            {
                                type: 'audit',
                                title: 'Biomarker Audit Trail',
                                content: 'Automated clinical data tracking reduces regulatory audit prep by 90%. ICH compliance review: 2 days vs 4 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Population Data Ethics ROI',
                                content: 'Automated surveillance access saves $150K annually in IRB compliance costs. Reduces public health study risks by 85%.'
                            },
                            {
                                type: 'audit',
                                title: 'Epidemiological Audit',
                                content: 'Automated population health tracking reduces ethics audit prep by 80%. Privacy compliance review: 1 day vs 2 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'PMTA Access Management',
                                content: 'Comprehensive access control saves $500K annually across all regulatory sections. Reduces FDA submission risks by 95%.'
                            },
                            {
                                type: 'audit',
                                title: 'Multi-Section Audit Value',
                                content: 'Automated cross-section tracking reduces PMTA audit prep by 95%. Complete FDA review: 5 days vs 8 weeks manual.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Access Control ROI',
                                content: 'Implementing role-based access reduces security risks by 70% and saves 25 hours/week in manual approvals. Value: $300K/year.'
                            },
                            {
                                type: 'audit',
                                title: 'Audit Trail Investment',
                                content: 'Automated access tracking reduces compliance audit costs by 90%. Typical audit preparation: 2 days vs 3 weeks manual.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Product Access Guidelines',
                                content: 'AI suggests product characterization access rules based on FDA Section 2.8 guidelines. Your nonclinical expertise needed for protocol design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Product Data Protocols',
                                content: 'AI can draft tobacco product data access protocols aligned with nonclinical standards. Expert review needed for regulatory accuracy.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Clinical Access Design',
                                content: 'AI suggests biomarker access rules based on ICH GCP guidelines. Your clinical expertise critical for appropriate researcher permissions.'
                            },
                            {
                                type: 'protocols',
                                title: 'Biomarker Access Protocols',
                                content: 'AI can draft clinical biomarker access protocols aligned with Section 2.7 collection standards. Data Steward validation required.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Population Ethics Framework',
                                content: 'AI suggests surveillance data access rules based on WHO privacy guidelines. Your epidemiological expertise needed for ethical design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Public Health Protocols',
                                content: 'AI can draft population health access protocols aligned with surveillance standards. Public health SME review required.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Cross-Section Access Design',
                                content: 'AI suggests comprehensive access rules spanning Sections 2.7-2.10. Your regulatory expertise critical for PMTA submission protocols.'
                            },
                            {
                                type: 'protocols',
                                title: 'FDA Submission Protocols',
                                content: 'AI can draft complete PMTA access protocols aligned with all regulatory sections. Regulatory SME validation essential.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Domain-Based Permissions',
                                content: 'AI suggests clinical data access rules based on ICH GCP guidelines. Ensures appropriate researcher access to biomarker studies.'
                            },
                            {
                                type: 'protocols',
                                title: 'Access Protocol Design',
                                content: 'AI can draft product-specific data access protocols aligned with Section 2.7 collection standards for your review.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'interoperable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Product Field Standardization',
                                content: 'AI identified 12 critical product field mappings for Section 2.8 compliance. Start with "PRODUCT_TYPE" ‚Üí "Product_Category" (97% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Nonclinical Data Harmonization',
                                content: 'Implementing AI-suggested product CDEs improves nonclinical data quality from 82% to 96%. Focus on chemistry and toxicology standards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Biomarker Field Mapping',
                                content: 'AI identified 18 biomarker field mappings for clinical compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Clinical Standards Alignment',
                                content: 'Implementing biomarker CDEs improves clinical data quality from 76% to 93%. Focus on exposure and effect biomarker standards.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Population Health Mapping',
                                content: 'AI identified 14 surveillance field mappings for epidemiological studies. Start with "AGE_GROUP" ‚Üí "Age_Category" (92% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Surveillance Standards',
                                content: 'Implementing population health CDEs improves surveillance data quality from 79% to 91%. Focus on demographic and outcome standards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Cross-Section Field Mapping',
                                content: 'AI identified 35 field mappings across Sections 2.7-2.10. Comprehensive PMTA standardization achieves 98% compliance readiness.'
                            },
                            {
                                type: 'standards',
                                title: 'FDA Standards Harmonization',
                                content: 'Implementing cross-section CDEs improves overall regulatory data quality from 85% to 97%. Complete PMTA standards alignment.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Field Mapping Priority',
                                content: 'AI identified 15 critical field mappings needed for tobacco regulatory compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Standards Harmonization',
                                content: 'Implementing AI-suggested CDE mappings improves data quality from 78% to 94%. Focus on Section 2.8-2.9 standards first.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Product Integration Savings',
                                content: 'AI nonclinical standardization reduces product development integration costs by 70%. Typical project: $150K vs $500K manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Product Data Reuse Value',
                                content: 'Standardized product data increases regulatory reuse by 400%. Each dataset now serves 5 submission types vs 1.2 previously.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Integration Cost Savings',
                                content: 'AI standardization reduces future integration costs by 60%. Typical project: $200K vs $500K for manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Data Reuse Value',
                                content: 'Standardized tobacco data increases reuse by 300%. Each dataset now serves 4 use cases vs 1.3 previously.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'Product CDE Validation',
                                content: 'AI detected "CHEMICAL_COMPOSITION" field requires expert validation for Section 2.8 CDE mapping. Chemistry expertise needed.'
                            },
                            {
                                type: 'terminology',
                                title: 'Product Terminology Standards',
                                content: 'AI suggests aligning "Tobacco_Type" with FDA product classification terminology. Your regulatory expertise needed for accuracy.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'CDE Validation Required',
                                content: 'AI detected "NNAL_CONC" field requires expert validation for CDE mapping. Please review against FDA biomarker guidance.'
                            },
                            {
                                type: 'terminology',
                                title: 'Terminology Standardization',
                                content: 'AI suggests aligning "Age_Verification" with ICH E6 Guidelines terminology. Your expertise needed for final validation.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'reusable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Product Data Quality Focus',
                                content: 'AI analysis shows 2 nonclinical files below 85% quality. Implement product specification cleansing to achieve 97% Section 2.8 readiness.'
                            },
                            {
                                type: 'governance',
                                title: 'Product Governance Policy',
                                content: 'AI suggests updating governance policies for tobacco product characterization quality rules. Draft Section 2.8 standards available.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Quality Score Improvement',
                                content: 'AI quality analysis shows 3 files below 80% quality threshold. Implement data cleansing workflow to achieve 95% target.'
                            },
                            {
                                type: 'governance',
                                title: 'Governance Policy Update',
                                content: 'AI suggests updating data governance policies to include tobacco-specific quality rules. Draft available for review.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Product Reuse ROI',
                                content: 'High-quality product data generates 6x ROI. Each $1 invested in nonclinical quality returns $6 in avoided regulatory rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Product Portfolio Value',
                                content: 'Nonclinical data portfolio valued at $2.1M with current quality. Reaching 97% Section 2.8 compliance increases value to $3.2M.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Reuse Multiplier Effect',
                                content: 'High-quality reusable data generates 5x ROI. Each $1 invested in quality improvement returns $5 in avoided rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Data Portfolio Value',
                                content: 'Your tobacco data portfolio valued at $3.2M with current quality scores. Reaching 95% quality increases value to $4.8M.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Product Definition Review',
                                content: 'AI drafted nonclinical definitions need expert review. Focus on "Chemical_Composition" definition for Section 2.8 regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Nonclinical Expert Validation',
                                content: 'AI confidence is 89% for "Toxicology_Endpoint" definition. Your chemistry expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Definition Enrichment Needed',
                                content: 'AI drafted business definitions need your expert review. Focus on "Exposure_Biomarker" definition for regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Expert Validation Request',
                                content: 'AI confidence is 87% for "Clinical_Endpoint" definition. Your domain expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    }
                }
            }
            
            // Display the updated suggestions
            displaySuggestions(suggestions);
        }

        function displaySuggestions(suggestions) {
            const panel = document.getElementById('ai-suggestions-panel');
            const container = document.getElementById('ai-suggestions');
            
            if (suggestions.length > 0) {
                container.innerHTML = suggestions.map(suggestion => `
                    <div class="bg-white p-4 rounded-lg border-l-4 border-${getColorByType(suggestion.type)}-400 shadow-sm">
                        <h4 class="font-bold text-${getColorByType(suggestion.type)}-800 text-sm mb-2">
                            ${getIconByType(suggestion.type)} ${suggestion.title}
                        </h4>
                        <p class="text-sm text-gray-700">${suggestion.content}</p>
                        <button class="mt-2 text-xs px-3 py-1 bg-${getColorByType(suggestion.type)}-100 text-${getColorByType(suggestion.type)}-700 rounded-full hover:bg-${getColorByType(suggestion.type)}-200">
                            Apply Suggestion
                        </button>
                    </div>
                `).join('');
                
                panel.style.display = 'block';
                
                // Update AI activity
                const persona = personas[currentPersona];
                const fairPrinciple = fairPrinciples[currentFAIR];
                setTimeout(() => {
                    updateAIActivity(`Generated ${suggestions.length} ${fairPrinciple.title} suggestions for ${persona.name}`);
                }, 500);
            } else {
                panel.style.display = 'none';
            }
        }

        function getColorByType(type) {
            const colors = {
                'access': 'green',
                'roi': 'blue', 
                'mapping': 'orange',
                'definition': 'purple',
                'quality': 'yellow',
                'compliance': 'red',
                'related': 'indigo',
                'discovery': 'blue',
                'indexing': 'cyan',
                'asset': 'green',
                'catalog': 'teal',
                'metadata': 'purple',
                'tagging': 'pink',
                'workflow': 'green',
                'access_control': 'emerald',
                'audit': 'slate',
                'permissions': 'lime',
                'protocols': 'sky',
                'standards': 'orange',
                'integration': 'amber',
                'reuse': 'violet',
                'cde_mapping': 'fuchsia',
                'terminology': 'rose',
                'governance': 'stone',
                'reuse_roi': 'blue',
                'portfolio': 'emerald',
                'definitions': 'purple',
                'validation': 'red'
            };
            return colors[type] || 'gray';
        }

        function getIconByType(type) {
            const icons = {
                'access': 'üîê',
                'roi': 'üí∞',
                'mapping': 'üîÑ',
                'definition': 'üìù',
                'quality': 'üìä',
                'compliance': 'üéØ',
                'related': 'üîç',
                'discovery': 'üîç',
                'indexing': 'üìë',
                'asset': 'üì¶',
                'catalog': 'üìö',
                'metadata': 'üè∑Ô∏è',
                'tagging': 'üè∑Ô∏è',
                'workflow': '‚ö°',
                'access_control': 'üîê',
                'audit': 'üìã',
                'permissions': 'üë•',
                'protocols': 'üìã',
                'standards': 'üìè',
                'integration': 'üîó',
                'reuse': '‚ôªÔ∏è',
                'cde_mapping': 'üó∫Ô∏è',
                'terminology': 'üìñ',
                'governance': '‚öñÔ∏è',
                'reuse_roi': 'üíé',
                'portfolio': 'üíº',
                'definitions': 'üìù',
                'validation': '‚úÖ'
            };
            return icons[type] || 'üí°';
        }

        // Global variables
        let useCases = [];
        let selectedUseCase = null;
        let currentGeneralStep = 1;

        // Tab Management
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active state from all tabs
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.remove('border-blue-500', 'text-blue-600');
                button.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab content
            const contentDiv = document.getElementById(tabName + '-content');
            if (contentDiv) {
                contentDiv.classList.remove('hidden');
            }
            
            // Add active state to selected tab
            const activeTab = document.getElementById(tabName + '-tab');
            if (activeTab) {
            activeTab.classList.add('active', 'border-blue-500', 'text-blue-600');
            activeTab.classList.remove('border-transparent', 'text-gray-500');
            }

            // Load tab-specific content
            if (tabName === 'use-cases') {
                loadUseCases();
            } else if (tabName === 'ai-assistant') {
                initializeAIAssistant();
            } else if (tabName === 'interview-prep') {
                loadInterviewPrep();
            }
        }

        // Load use cases for Tab 2
        function loadUseCases() {
            fetch('/api/use-cases')
                .then(response => response.json())
                .then(data => {
                    useCases = data.use_cases; // Fix: access the use_cases property
                    displayUseCases(data.use_cases);
                    
                    // Auto-select the "Product Impact on Individual Health" use case
                    setTimeout(() => {
                        selectUseCase('Product Impact on Individual Health');
                    }, 100);
                })
                .catch(error => console.error('Error loading use cases:', error));
        }

        function displayUseCases(cases) {
            const grid = document.getElementById('use-cases-grid');
            grid.innerHTML = cases.map(useCase => {
                const isDisabled = useCase.name !== 'Product Impact on Individual Health' && useCase.name !== 'Nonclinical';
                const disabledClass = isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:border-blue-300 cursor-pointer';
                const clickHandler = isDisabled ? '' : `onclick="selectUseCase('${useCase.name}')"`;
                
                return `
                <div class="use-case-card bg-white rounded-lg shadow-lg p-6 border-2 border-transparent ${disabledClass}" 
                     ${clickHandler}>
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">${useCase.icon}</div>
                        <h3 class="text-lg font-bold text-gray-800">${useCase.name}</h3>
                        ${isDisabled ? '<div class="text-xs text-gray-400 mt-1">(Coming Soon)</div>' : ''}
                    </div>
                    <div class="space-y-2 text-sm text-gray-600">
                        <div class="flex justify-between">
                            <span>Assets:</span>
                            <span class="font-semibold text-blue-600">${useCase.assets}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>CDEs:</span>
                            <span class="font-semibold text-green-600">${useCase.cdes}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>FDA Section:</span>
                            <span class="font-semibold text-purple-600">${useCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-gray-50 rounded text-xs text-gray-500">
                        ${useCase.description}
                    </div>
                </div>
            `;
            }).join('');
        }

        function selectUseCase(useCaseName) {
            // Remove selection from all cards
            document.querySelectorAll('.use-case-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Find and select the clicked card
            const selectedCard = Array.from(document.querySelectorAll('.use-case-card'))
                .find(card => card.textContent.includes(useCaseName));
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            selectedUseCase = useCases.find(uc => uc.name === useCaseName);
            
            // Show use case details
            document.getElementById('selected-use-case-details').classList.remove('hidden');
            document.getElementById('selected-use-case-title').textContent = useCaseName + ' - Implementation Details';
            
            // Show detailed interface for Individual Health use case
            if (useCaseName === 'Product Impact on Individual Health') {
                document.getElementById('individual-health-detailed-interface').classList.remove('hidden');
            } else {
                document.getElementById('individual-health-detailed-interface').classList.add('hidden');
            }

            // Show detailed interface for Nonclinical use case
            if (useCaseName === 'Nonclinical') {
                document.getElementById('nonclinical-detailed-interface').classList.remove('hidden');
            } else {
                document.getElementById('nonclinical-detailed-interface').classList.add('hidden');
            }
            
            // Load use case specific data
            loadUseCaseDetails(selectedUseCase);
        }

        function loadUseCaseDetails(useCase) {
            // Create detailed data inventory based on use case
            let dataAssetsContent = '';
            let cdeContent = '';
            
            if (useCase.name === 'Product Description') {
                dataAssetsContent = `
                <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">3 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database<br>
                                    ‚Ä¢ Records: 2.3M records<br>
                                    ‚Ä¢ Tables: product_tests, batch_records, quality_metrics, composition_data<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. product_characterization_raw.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 45MB, 125,000 rows<br>
                                    ‚Ä¢ Fields: PROD_CHAR_ID, NIC_TOT, TAR_ANHY, CO_YLD, FILT_EFF, MOIST_CONT, PH_VAL<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 75%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Laboratory_LIMS_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SOAP API<br>
                                    ‚Ä¢ Endpoints: /test-results, /batch-tracking, /certifications, /equipment-calibration<br>
                                    ‚Ä¢ Response Time: < 500ms<br>
                                    ‚Ä¢ Owner: Quality Control<br>
                                    ‚Ä¢ Uptime: 99.5%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">12 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                        </div>
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                        </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Tar_Content</div>
                                <div class="text-gray-600">Anhydrous tar yield measured under ISO conditions ‚Ä¢ DECIMAL(4,1)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Batch_Number</div>
                                <div class="text-gray-600">Unique manufacturing batch identifier ‚Ä¢ VARCHAR(12)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Quality_Score</div>
                                <div class="text-gray-600">Composite quality assessment score ‚Ä¢ DECIMAL(3,2)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 6 additional CDEs including Regulatory_Status, Carbon_Monoxide_Yield, Moisture_Content, pH_Value, Filter_Efficiency, Production_Facility_ID</div>
                    </div>
                </div>
            `;
            } else if (useCase.name === 'Product Impact on Individual Health') {
                dataAssetsContent = `
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200">
                            <div class="text-sm font-semibold text-blue-800 mb-3">
                                <i class="fas fa-heartbeat mr-2"></i>Clinical Data Assets Identified (12 Core + 5 Analysis-Ready)
                            </div>
                            
                            <!-- Trial Design Assets -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-indigo-700 mb-2">üìã Trial Design & Structure</div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border-l-4 border-indigo-400">
                                        <div class="font-semibold text-indigo-700">TV (Trial Visits)</div>
                                        <div class="text-gray-600">Visit schedules & timelines<br>Owner: Clinical Ops ‚Ä¢ Quality: 98%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-indigo-400">
                                        <div class="font-semibold text-indigo-700">TA (Trial Arms)</div>
                                        <div class="text-gray-600">Treatment group definitions<br>Owner: Clinical Ops ‚Ä¢ Quality: 99%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-indigo-400">
                                        <div class="font-semibold text-indigo-700">TE (Trial Elements)</div>
                                        <div class="text-gray-600">Study elements & epochs<br>Owner: Clinical Ops ‚Ä¢ Quality: 97%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Demographics & Subject Info -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-green-700 mb-2">üë• Subject Demographics & Characteristics</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border-l-4 border-green-400">
                                        <div class="font-semibold text-green-700">DM (Demographics)</div>
                                        <div class="text-gray-600">SEX, AGE, RACE, BMI variables<br>Records: 2,847 subjects ‚Ä¢ Quality: 96%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-green-400">
                                        <div class="font-semibold text-green-700">SC (Subject Characteristics)</div>
                                        <div class="text-gray-600">Medical history, inclusion criteria<br>Records: 2,847 subjects ‚Ä¢ Quality: 94%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Safety & Clinical Assessments -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-red-700 mb-2">üè• Safety & Clinical Assessments</div>
                                <div class="grid grid-cols-1 lg:grid-cols-4 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border-l-4 border-red-400">
                                        <div class="font-semibold text-red-700">AE (Adverse Events)</div>
                                        <div class="text-gray-600">AEDECOD, severity coding<br>Events: 1,247 ‚Ä¢ Quality: 98%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-red-400">
                                        <div class="font-semibold text-red-700">VS (Vital Signs)</div>
                                        <div class="text-gray-600">SYSBP, DIABP, heart rate<br>Measurements: 45,632 ‚Ä¢ Quality: 97%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-red-400">
                                        <div class="font-semibold text-red-700">EG (ECG)</div>
                                        <div class="text-gray-600">ECGCLSIG, QT intervals<br>ECGs: 8,541 ‚Ä¢ Quality: 95%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-red-400">
                                        <div class="font-semibold text-red-700">LB (Laboratory)</div>
                                        <div class="text-gray-600">Hematology, chemistry panels<br>Tests: 68,923 ‚Ä¢ Quality: 96%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Exposure & Device Data -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-purple-700 mb-2">üí® Product Exposure & Device Data</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border-l-4 border-purple-400">
                                        <div class="font-semibold text-purple-700">EX (Exposure)</div>
                                        <div class="text-gray-600">EXDOSE, product usage patterns<br>Exposure records: 12,847 ‚Ä¢ Quality: 93%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-purple-400">
                                        <div class="font-semibold text-purple-700">EM (Device Events)</div>
                                        <div class="text-gray-600">EMDECOD, device malfunctions<br>Device events: 284 ‚Ä¢ Quality: 91%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Behavioral & PK/PD Data -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-teal-700 mb-2">üß† Behavioral & Pharmacokinetic Data</div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border-l-4 border-teal-400">
                                        <div class="font-semibold text-teal-700">QS (Questionnaires)</div>
                                        <div class="text-gray-600">QSCAT, nicotine dependence scales<br>Responses: 34,567 ‚Ä¢ Quality: 89%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-teal-400">
                                        <div class="font-semibold text-teal-700">PC (PK Concentrations)</div>
                                        <div class="text-gray-600">PCTESTCD, biomarker levels<br>Samples: 15,432 ‚Ä¢ Quality: 97%</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border-l-4 border-teal-400">
                                        <div class="font-semibold text-teal-700">PP (PK Parameters)</div>
                                        <div class="text-gray-600">TMAX, AUCALL derived params<br>Parameters: 4,523 ‚Ä¢ Quality: 95%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Analysis-Ready Datasets -->
                            <div class="bg-gradient-to-r from-orange-50 to-amber-50 p-3 rounded border border-orange-200">
                                <div class="text-xs font-bold text-orange-700 mb-2">üìä Analysis-Ready Datasets (ADaM)</div>
                                <div class="grid grid-cols-1 lg:grid-cols-5 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-orange-700">ADSL</div>
                                        <div class="text-gray-600">Subject-level analysis<br>TRT01A variables</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-orange-700">ADVS</div>
                                        <div class="text-gray-600">Vital signs analysis<br>BASE, CHG calculations</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-orange-700">ADLB</div>
                                        <div class="text-gray-600">Laboratory analysis<br>Reference ranges</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-orange-700">ADEX</div>
                                        <div class="text-gray-600">Exposure analysis<br>Derived variables</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-orange-700">ADPP</div>
                                        <div class="text-gray-600">PK parameters<br>Statistical summaries</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                cdeContent = `
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200">
                            <div class="text-sm font-semibold text-green-800 mb-3">
                                <i class="fas fa-tags mr-2"></i>Critical Data Elements (CDEs) - Individual Health Study
                            </div>
                            
                            <!-- Core Subject Identifiers -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-blue-700 mb-2">üîë Core Subject Identifiers</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-white p-3 rounded border border-blue-200">
                                        <div class="font-semibold text-blue-700">Subject_ID (USUBJID)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Unique subject identifier across studies<br>
                                            <strong>Format:</strong> VARCHAR(20) - Study_Site_Subject pattern<br>
                                            <strong>Example:</strong> IH2024_001_0001<br>
                                            <strong>CDISC Standard:</strong> SDTM USUBJID variable
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded border border-blue-200">
                                        <div class="font-semibold text-blue-700">Visit_Name (VISIT)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Standardized visit nomenclature<br>
                                            <strong>Format:</strong> VARCHAR(50)<br>
                                            <strong>Values:</strong> Screening, Day 1, Week 2, Follow-up<br>
                                            <strong>CDISC Standard:</strong> SDTM VISIT variable
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Biomarker CDEs -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-purple-700 mb-2">üß™ Key Biomarker CDEs</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-white p-3 rounded border border-purple-200">
                                        <div class="font-semibold text-purple-700">Cotinine_Level (COT)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Nicotine metabolite concentration in biological samples<br>
                                            <strong>Units:</strong> ng/mL (nanograms per milliliter)<br>
                                            <strong>Range:</strong> 0.1 - 500.0 ng/mL<br>
                                            <strong>Method:</strong> LC-MS/MS per ICH bioanalytical guidelines<br>
                                            <strong>Clinical Significance:</strong> Primary biomarker for nicotine exposure assessment
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded border border-purple-200">
                                        <div class="font-semibold text-purple-700">NNAL_Concentration (NNAL)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> 4-(methylnitrosamino)-1-(3-pyridyl)-1-butanol concentration<br>
                                            <strong>Units:</strong> pmol/mL (picomoles per milliliter)<br>
                                            <strong>Range:</strong> 0.05 - 50.0 pmol/mL<br>
                                            <strong>Method:</strong> LC-MS/MS<br>
                                            <strong>Clinical Significance:</strong> Tobacco-specific nitrosamine exposure biomarker
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Clinical Assessment CDEs -->
                            <div class="mb-4">
                                <div class="text-xs font-bold text-red-700 mb-2">üè• Clinical Assessment CDEs</div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-2 text-xs">
                                    <div class="bg-white p-3 rounded border border-red-200">
                                        <div class="font-semibold text-red-700">Clinical_Endpoint (CENDPT)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Primary clinical endpoint measurement<br>
                                            <strong>Categories:</strong> Safety, Efficacy, Exposure, Behavioral<br>
                                            <strong>Format:</strong> VARCHAR(100)<br>
                                            <strong>Standards:</strong> ICH E6 Good Clinical Practice
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded border border-red-200">
                                        <div class="font-semibold text-red-700">Adverse_Event_Term (AETERM)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Standardized adverse event terminology<br>
                                            <strong>Dictionary:</strong> MedDRA Preferred Terms<br>
                                            <strong>Format:</strong> VARCHAR(200)<br>
                                            <strong>Severity:</strong> Mild, Moderate, Severe grading
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded border border-red-200">
                                        <div class="font-semibold text-red-700">Vital_Signs_Panel (VSPANEL)</div>
                                        <div class="text-gray-600 mt-1">
                                            <strong>Definition:</strong> Standardized vital signs assessment<br>
                                            <strong>Components:</strong> SBP, DBP, HR, RR, TEMP<br>
                                            <strong>Units:</strong> mmHg, bpm, /min, ¬∞C<br>
                                            <strong>Frequency:</strong> Per protocol schedule
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Behavioral & Quality of Life CDEs -->
                            <div class="bg-gradient-to-r from-teal-50 to-cyan-50 p-3 rounded border border-teal-200">
                                <div class="text-xs font-bold text-teal-700 mb-2">üß† Behavioral & Quality of Life CDEs</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-teal-700">Nicotine_Dependence_Score (FTND)</div>
                                        <div class="text-gray-600">Fagerstr√∂m Test score (0-10 scale) ‚Ä¢ Validated questionnaire</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-teal-700">Craving_Assessment (QSU-Brief)</div>
                                        <div class="text-gray-600">Questionnaire on Smoking Urges ‚Ä¢ 10-item scale</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-teal-700">Product_Satisfaction (PSQ)</div>
                                        <div class="text-gray-600">Product-specific satisfaction questionnaire ‚Ä¢ Likert scale</div>
                                    </div>
                                    <div class="bg-white p-2 rounded border">
                                        <div class="font-semibold text-teal-700">Withdrawal_Symptoms (MNWS)</div>
                                        <div class="text-gray-600">Minnesota Nicotine Withdrawal Scale ‚Ä¢ Validated instrument</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Product Impact on Population Health') {
                dataAssetsContent = `
                <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">2 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Population_Surveillance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Data Warehouse<br>
                                    ‚Ä¢ Records: 12.5M records<br>
                                    ‚Ä¢ Datasets: population_surveys, health_outcomes, usage_patterns, demographic_profiles<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 89%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. surveillance_population_data.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 156MB, 425,000 rows<br>
                                    ‚Ä¢ Fields: SURV_ID, USE_PAT, HEALTH_OUT, DEMO_DATA, GEO_LOC, EDU_LEV<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 78%
                                </div>
                            </div>
                    </div>
                </div>
            `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">8 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Population_Demographics</div>
                                <div class="text-gray-600">Age, gender, and geographic distribution of use population ‚Ä¢ JSON</div>
                        </div>
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Exposure_Biomarker</div>
                                <div class="text-gray-600">Biological indicators of product exposure in study populations ‚Ä¢ DECIMAL(10,3)</div>
                        </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Age_Verification</div>
                                <div class="text-gray-600">Confirmed age verification status for product access ‚Ä¢ BOOLEAN</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Survey_ID</div>
                                <div class="text-gray-600">Unique identifier for population survey responses ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Health_Outcome</div>
                                <div class="text-gray-600">Measured health outcomes in population studies ‚Ä¢ VARCHAR(50)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 3 additional CDEs including Geographic_Location, Education_Level, Usage_Pattern</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Nonclinical') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">4 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Regulatory_Compliance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Document Store<br>
                                    ‚Ä¢ Records: 45K documents<br>
                                    ‚Ä¢ Types: submission_packages, compliance_reports, audit_trails, regulatory_correspondence<br>
                                    ‚Ä¢ Owner: Regulatory Affairs<br>
                                    ‚Ä¢ Quality Score: 98%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. FDA_Submission_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: REST API<br>
                                    ‚Ä¢ Endpoints: /pmta, /mrtp, /compliance, /labeling, /adverse-events<br>
                                    ‚Ä¢ Response Time: < 200ms<br>
                                    ‚Ä¢ Owner: Regulatory IT<br>
                                    ‚Ä¢ Uptime: 99.8%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database (shared with Product Description)<br>
                                    ‚Ä¢ Focus: Regulatory compliance data views<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">4. Clinical_Data_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: GraphQL API<br>
                                    ‚Ä¢ Endpoints: /biomarkers, /adverse-events, /demographics, /exposure-data<br>
                                    ‚Ä¢ Response Time: < 300ms<br>
                                    ‚Ä¢ Owner: Clinical IT<br>
                                    ‚Ä¢ Uptime: 99.7%
                                </div>
                            </div>
                    </div>
                </div>
            `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">15 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Regulatory_Status</div>
                                <div class="text-gray-600">Current regulatory approval status for product ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Subject_ID</div>
                                <div class="text-gray-600">Unique clinical study participant identifier ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Adverse_Event_Code</div>
                                <div class="text-gray-600">Standardized code for adverse events following product exposure ‚Ä¢ VARCHAR(10)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Study_Protocol_ID</div>
                                <div class="text-gray-600">Unique identifier for clinical study protocol ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 8 additional CDEs including Cotinine_Level, Exposure_Biomarker, Age_Verification, Population_Demographics, Batch_Number, Quality_Score, Clinical_Endpoint, Tar_Content</div>
                        </div>
                    </div>
                `;
            }

            // Populate the data panels
            document.getElementById('use-case-data-inventory').innerHTML = dataAssetsContent;
            document.getElementById('use-case-glossary').innerHTML = cdeContent;
            
            // Generate step breakdown for this use case
            // generateUseCaseStepBreakdown(useCase); // Removed - 5-step process section deleted

            // Load quality metrics
            document.getElementById('use-case-quality').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-purple-800">Quality Assessment</div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span>Completeness:</span>
                            <span class="text-green-600 font-semibold">94%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Accuracy:</span>
                            <span class="text-green-600 font-semibold">97%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Consistency:</span>
                            <span class="text-yellow-600 font-semibold">89%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>CDE Coverage:</span>
                            <span class="text-blue-600 font-semibold">${Math.round((useCase.cdes / 15) * 100)}%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Regulatory Readiness:</span>
                            <span class="text-green-600 font-semibold">98%</span>
                        </div>
                    </div>
                </div>
            `;

            // Load workflow
            document.getElementById('use-case-workflow').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-orange-800">Compliance Workflow</div>
                    <div class="text-xs space-y-2">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Data Collection ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Quality Check ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>CDE Mapping ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                            <span>FDA Submission (In Progress)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                            <span>Audit Trail Generation (Pending)</span>
                        </div>
                    </div>
                    <div class="mt-3 text-xs text-gray-600">
                        <strong>Next Steps:</strong> Regulatory review, final validation, submission package generation
                    </div>
                </div>
            `;
        }

        function generateUseCaseStepBreakdown(useCase) {
            const stepsBreakdown = getUseCaseSpecificSteps(useCase);
            
            const stepsHTML = stepsBreakdown.map((step, index) => `
                <div class="bg-white rounded-lg border border-indigo-200 p-4 hover:shadow-md transition-all">
                    <div class="flex items-start space-x-4">
                        <div class="w-8 h-8 ${step.color} text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0 mt-1">
                            ${index + 1}
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-gray-800">${step.title}</h5>
                                <span class="text-xs ${step.color.replace('bg-', 'text-')} font-semibold">${step.duration}</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">${step.description}</p>
                            
                            <!-- Key Activities -->
                            <div class="mb-3">
                                <div class="text-xs font-semibold text-gray-700 mb-1">Key Activities:</div>
                                <ul class="text-xs text-gray-600 space-y-1">
                                    ${step.activities.map(activity => `<li>‚Ä¢ ${activity}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <!-- Deliverables -->
                            <div class="mb-3">
                                <div class="text-xs font-semibold text-gray-700 mb-1">Key Deliverables:</div>
                                <div class="flex flex-wrap gap-1">
                                    ${step.deliverables.map(deliverable => `
                                        <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">${deliverable}</span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- RACI Roles -->
                            <div class="border-t pt-2">
                                <div class="text-xs font-semibold text-gray-700 mb-2">Roles (RACI):</div>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    ${step.roles.map(role => `
                                        <div class="flex items-center space-x-1">
                                            <span class="w-4 h-4 ${role.color} text-white rounded-full text-xs flex items-center justify-center">${role.type}</span>
                                            <span class="text-gray-600">${role.name}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // document.getElementById('use-case-process-steps').innerHTML = stepsHTML; // Removed - element no longer exists
        }

        function getUseCaseSpecificSteps(useCase) {
            const baseSteps = [
                {
                    title: "Step 1: Discover",
                    color: "bg-blue-500",
                    duration: "2-3 weeks"
                },
                {
                    title: "Step 2: Define", 
                    color: "bg-green-500",
                    duration: "3-4 weeks"
                },
                {
                    title: "Step 3: Standardize",
                    color: "bg-purple-500", 
                    duration: "2-3 weeks"
                },
                {
                    title: "Step 4: Protect",
                    color: "bg-orange-500",
                    duration: "1-2 weeks"
                },
                {
                    title: "Step 5: Report",
                    color: "bg-indigo-500",
                    duration: "1 week"
                }
            ];

            if (useCase.name === 'Product Description') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan product characterization systems and laboratory databases for nonclinical data assets",
                        activities: [
                            "Scan Quality Control Lab databases and LIMS systems",
                            "Inventory product testing data and batch records", 
                            "Map laboratory equipment APIs and data flows",
                            "Catalog product specification documents and certificates"
                        ],
                        deliverables: ["Product data asset inventory", "Laboratory system mapping", "LIMS data catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "System Admin", color: "bg-green-500"},
                            {type: "C", name: "Quality Control Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich product assets with FDA Section 2.8 nonclinical metadata and business definitions",
                        activities: [
                            "Add chemistry, toxicology, and pharmacology metadata",
                            "Define product characterization business terms",
                            "Create ISO test method definitions and standards", 
                            "Build regulatory product definition cards"
                        ],
                        deliverables: ["Nonclinical metadata dictionary", "Product definition cards", "ISO standard mappings"],
                        roles: [
                            {type: "R", name: "Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Quality Control Owner", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select product characterization CDEs and standardize for FDA Section 2.8 submissions",
                        activities: [
                            "Work with regulatory team to select product CDEs",
                            "Harmonize nicotine, tar, and CO measurement standards",
                            "Create FDA submission CDE register",
                            "Define product batch tracking transformation logic"
                        ],
                        deliverables: ["Product CDE register", "FDA Section 2.8 mapping", "Measurement standards"],
                        roles: [
                            {type: "R", name: "Quality Owner", color: "bg-blue-500"},
                            {type: "A", name: "Data Steward", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Affairs", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for product characterization data and regulatory compliance",
                        activities: [
                            "Set up product specification quality rules",
                            "Configure ISO test method validation checks",
                            "Create regulatory compliance monitoring dashboard",
                            "Define product quality alert thresholds"
                        ],
                        deliverables: ["Product quality rules", "ISO compliance dashboard", "Regulatory alerts"],
                        roles: [
                            {type: "R", name: "Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Quality Owner", color: "bg-green-500"},
                            {type: "C", name: "IT Operations", color: "bg-yellow-500"},
                            {type: "I", name: "Data Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate FDA Section 2.8 compliance reports and product characterization summaries",
                        activities: [
                            "Aggregate product testing coverage and quality scores",
                            "Generate FDA Section 2.8 submission reports",
                            "Create product characterization dashboard",
                            "Prepare regulatory review documentation"
                        ],
                        deliverables: ["FDA Section 2.8 report", "Product quality dashboard", "Regulatory documentation"],
                        roles: [
                            {type: "R", name: "Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Management", color: "bg-green-500"},
                            {type: "C", name: "Quality PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Quality Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else if (useCase.name === 'Product Impact on Individual Health') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan clinical databases and biomarker systems for individual health assessment data",
                        activities: [
                            "Scan clinical research databases and CRO systems",
                            "Inventory biomarker data and clinical observations",
                            "Map clinical endpoints and adverse event systems",
                            "Catalog subject demographics and exposure data"
                        ],
                        deliverables: ["Clinical data inventory", "Biomarker system mapping", "Clinical endpoint catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Clinical IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Clinical Research Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich clinical assets with biomarker metadata and health endpoint definitions",
                        activities: [
                            "Add exposure and effect biomarker metadata",
                            "Define clinical endpoint business terms",
                            "Create ICH bioanalytical method definitions",
                            "Build clinical assessment definition cards"
                        ],
                        deliverables: ["Clinical metadata dictionary", "Biomarker definition cards", "ICH standard mappings"],
                        roles: [
                            {type: "R", name: "Clinical Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Research Owner", color: "bg-green-500"},
                            {type: "C", name: "Clinical Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select biomarker CDEs and standardize for clinical health assessments",
                        activities: [
                            "Work with clinical team to select biomarker CDEs",
                            "Harmonize cotinine, NNAL measurement standards",
                            "Create clinical study CDE register",
                            "Define biomarker transformation and normalization logic"
                        ],
                        deliverables: ["Biomarker CDE register", "Clinical study mapping", "Biomarker standards"],
                        roles: [
                            {type: "R", name: "Clinical Owner", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Steward", color: "bg-green-500"},
                            {type: "C", name: "Clinical Governance", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for biomarker data and clinical study compliance",
                        activities: [
                            "Set up biomarker measurement quality rules",
                            "Configure clinical study protocol validation",
                            "Create clinical data quality monitoring dashboard",
                            "Define adverse event alert thresholds"
                        ],
                        deliverables: ["Biomarker quality rules", "Clinical compliance dashboard", "AE monitoring alerts"],
                        roles: [
                            {type: "R", name: "Clinical Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Owner", color: "bg-green-500"},
                            {type: "C", name: "Clinical IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Clinical Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate individual health assessment reports and biomarker analysis summaries",
                        activities: [
                            "Aggregate biomarker coverage and exposure metrics",
                            "Generate individual health impact reports",
                            "Create clinical endpoint analysis dashboard",
                            "Prepare health assessment documentation"
                        ],
                        deliverables: ["Health impact report", "Biomarker dashboard", "Clinical documentation"],
                        roles: [
                            {type: "R", name: "Clinical Steward", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Management", color: "bg-green-500"},
                            {type: "C", name: "Clinical PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Clinical Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else if (useCase.name === 'Product Impact on Population Health') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan surveillance systems and epidemiological databases for population health data",
                        activities: [
                            "Scan population surveillance and epidemiology systems",
                            "Inventory demographic and health outcome data",
                            "Map public health monitoring and survey systems",
                            "Catalog population exposure and usage pattern data"
                        ],
                        deliverables: ["Population data inventory", "Surveillance system mapping", "Epidemiology catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Public Health IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Epidemiology Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich population assets with epidemiological metadata and health outcome definitions",
                        activities: [
                            "Add demographic and behavioral metadata",
                            "Define population health outcome terms",
                            "Create WHO surveillance standard definitions",
                            "Build epidemiological study definition cards"
                        ],
                        deliverables: ["Population metadata dictionary", "Health outcome cards", "WHO standard mappings"],
                        roles: [
                            {type: "R", name: "Public Health Steward", color: "bg-blue-500"},
                            {type: "A", name: "Epidemiology Owner", color: "bg-green-500"},
                            {type: "C", name: "Public Health Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select population health CDEs and standardize for surveillance studies",
                        activities: [
                            "Work with epidemiology team to select population CDEs",
                            "Harmonize demographic and health outcome standards",
                            "Create population surveillance CDE register",
                            "Define population data aggregation and analysis logic"
                        ],
                        deliverables: ["Population CDE register", "Surveillance study mapping", "Demographics standards"],
                        roles: [
                            {type: "R", name: "Epidemiology Owner", color: "bg-blue-500"},
                            {type: "A", name: "Public Health Steward", color: "bg-green-500"},
                            {type: "C", name: "Public Health Governance", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for population data and epidemiological study compliance",
                        activities: [
                            "Set up population data representativeness rules",
                            "Configure epidemiological study design validation",
                            "Create population health monitoring dashboard",
                            "Define public health alert and surveillance thresholds"
                        ],
                        deliverables: ["Population quality rules", "Surveillance dashboard", "Public health alerts"],
                        roles: [
                            {type: "R", name: "Public Health Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Epidemiology Owner", color: "bg-green-500"},
                            {type: "C", name: "Public Health IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Public Health Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate population health impact reports and epidemiological analysis summaries",
                        activities: [
                            "Aggregate population coverage and health outcome metrics",
                            "Generate population health impact assessments",
                            "Create epidemiological trend analysis dashboard",
                            "Prepare public health policy documentation"
                        ],
                        deliverables: ["Population health report", "Epidemiology dashboard", "Policy documentation"],
                        roles: [
                            {type: "R", name: "Public Health Steward", color: "bg-blue-500"},
                            {type: "A", name: "Public Health Management", color: "bg-green-500"},
                            {type: "C", name: "Epidemiology PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Epidemiology Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else {
                // Comprehensive Regulatory Compliance or default
                return [
                    {
                        ...baseSteps[0],
                        description: "Comprehensive scan across all regulatory data sources for complete PMTA submission",
                        activities: [
                            "Scan product, clinical, and population health systems",
                            "Inventory cross-sectional regulatory data assets",
                            "Map FDA Sections 2.7-2.10 data requirements",
                            "Catalog comprehensive PMTA submission components"
                        ],
                        deliverables: ["Comprehensive data inventory", "Cross-section system mapping", "PMTA requirement catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Affairs Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich regulatory assets with comprehensive FDA submission metadata",
                        activities: [
                            "Add cross-sectional regulatory metadata",
                            "Define comprehensive PMTA business terms",
                            "Create FDA guidance standard definitions",
                            "Build regulatory submission definition cards"
                        ],
                        deliverables: ["Regulatory metadata dictionary", "PMTA definition cards", "FDA guidance mappings"],
                        roles: [
                            {type: "R", name: "Regulatory Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Owner", color: "bg-green-500"},
                            {type: "C", name: "FDA Compliance Officer", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select comprehensive regulatory CDEs and standardize for complete FDA submission",
                        activities: [
                            "Work with regulatory team to select cross-section CDEs",
                            "Harmonize product, clinical, and population standards",
                            "Create comprehensive PMTA CDE register",
                            "Define integrated regulatory data transformation logic"
                        ],
                        deliverables: ["Comprehensive CDE register", "PMTA section mapping", "Integrated standards"],
                        roles: [
                            {type: "R", name: "Regulatory Owner", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Steward", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Governance Team", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure comprehensive quality rules for complete regulatory compliance",
                        activities: [
                            "Set up cross-sectional regulatory quality rules",
                            "Configure PMTA submission validation checks",
                            "Create comprehensive regulatory monitoring dashboard",
                            "Define FDA submission readiness alert thresholds"
                        ],
                        deliverables: ["Comprehensive quality rules", "PMTA compliance dashboard", "FDA readiness alerts"],
                        roles: [
                            {type: "R", name: "Regulatory Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Owner", color: "bg-green-500"},
                            {type: "C", name: "Regulatory IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Regulatory Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate comprehensive FDA submission reports and regulatory compliance summaries",
                        activities: [
                            "Aggregate cross-sectional coverage and compliance metrics",
                            "Generate complete PMTA submission package",
                            "Create comprehensive regulatory dashboard",
                            "Prepare FDA submission documentation"
                        ],
                        deliverables: ["Complete PMTA submission", "Regulatory compliance dashboard", "FDA documentation"],
                        roles: [
                            {type: "R", name: "Regulatory Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Management", color: "bg-green-500"},
                            {type: "C", name: "Regulatory PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Regulatory Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            }
        }

        function runSelectedUseCaseProcess() {
            if (!selectedUseCase) {
                alert('Please select a use case first');
                return;
            }

            const resultsDiv = document.getElementById('selected-use-case-results');
            resultsDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h5 class="font-bold text-blue-800 mb-3">Running Governance Process for: ${selectedUseCase.name}</h5>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Discovered ${selectedUseCase.assets} data assets</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Identified ${selectedUseCase.cdes} high-priority CDEs</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated metadata catalog</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Applied quality rules</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated compliance report for ${selectedUseCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded text-sm">
                        <span class="font-semibold text-green-800">Success!</span> Governance process completed for ${selectedUseCase.name} with 94% confidence score.
                    </div>
                </div>
            `;
        }

        // General Process Flow Functions
        function startGeneralGovernanceProcess() {
            currentGeneralStep = 1;
            simulateGeneralProcess();
        }

        function simulateGeneralProcess() {
            const maxSteps = 5;
            const steps = ['Discover', 'Standardize', 'Define', 'Protect', 'Report'];
            
            if (currentGeneralStep <= maxSteps) {
                // Update step visualization
                for (let i = 1; i <= maxSteps; i++) {
                    const step = document.getElementById(`general-step-${i}`);
                    if (i < currentGeneralStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (i === currentGeneralStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                }

                // Show progress
                const resultsDiv = document.getElementById('general-process-results');
                const stepName = steps[currentGeneralStep - 1];
                resultsDiv.innerHTML = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                                ${currentGeneralStep}
                            </div>
                            <h4 class="font-bold text-blue-800">Step ${currentGeneralStep}: ${stepName}</h4>
                        </div>
                        <div class="text-sm text-blue-700">
                            ${getStepDescription(currentGeneralStep)}
                        </div>
                        <div class="mt-3">
                            <div class="bg-blue-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(currentGeneralStep/maxSteps)*100}%"></div>
                            </div>
                        </div>
                    </div>
                `;

                currentGeneralStep++;
                
                if (currentGeneralStep <= maxSteps) {
                    setTimeout(simulateGeneralProcess, 2000);
                } else {
                    showGeneralCompletionResults();
                }
            }
        }

        function getStepDescription(step) {
            const descriptions = {
                1: "üîç AI scanning 50+ data systems, identifying 127 related data fields...",
                2: "üìã Analyzing data standards, suggesting 44 high-priority CDEs with 94-96% confidence...", 
                3: "üìù Generating metadata definitions, extracting business knowledge from documents...",
                4: "üõ°Ô∏è Applying quality rules, setting up data governance controls...",
                5: "üìä Creating compliance reports for FDA Sections 2.7-2.10..."
            };
            return descriptions[step] || "";
        }

        function showGeneralCompletionResults() {
            const resultsDiv = document.getElementById('general-process-results');
            resultsDiv.innerHTML = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <h4 class="font-bold text-green-800 mb-4 text-xl">üéâ Complete Governance Process Finished!</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Assets Processed:</div>
                            <div>‚Ä¢ 11 total data assets discovered</div>
                            <div>‚Ä¢ 127 data fields cataloged</div>
                            <div>‚Ä¢ 44 CDEs identified</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Quality Metrics:</div>
                            <div>‚Ä¢ 91% overall quality score</div>
                            <div>‚Ä¢ 85% time reduction achieved</div>
                            <div>‚Ä¢ $2M+ annual ROI projected</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded">
                        <span class="font-semibold">Next Steps:</span> Review AI suggestions, validate CDEs with domain experts, proceed to FDA submission preparation.
                    </div>
                </div>
            `;
        }

        function resetGeneralProcess() {
            currentGeneralStep = 1;
            document.querySelectorAll('[id^="general-step-"]').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.getElementById('general-step-1').classList.add('active');
            document.getElementById('general-process-results').innerHTML = '';
        }

        // AI Assistant Functions (Tab 3)
        function initializeAIAssistant() {
            // Load initial AI suggestions
            loadAISmartSuggestions();
        }

        function aiSearchData() {
            const query = document.getElementById('ai-search-input').value;
            const useCase = document.getElementById('ai-use-case-filter').value;
            
            if (!query.trim()) {
                alert('Please enter a search query');
                return;
            }

            // Show loading state
            const resultsDiv = document.getElementById('ai-discovery-results');
            resultsDiv.innerHTML = `
                <div class="text-center py-8">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
                    <p class="text-gray-600">AI is analyzing your request...</p>
                </div>
            `;

            // Simulate AI processing
            setTimeout(() => {
                showAIResults(query, useCase);
                showAIInsights(query);
            }, 2000);
        }

        function showAIResults(query, useCase) {
            const resultsDiv = document.getElementById('ai-discovery-results');
            
            // Generate relevant results based on query
            let results = '';
            
            if (query.toLowerCase().includes('pending') || query.toLowerCase().includes('cde')) {
                results = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <h4 class="font-bold text-yellow-800 mb-4">
                            <i class="fas fa-clock mr-2"></i>Pending CDE Approvals Found
                        </h4>
                    <div class="space-y-3">
                            <div class="bg-white p-4 rounded border">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-semibold">Clinical_Endpoint</div>
                                        <div class="text-sm text-gray-600">Awaiting Dr. Sarah Chen approval</div>
                        </div>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">2 hours ago</span>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-semibold">Exposure_Biomarker</div>
                                        <div class="text-sm text-gray-600">Pending technical review</div>
                                    </div>
                                    <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs">1 day ago</span>
                                </div>
                        </div>
                    </div>
                </div>
            `;
            } else if (query.toLowerCase().includes('cotinine') || query.toLowerCase().includes('biomarker')) {
                results = `
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6">
                        <h4 class="font-bold text-purple-800 mb-4">
                            <i class="fas fa-flask mr-2"></i>Cotinine Biomarker Data Located
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded border">
                                <div class="font-semibold">Clinical_Research_DB.biomarkers.cotinine_levels</div>
                                <div class="text-sm text-gray-600 mt-1">Units: ng/mL | Range: 0.1-500.0 | 89% complete</div>
                                <div class="text-xs text-purple-600 mt-2">Quality Score: 94.2%</div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="font-semibold">LIMS_System.tobacco_metabolites.cotinine</div>
                                <div class="text-sm text-gray-600 mt-1">Units: mg/L | Range: 0.05-1000 | 76% complete</div>
                                <div class="text-xs text-orange-600 mt-2">Needs standardization</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (query.toLowerCase().includes('quality') || query.toLowerCase().includes('metric')) {
                results = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <h4 class="font-bold text-green-800 mb-4">
                            <i class="fas fa-chart-line mr-2"></i>Current Data Quality Status
                        </h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded border text-center">
                                <div class="text-2xl font-bold text-green-600">94.7%</div>
                                <div class="text-sm text-gray-600">Overall Quality</div>
                                <div class="text-xs text-green-600">‚Üë 2.3% this week</div>
                            </div>
                            <div class="bg-white p-4 rounded border text-center">
                                <div class="text-2xl font-bold text-blue-600">67%</div>
                                <div class="text-sm text-gray-600">CDE Progress</div>
                                <div class="text-xs text-blue-600">6 of 9 approved</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (query.toLowerCase().includes('sme') || query.toLowerCase().includes('team')) {
                results = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                        <h4 class="font-bold text-blue-800 mb-4">
                            <i class="fas fa-users mr-2"></i>SME Availability Status
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded border flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <div>
                                        <div class="font-semibold">Dr. Sarah Chen</div>
                                        <div class="text-sm text-gray-600">Data Steward ‚Ä¢ Available now</div>
                                    </div>
                                </div>
                                <button onclick="mentionTeamMember('sarah')" class="bg-green-500 text-white px-3 py-1 rounded text-sm">Contact</button>
                            </div>
                            <div class="bg-white p-4 rounded border flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <div>
                                        <div class="font-semibold">Mike Johnson</div>
                                        <div class="text-sm text-gray-600">Data Steward ‚Ä¢ Away until 3 PM</div>
                                    </div>
                                </div>
                                <button class="bg-gray-300 text-gray-600 px-3 py-1 rounded text-sm" disabled>Away</button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                results = `
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 text-center">
                        <i class="fas fa-search text-3xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-4">No specific results found for "${query}"</p>
                        <p class="text-sm text-gray-500">Try searching for "pending CDEs", "cotinine biomarkers", "quality metrics", or "SME availability"</p>
                    </div>
                `;
            }
            
            resultsDiv.innerHTML = results;
        }

        function showAIInsights(query) {
            const insightsPanel = document.getElementById('ai-insights-panel');
            const insightsContent = document.getElementById('ai-insights-content');
            
            let insights = '';
            
            if (query.toLowerCase().includes('pending') || query.toLowerCase().includes('cde')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üí° AI Recommendation</h5>
                        <p class="text-sm text-gray-600">Dr. Sarah Chen is currently online and available for CDE reviews. Consider scheduling a quick review session to accelerate approval process.</p>
                    </div>
                `;
            } else if (query.toLowerCase().includes('cotinine')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üîß Standardization Needed</h5>
                        <p class="text-sm text-gray-600">Found unit inconsistencies in cotinine measurements (ng/mL vs mg/L). AI suggests standardizing to ng/mL for ICH E6 compliance.</p>
                    </div>
                `;
            } else if (query.toLowerCase().includes('quality')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üìà Quality Trend</h5>
                        <p class="text-sm text-gray-600">Data quality improved 2.3% this week due to automated validation rules. Consider expanding these rules to other data domains.</p>
                    </div>
                `;
            } else {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">ü§ñ AI Tip</h5>
                        <p class="text-sm text-gray-600">Use specific terms like "biomarker", "CDE", "quality", or "approval" for more targeted results.</p>
                </div>
            `;
            }
            
            insightsContent.innerHTML = insights;
            insightsPanel.classList.remove('hidden');
        }

        function loadAISmartSuggestions() {
            const suggestionsDiv = document.getElementById('ai-smart-suggestions');
            const suggestions = [
                {
                    icon: "üéØ",
                    title: "Focus on Population Health Use Case",
                    description: "Based on current regulatory trends, prioritize Population Health compliance data.",
                    action: "View Use Case"
                },
                {
                    icon: "üìä", 
                    title: "Validate High-Priority CDEs",
                    description: "44 CDEs identified with >94% confidence. Review with domain experts.",
                    action: "Review CDEs"
                },
                {
                    icon: "üîç",
                    title: "Discover Missing Biomarker Data",
                    description: "AI detected potential gaps in biomarker data for FDA Section 2.8.",
                    action: "Search Data"
                }
            ];

            suggestionsDiv.innerHTML = suggestions.map(suggestion => `
                <div class="bg-white border border-purple-200 rounded-lg p-4 hover:shadow-md transition-all">
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">${suggestion.icon}</div>
                        <div class="flex-1">
                            <div class="font-semibold text-purple-800">${suggestion.title}</div>
                            <div class="text-sm text-gray-600 mt-1">${suggestion.description}</div>
                            <button class="mt-2 px-3 py-1 bg-purple-100 text-purple-700 rounded text-xs hover:bg-purple-200">
                                ${suggestion.action}
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Start with the first tab active
            switchTab('process');
            populateLifecycleSteps(); // Added this line
        });

        // Enhanced Process Navigation Functions
        let currentEnhancedStep = 1;
        let processRunning = false;
        let processPaused = false;
        
        function selectProcessStep(stepNumber) {
            // Update visual selection
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`enhanced-step-${i}`);
                if (i === stepNumber) {
                    if (!step.classList.contains('border-blue-500')) {
                        step.classList.remove('border-gray-200');
                        step.classList.add('border-blue-500');
                        step.querySelector('.w-12').classList.remove('bg-gray-400');
                        step.querySelector('.w-12').classList.add('bg-blue-500');
                    }
                } else {
                    if (step.classList.contains('border-blue-500') && !processRunning) {
                        step.classList.remove('border-blue-500');
                        step.classList.add('border-gray-200');
                        step.querySelector('.w-12').classList.remove('bg-blue-500');
                        step.querySelector('.w-12').classList.add('bg-gray-400');
                    }
                }
            }
            
            // Update step details
            updateStepDetails(stepNumber);
        }
        
        function updateStepDetails(stepNumber) {
            const stepDetails = {
                1: {
                    title: "Step 1: Discover - Detailed Information",
                    activities: [
                        "‚Ä¢ Scan systems, data lakes, and file shares for assets",
                        "‚Ä¢ Create inventory of existing tables, fields, and interfaces",
                        "‚Ä¢ Map system-to-table-to-field relationships",
                        "‚Ä¢ Identify potential data quality issues"
                    ],
                    success: [
                        "‚Ä¢ 95%+ asset discovery coverage",
                        "‚Ä¢ Complete system mapping documented",
                        "‚Ä¢ Initial data quality baseline established",
                        "‚Ä¢ Asset inventory database created"
                    ]
                },
                2: {
                    title: "Step 2: Define - Detailed Information",
                    activities: [
                        "‚Ä¢ Enrich assets with business and technical metadata",
                        "‚Ä¢ Draft field definitions with sample values and refresh frequency",
                        "‚Ä¢ Collaborate with Business SMEs to create metadata dictionary",
                        "‚Ä¢ Create field definition cards for business validation"
                    ],
                    success: [
                        "‚Ä¢ 85%+ fields have business definitions",
                        "‚Ä¢ Complete metadata dictionary created",
                        "‚Ä¢ Field definition cards approved by business",
                        "‚Ä¢ Technical metadata documented"
                    ]
                },
                3: {
                    title: "Step 3: Standardize - Detailed Information",
                    activities: [
                        "‚Ä¢ Work with business to select Critical Data Elements (CDEs)",
                        "‚Ä¢ Harmonize naming rules, code values, and units",
                        "‚Ä¢ Create CDE register with standardized definitions",
                        "‚Ä¢ Develop standard mapping and transformation logic"
                    ],
                    success: [
                        "‚Ä¢ 90%+ CDE coverage rate",
                        "‚Ä¢ CDE register completed and approved",
                        "‚Ä¢ Standard mapping/transformation logic defined",
                        "‚Ä¢ Business validation passed"
                    ]
                },
                4: {
                    title: "Step 4: Protect - Detailed Information",
                    activities: [
                        "‚Ä¢ Configure quality rules for CDEs (format, range, cross-field checks)",
                        "‚Ä¢ Set up monitoring and alert mechanisms",
                        "‚Ä¢ Create quality dashboard for real-time monitoring",
                        "‚Ä¢ Define thresholds and escalation procedures"
                    ],
                    success: [
                        "‚Ä¢ Quality rules library completed",
                        "‚Ä¢ Real-time monitoring dashboard active",
                        "‚Ä¢ Alert mechanisms configured",
                        "‚Ä¢ 95%+ data quality compliance"
                    ]
                },
                5: {
                    title: "Step 5: Report - Detailed Information",
                    activities: [
                        "‚Ä¢ Aggregate asset coverage and quality scores",
                        "‚Ä¢ Generate rule execution status reports",
                        "‚Ä¢ Produce governance KPIs and trend reports",
                        "‚Ä¢ Create visualized governance dashboard"
                    ],
                    success: [
                        "‚Ä¢ Comprehensive governance report generated",
                        "‚Ä¢ Executive dashboard with KPIs active",
                        "‚Ä¢ Next-step improvement plan created",
                        "‚Ä¢ Stakeholder review completed"
                    ]
                }
            };
            
            const data = stepDetails[stepNumber];
            document.getElementById('step-details').innerHTML = `
                <h4 class="text-xl font-bold mb-4 text-gray-800">${data.title}</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h5 class="font-semibold text-gray-700 mb-2">Key Activities:</h5>
                        <ul class="text-sm text-gray-600 space-y-1">
                            ${data.activities.map(activity => `<li>${activity}</li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h5 class="font-semibold text-gray-700 mb-2">Success Criteria:</h5>
                        <ul class="text-sm text-gray-600 space-y-1">
                            ${data.success.map(criterion => `<li>${criterion}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }
        
        function startEnhancedGovernanceProcess() {
            if (processRunning) return;
            
            processRunning = true;
            processPaused = false;
            currentEnhancedStep = 1;
            
            // Show pause button
            document.getElementById('pause-btn').style.display = 'inline-block';
            
            // Reset all progress
            for (let i = 1; i <= 5; i++) {
                updateStepProgress(i, 0);
            }
            updateOverallProgress(0, "In Progress...");
            
            // Start the process
            runEnhancedStep(1);
        }
        
        function runEnhancedStep(stepNumber) {
            if (stepNumber > 5 || isProcessPaused) return;
            
            const stepNames = ['', 'Discover', 'Define', 'Standardize', 'Protect', 'Report'];
            const stepActions = {
                1: [
                    'Scanning enterprise systems for data assets...',
                    'Cataloging databases, tables, and fields...',
                    'Mapping system relationships...',
                    'Creating initial data inventory...'
                ],
                2: [
                    'Adding business metadata to assets...',
                    'Drafting field definitions with SMEs...',
                    'Creating metadata dictionary...',
                    'Building field definition cards...'
                ],
                3: [
                    'Selecting Critical Data Elements with business...',
                    'Harmonizing naming conventions...',
                    'Creating CDE register...',
                    'Defining standard transformation logic...'
                ],
                4: [
                    'Configuring quality rules for CDEs...',
                    'Setting up monitoring mechanisms...',
                    'Creating quality dashboard...',
                    'Defining alert thresholds...'
                ],
                5: [
                    'Aggregating coverage and quality metrics...',
                    'Generating governance KPI reports...',
                    'Creating visualized dashboard...',
                    'Preparing improvement recommendations...'
                ]
            };
            
            const stepOutputs = {
                1: ['Initial data-asset inventory', 'System-table-field mapping'],
                2: ['Metadata dictionary (Data Dictionary)', 'Field definition cards'],
                3: ['CDE register', 'Standard mapping/transformation logic'],
                4: ['Quality-rule library', 'Quality dashboard/alert mechanism'],
                5: ['Data Governance Report (visualized)', 'Next-step improvement plan']
            };
            
            // Update step visual state
            const stepEl = document.getElementById(`enhanced-step-${stepNumber}`);
            const colors = ['blue', 'green', 'purple', 'orange', 'indigo'];
            const stepColor = colors[stepNumber - 1];
            
            stepEl.classList.remove('border-gray-200');
            stepEl.classList.add(`border-${stepColor}-500`);
            stepEl.querySelector('.w-12').classList.remove('bg-gray-400');
            stepEl.querySelector('.w-12').classList.add(`bg-${stepColor}-500`);
            
            // Select this step
            selectProcessStep(stepNumber);
            
            // Simulate progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                if (!processRunning || processPaused) {
                    clearInterval(progressInterval);
                    return;
                }
                
                progress += 5;
                updateStepProgress(stepNumber, progress);
                updateOverallProgress((stepNumber - 1) * 20 + (progress / 5), "In Progress...");
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // Mark as completed
                    stepEl.classList.add('completed');
                    
                    // Show step results
                    showStepResults(stepNumber);
                    
                    // Move to next step or complete
                    if (stepNumber < 5) {
                        setTimeout(() => {
                            runEnhancedStep(stepNumber + 1);
                        }, 1000);
                    } else {
                        completeEnhancedProcess();
                    }
                }
            }, 200);
        }
        
        function updateStepProgress(stepNumber, percentage) {
            const progressEl = document.getElementById(`step-${stepNumber}-progress`);
            const barEl = document.getElementById(`step-${stepNumber}-bar`);
            
            if (progressEl && barEl) {
                progressEl.textContent = `${percentage}%`;
                barEl.style.width = `${percentage}%`;
            }
        }
        
        function updateOverallProgress(percentage, status) {
            const progressEl = document.getElementById('overall-progress-text');
            const barEl = document.getElementById('overall-progress-bar');
            
            if (progressEl && barEl) {
                progressEl.textContent = status;
                barEl.style.width = `${percentage}%`;
            }
        }
        
        function showStepResults(stepNumber) {
            const stepNames = ['Discovery', 'Definition', 'Standardization', 'Protection', 'Reporting'];
            const resultsDiv = document.getElementById('enhanced-process-results');
            
            const currentResults = resultsDiv.innerHTML;
            const newResult = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold">
                            ‚úì
                        </div>
                        <div>
                            <h5 class="font-bold text-green-800">Step ${stepNumber}: ${stepNames[stepNumber - 1]} - Completed</h5>
                            <p class="text-sm text-green-700">${getStepCompletionMessage(stepNumber)}</p>
                        </div>
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = currentResults + newResult;
        }
        
        function getStepCompletionMessage(stepNumber) {
            const messages = {
                1: "Discovered 127 data fields across 50+ systems, created initial data-asset inventory with complete system mapping",
                2: "Enriched assets with business metadata, created metadata dictionary and field definition cards with 85%+ coverage",
                3: "Selected 44 Critical Data Elements with business teams, created CDE register with standardized transformation logic",
                4: "Configured quality rules for all CDEs, established real-time monitoring dashboard with alert mechanisms",
                5: "Generated comprehensive governance report with KPIs, created next-step improvement plan for stakeholder review"
            };
            return messages[stepNumber] || "";
        }
        
        function completeEnhancedProcess() {
            processRunning = false;
            document.getElementById('pause-btn').style.display = 'none';
            updateOverallProgress(100, "Completed");
            
            // Show final completion message
            const resultsDiv = document.getElementById('enhanced-process-results');
            resultsDiv.innerHTML += `
                <div class="bg-gradient-to-r from-green-50 to-blue-50 border border-green-300 rounded-lg p-6 mt-4">
                    <h4 class="text-xl font-bold text-green-800 mb-4">üéâ Complete Data Governance Process Finished!</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Processing Statistics:</div>
                            <div>‚Ä¢ 11 data assets</div>
                            <div>‚Ä¢ 127 data fields</div>
                            <div>‚Ä¢ 44 CDEs</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Quality Metrics:</div>
                            <div>‚Ä¢ 91% overall quality score</div>
                            <div>‚Ä¢ 85% time savings</div>
                            <div>‚Ä¢ 96% standardization coverage</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Business Value:</div>
                            <div>‚Ä¢ $2M+ annual ROI</div>
                            <div>‚Ä¢ 2-3 weeks time to value</div>
                            <div>‚Ä¢ 98% compliance readiness</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded border">
                        <span class="font-semibold text-gray-800">Next Steps:</span> 
                        <span class="text-gray-600">Review AI suggestions, validate CDEs with domain experts, prepare FDA submission materials</span>
                    </div>
                </div>
            `;
        }
        
        function pauseProcess() {
            processPaused = !processPaused;
            const pauseBtn = document.getElementById('pause-btn');
            
            if (processPaused) {
                pauseBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Resume';
                pauseBtn.classList.remove('bg-yellow-500', 'hover:bg-yellow-600');
                pauseBtn.classList.add('bg-green-500', 'hover:bg-green-600');
            } else {
                pauseBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Pause';
                pauseBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                pauseBtn.classList.add('bg-yellow-500', 'hover:bg-yellow-600');
                
                // Resume process
                if (currentEnhancedStep <= 5) {
                    runEnhancedStep(currentEnhancedStep);
                }
            }
        }
        
        function resetEnhancedProcess() {
            processRunning = false;
            processPaused = false;
            currentEnhancedStep = 1;
            
            // Hide pause button
            document.getElementById('pause-btn').style.display = 'none';
            
            // Reset all steps
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById(`enhanced-step-${i}`);
                stepEl.classList.remove('completed', 'border-blue-500', 'border-green-500', 'border-purple-500', 'border-orange-500', 'border-indigo-500');
                stepEl.classList.add('border-gray-200');
                
                const stepCircle = stepEl.querySelector('.w-12');
                stepCircle.classList.remove('bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-indigo-500');
                stepCircle.classList.add('bg-gray-400');
                
                updateStepProgress(i, 0);
            }
            
            // Reset first step to active
            selectProcessStep(1);
            updateOverallProgress(0, "Not Started");
            
            // Clear results
            document.getElementById('enhanced-process-results').innerHTML = '';
        }

        // Data Assets Panel
        function loadDataAssets() {
            // Implement data assets loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/data-assets')
                .then(response => response.json())
                .then(data => {
                    // Process and display the data assets
                    displayDataAssets(data);
                })
                .catch(error => console.error('Error loading data assets:', error));
        }

        function displayDataAssets(data) {
            // Implement logic to display data assets
            // This could involve creating HTML elements to display the data assets
            // For example, you could use innerHTML to insert the data assets into a container
            document.getElementById('data-assets-content').innerHTML = data.map(asset => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${asset.name}</h5>
                    <p class="text-sm text-gray-600">${asset.description}</p>
                </div>
            `).join('');
        }

        // Process Steps Breakdown
        function loadProcessSteps() {
            // Implement process steps loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/process-steps')
                .then(response => response.json())
                .then(data => {
                    // Process and display the process steps
                    displayProcessSteps(data);
                })
                .catch(error => console.error('Error loading process steps:', error));
        }

        function displayProcessSteps(steps) {
            // Implement logic to display process steps
            // This could involve creating HTML elements to display the process steps
            // For example, you could use innerHTML to insert the process steps into a container
            document.getElementById('process-steps-breakdown').innerHTML = steps.map(step => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${step.title}</h5>
                    <p class="text-sm text-gray-600">${step.description}</p>
                </div>
            `).join('');
        }

        // CDEs Panel
        function loadCDEs() {
            // Implement CDEs loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/cde')
                .then(response => response.json())
                .then(data => {
                    // Process and display the CDEs
                    displayCDEs(data);
                })
                .catch(error => console.error('Error loading CDEs:', error));
        }

        function displayCDEs(cde) {
            // Implement logic to display CDEs
            // This could involve creating HTML elements to display the CDEs
            // For example, you could use innerHTML to insert the CDEs into a container
            document.getElementById('cde-content').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${cde.name}</h5>
                    <p class="text-sm text-gray-600">${cde.description}</p>
                </div>
            `;
        }

        function showDetailedStep(stepNumber) {
            // Update button states
            document.querySelectorAll('.detailed-step-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-500', 'text-white');
                btn.classList.add('bg-gray-300', 'text-gray-600');
            });
            
            document.getElementById(`detailed-step-${stepNumber}`).classList.remove('bg-gray-300', 'text-gray-600');
            document.getElementById(`detailed-step-${stepNumber}`).classList.add('active', 'bg-blue-500', 'text-white');
            
            // Hide all step content
            document.querySelectorAll('.detailed-step-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected step content
            document.getElementById(`detailed-step-content-${stepNumber}`).classList.remove('hidden');
        }

        // Step 3: Standardize Interface
        function loadStandardizeInterface() {
            // Implement logic to load the standardize interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/standardize-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the standardize interface
                    displayStandardizeInterface(data);
                })
                .catch(error => console.error('Error loading standardize interface:', error));
        }

        function displayStandardizeInterface(interfaceData) {
            // Implement logic to display the standardize interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('standardize-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Standardize Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Step 4: Protect Interface
        function loadProtectInterface() {
            // Implement logic to load the protect interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/protect-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the protect interface
                    displayProtectInterface(data);
                })
                .catch(error => console.error('Error loading protect interface:', error));
        }

        function displayProtectInterface(interfaceData) {
            // Implement logic to display the protect interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('protect-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Protect Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Step 5: Report Interface
        function loadReportInterface() {
            // Implement logic to load the report interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/report-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the report interface
                    displayReportInterface(data);
                })
                .catch(error => console.error('Error loading report interface:', error));
        }

        function displayReportInterface(interfaceData) {
            // Implement logic to display the report interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('report-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Report Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Workflow Interaction Functions
        let currentWorkflowStep = 3;
        let workflowProgress = {
            overall: 73,
            currentStep: 67,
            estimatedCompletion: "2.5 days"
        };

        function jumpToWorkflowStep(stepNumber) {
            // Switch to Governance Project tab
            showTab('use-cases-content');
            
            // Select the use case (assuming Product Impact on Individual Health)
            setTimeout(() => {
                selectUseCase('Product Impact on Individual Health');
                
                // Wait for the detailed interface to load, then show the specific step
                setTimeout(() => {
                    showDetailedStep(stepNumber);
                }, 500);
            }, 300);
        }

        function markStepComplete(stepNumber) {
            // Update step status
            workflowProgress.currentStep = 100;
            currentWorkflowStep = stepNumber + 1;
            workflowProgress.overall = Math.min(100, workflowProgress.overall + 20);
            
            // Update UI
            updateWorkflowStatusBar();
            
            // Show completion notification
            showNotification(`Step ${stepNumber} marked as complete! üéâ`, 'success');
            
            // Auto-advance to next step if not at the end
            if (stepNumber < 5) {
                setTimeout(() => {
                    jumpToWorkflowStep(stepNumber + 1);
                }, 2000);
            }
        }

        function updateWorkflowStatusBar() {
            // This would update the workflow status bar in the UI
            // Implementation depends on specific UI structure
            console.log(`Workflow updated: Step ${currentWorkflowStep}, Progress: ${workflowProgress.overall}%`);
        }

        function aiContextSearch(query) {
            // Update search input
            document.getElementById('ai-search-input').value = query;
            
            // Simulate AI search with contextual results
            const resultsDiv = document.getElementById('ai-discovery-results');
            resultsDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-robot text-blue-600 mr-2"></i>
                        <span class="font-semibold text-blue-800">AI Search Results for: "${query}"</span>
                    </div>
                    <div class="space-y-3">
                        ${getContextualSearchResults(query)}
                    </div>
                </div>
            `;
        }

        function getContextualSearchResults(query) {
            const results = {
                'show me pending CDE approvals': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-green-700">2 CDEs Pending Approval</div>
                        <div class="text-sm text-gray-600">Clinical_Endpoint, Exposure_Biomarker</div>
                        <div class="text-xs text-blue-600 mt-1">SME: Dr. Sarah Chen (Available now)</div>
                    </div>
                `,
                'cotinine standardization rules': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-purple-700">Cotinine Standardization Rules</div>
                        <div class="text-sm text-gray-600">Units: ng/mL, Range: 0.1-500.0, Format: DECIMAL(8,2)</div>
                        <div class="text-xs text-purple-600 mt-1">Based on ICH E6 Guidelines</div>
                    </div>
                `,
                'SME review schedule': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-green-700">Next SME Review</div>
                        <div class="text-sm text-gray-600">June 3, 2024 - 2:00 PM with Dr. Sarah Chen</div>
                        <div class="text-xs text-green-600 mt-1">3 CDEs scheduled for review</div>
                    </div>
                `,
                'biomarker harmonization': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-orange-700">Biomarker Harmonization Status</div>
                        <div class="text-sm text-gray-600">6/9 CDEs harmonized (67% complete)</div>
                        <div class="text-xs text-orange-600 mt-1">Est. completion: Tomorrow</div>
                    </div>
                `
            };
            
            return results[query] || `
                <div class="bg-white p-3 rounded border">
                    <div class="font-medium text-gray-700">No specific results found</div>
                    <div class="text-sm text-gray-600">Try one of the suggested context queries</div>
                </div>
            `;
        }

        function mentionTeamMember(member) {
            const members = {
                'sarah': 'Dr. Sarah Chen (Data Steward)',
                'mike': 'Mike Johnson (Data Steward)',
                'lisa': 'Lisa Park (Data Owner)'
            };
            
            const searchInput = document.getElementById('ai-search-input');
            searchInput.value = `@${members[member]} `;
            searchInput.focus();
            
            showNotification(`Mentioning ${members[member]}`, 'info');
        }

        function scheduleReview() {
            showNotification('Review scheduled for June 3, 2024 at 2:00 PM', 'success');
            
            // Update the workflow alerts
            const alertsDiv = document.getElementById('workflow-ai-alerts');
            alertsDiv.innerHTML = `
                <div class="bg-green-500 bg-opacity-30 border border-green-400 rounded-lg p-3 flex items-center">
                    <i class="fas fa-calendar-check text-green-200 mr-3"></i>
                    <div class="text-sm">
                        <strong>Review Scheduled:</strong> June 3, 2024 at 2:00 PM with Dr. Sarah Chen for 3 pending CDEs.
                    </div>
                </div>
            `;
        }

        function scheduleOptimalReview() {
            scheduleReview();
            showNotification('Scheduled during Dr. Chen\'s optimal review time (2-4 PM)', 'success');
        }

        function batchReviewCDEs() {
            showNotification('Batch review initiated for 3 remaining CDEs', 'info');
            
            // Simulate progress update
            setTimeout(() => {
                workflowProgress.currentStep = 89;
                showNotification('Batch review 89% complete', 'info');
            }, 2000);
        }

        function generateProgressReport() {
            showNotification('Generating comprehensive progress report...', 'info');
            
            setTimeout(() => {
                const reportWindow = window.open('', '_blank');
                reportWindow.document.write(`
                    <html>
                        <head><title>Workflow Progress Report</title></head>
                        <body style="font-family: Arial, sans-serif; padding: 20px;">
                            <h1>Data Governance Workflow Progress Report</h1>
                            <h2>Product Impact on Individual Health</h2>
                            <p><strong>Overall Progress:</strong> ${workflowProgress.overall}%</p>
                            <p><strong>Current Step:</strong> Step ${currentWorkflowStep} - Standardize</p>
                            <p><strong>Step Progress:</strong> ${workflowProgress.currentStep}%</p>
                            <p><strong>Estimated Completion:</strong> ${workflowProgress.estimatedCompletion}</p>
                            <h3>Key Achievements:</h3>
                            <ul>
                                <li>157 biomarker fields cataloged</li>
                                <li>6 of 9 CDEs approved</li>
                                <li>94.7% data quality score achieved</li>
                                <li>Team collaboration rate: 95%</li>
                            </ul>
                        </body>
                    </html>
                `);
                showNotification('Progress report generated successfully', 'success');
            }, 1500);
        }

        function escalateToManager() {
            showNotification('Issue escalated to Data Governance Manager', 'warning');
            
            // Update alerts
            const alertsDiv = document.getElementById('workflow-ai-alerts');
            alertsDiv.innerHTML = `
                <div class="bg-orange-500 bg-opacity-30 border border-orange-400 rounded-lg p-3 flex items-center">
                    <i class="fas fa-exclamation-triangle text-orange-200 mr-3"></i>
                    <div class="text-sm">
                        <strong>Escalated:</strong> CDE approval delays escalated to manager. Expected response within 2 hours.
                    </div>
                </div>
            `;
        }

        function scheduleTeamMeeting() {
            showNotification('Team meeting scheduled for tomorrow at 10:00 AM', 'success');
            
            // Update collaboration area
            setTimeout(() => {
                showNotification('Calendar invites sent to all team members', 'info');
            }, 1000);
        }

        function viewUseCaseSuggestion(useCase) {
            // Switch to use cases tab and select the suggested use case
            showTab('use-cases-content');
            setTimeout(() => {
                if (useCase === 'population') {
                    selectUseCase('Product Impact on Population Health');
                }
            }, 500);
        }

        function reviewCDESuggestion() {
            aiContextSearch('show me pending CDE approvals');
        }

        function discoverMissingData() {
            aiContextSearch('find missing biomarker data FDA Section 2.8');
        }

        function showNotification(message, type = 'info') {
            const colors = {
                'success': 'bg-green-100 border-green-400 text-green-700',
                'error': 'bg-red-100 border-red-400 text-red-700',
                'warning': 'bg-yellow-100 border-yellow-400 text-yellow-700',
                'info': 'bg-blue-100 border-blue-400 text-blue-700'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-3 border rounded-lg ${colors[type]} z-50 shadow-lg`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-3 text-lg leading-none">&times;</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Initialize workflow state when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateWorkflowStatusBar();
        });

        // AI-Powered Data Discovery (Simplified) Functions
        function setAIExample(example) {
            const examples = {
                'pending CDEs': 'Show me pending CDE approvals',
                'cotinine biomarkers': 'Where are cotinine biomarkers?',
                'quality metrics': 'What is the current data quality status?',
                'SME availability': 'Which SMEs are available for review?'
            };
            
            document.getElementById('ai-search-input').value = examples[example] || example;
            aiSearchData();
        }

        // AI Insights Panel
        function loadAIInsights() {
            // Implement logic to load AI insights based on the search query
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/ai-insights')
                .then(response => response.json())
                .then(data => {
                    // Process and display the AI insights
                    displayAIInsights(data);
                })
                .catch(error => console.error('Error loading AI insights:', error));
        }

        // AI Insights Panel
        function displayAIInsights(insights) {
            const insightsDiv = document.getElementById('ai-insights-panel');
            insightsDiv.innerHTML = insights.map(insight => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${insight.title}</h5>
                    <p class="text-sm text-gray-600">${insight.description}</p>
                </div>
            `).join('');
        }

        // AI Governance Copilot Functions
        let chatHistory = [];
        
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;
            
            // Add user message
            addChatMessage('user', message);
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                addChatMessage('ai', response);
            }, 1000);
        }
        
        function addChatMessage(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-bold">You</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-blue-100 rounded-lg p-3">
                            <p class="text-gray-800">${message}</p>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Just now</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-bold">AI</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-gray-100 rounded-lg p-3">
                            <p class="text-gray-800">${message}</p>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Just now</div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            // Context-aware responses based on current workflow
            if (lowerMessage.includes('cde') || lowerMessage.includes('clinical')) {
                if (lowerMessage.includes('approve') || lowerMessage.includes('approval')) {
                    return "I can help you with CDE approvals! Currently, you have 6 CDEs that are ready for approval and 2 pending review. The 'Clinical_Endpoint' CDE specifically needs Dr. Sarah Chen's approval. Would you like me to schedule a review session or show you the detailed CDE status?";
                }
                if (lowerMessage.includes('status') || lowerMessage.includes('progress')) {
                    return "Here's your current CDE standardization status:<br/><br/>‚úÖ <strong>Approved (6):</strong> Blood_Pressure, Heart_Rate, Glucose_Level, Cholesterol_Total, BMI, Temperature<br/>‚è≥ <strong>Pending Review (2):</strong> Clinical_Endpoint, Biomarker_Panel<br/>üí¨ <strong>In Discussion (1):</strong> Cotinine_Level<br/><br/>You're at 67% completion for Step 3. Great progress!";
                }
                return "I can help you with Clinical Data Elements (CDEs) for your Individual Health workflow. What specific aspect would you like to know about - approval status, standardization rules, or something else?";
            }
            
            if (lowerMessage.includes('workflow') || lowerMessage.includes('step')) {
                return "You're currently on <strong>Step 3 - Standardize Clinical CDEs</strong> of the Individual Health workflow. This step is 67% complete with an estimated 2.5 days remaining. Next up is Step 4 (Protect) which focuses on data security and privacy controls. Would you like me to prepare the transition checklist?";
            }
            
            if (lowerMessage.includes('help') || lowerMessage.includes('what can you')) {
                return "I'm your AI Governance Copilot! I can help you with:<br/><br/>üîç <strong>Workflow Navigation:</strong> Track progress, check status, suggest next steps<br/>üìã <strong>CDE Management:</strong> Review approvals, find similar CDEs, check quality scores<br/>üë• <strong>Team Coordination:</strong> Schedule reviews, find experts, notify stakeholders<br/>üìä <strong>Smart Insights:</strong> Generate reports, predict timelines, identify risks<br/><br/>Just ask me anything about your data governance process!";
            }
            
            if (lowerMessage.includes('expert') || lowerMessage.includes('sme')) {
                return "Based on your current CDEs, I recommend these domain experts:<br/><br/>üë©‚Äç‚öïÔ∏è <strong>Dr. Sarah Chen</strong> - Clinical Endpoints (Available now)<br/>üß¨ <strong>Dr. Michael Rodriguez</strong> - Biomarker Standards (Available 2-4 PM)<br/>üìä <strong>Dr. Lisa Wang</strong> - Data Quality Metrics (Available tomorrow)<br/><br/>Would you like me to schedule a review session with any of them?";
            }
            
            if (lowerMessage.includes('schedule') || lowerMessage.includes('meeting')) {
                return "I'll help you schedule efficiently! Dr. Sarah Chen is typically available for CDE reviews between 2-4 PM with 95% response rate. I can:<br/><br/>üìÖ Schedule immediate review for urgent CDEs<br/>‚è∞ Set up batch review session for remaining 3 CDEs<br/>üîÑ Create recurring review checkpoints<br/><br/>Which option works best for you?";
            }
            
            if (lowerMessage.includes('report') || lowerMessage.includes('summary')) {
                return "I'll generate a comprehensive progress report including:<br/><br/>üìà Workflow completion (73% overall)<br/>‚úÖ CDE approval status (6/9 complete)<br/>‚è±Ô∏è Timeline analysis (on track, 2.5 days remaining)<br/>üéØ Quality metrics (94.7% data quality score)<br/>üö® Risk assessment (low risk of delays)<br/><br/>Would you like me to create this report now and share it with your team?";
            }
            
            // Default contextual response
            return "I understand you're asking about '" + userMessage + "'. As your AI Governance Copilot, I have full context of your Individual Health workflow. Could you be more specific about what you'd like to know? I can help with CDEs, workflow steps, team coordination, or generating reports.";
        }
        
        function clearChat() {
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = `
                <!-- Welcome Message -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-bold">AI</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-gray-100 rounded-lg p-3">
                            <p class="text-gray-800">üëã Hi! I'm your AI Governance Copilot. I can see you're working on <strong>Step 3 - Standardizing Clinical CDEs</strong> for the Individual Health workflow.</p>
                            <p class="text-gray-800 mt-2">I notice you have 2 CDEs pending review and 1 in discussion. How can I help you today?</p>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Just now</div>
                    </div>
                </div>
            `;
        }
        
        // Quick Action Functions
        function scheduleReview() {
            addChatMessage('ai', "üóìÔ∏è I've identified the optimal time slot for Dr. Sarah Chen to review the 'Clinical_Endpoint' CDE. Based on her schedule and typical response patterns:<br/><br/>üìÖ <strong>Recommended Time:</strong> Today at 3:00 PM<br/>‚è±Ô∏è <strong>Duration:</strong> 30 minutes<br/>‚úÖ <strong>Success Rate:</strong> 95% approval rate at this time<br/><br/>I can send the calendar invite now and include all relevant CDE documentation. Shall I proceed?");
        }
        
        function showSimilarCDEs() {
            addChatMessage('ai', "üîç I found 3 similar CDEs in the cardiovascular domain that might help with standardization:<br/><br/>1. <strong>Cardiac_Biomarker_Panel</strong> (Cardiology Study 2023)<br/>   - 94% match to your Biomarker_Panel<br/>   - Already FDA-approved<br/><br/>2. <strong>Clinical_Endpoint_CVD</strong> (Heart Health Initiative)<br/>   - 89% match to your Clinical_Endpoint<br/>   - Dr. Sarah Chen was the approving SME<br/><br/>3. <strong>Cotinine_Smoking_Study</strong> (Tobacco Research)<br/>   - 87% match to your Cotinine_Level<br/>   - Includes standardized measurement units<br/><br/>Would you like me to import these standards or schedule a review with the original SMEs?");
        }
        
        function approveSelectedCDEs() {
            addChatMessage('ai', "‚úÖ I can help you bulk approve the 6 ready CDEs. Here's what I found:<br/><br/><strong>Ready for Approval:</strong><br/>‚Ä¢ Blood_Pressure (Quality: 98.2%)<br/>‚Ä¢ Heart_Rate (Quality: 97.8%)<br/>‚Ä¢ Glucose_Level (Quality: 96.5%)<br/>‚Ä¢ Cholesterol_Total (Quality: 95.9%)<br/>‚Ä¢ BMI (Quality: 97.1%)<br/>‚Ä¢ Temperature (Quality: 98.7%)<br/><br/>All quality scores exceed the 95% threshold. As a Data Steward, you have authority to approve these. This would advance your Step 3 progress to 89%. Shall I proceed with the bulk approval?");
        }
        
        function generateReport() {
            addChatMessage('ai', "üìä Generating comprehensive progress report...<br/><br/><strong>Individual Health Workflow - Status Report</strong><br/><br/>üìà <strong>Overall Progress:</strong> 73% (Step 3 of 5)<br/>‚è±Ô∏è <strong>Timeline:</strong> On track, 2.5 days remaining<br/>‚úÖ <strong>Step 3 Progress:</strong> 67% complete (6/9 CDEs approved)<br/>üéØ <strong>Quality Score:</strong> 94.7% (‚Üë2.3% from last week)<br/>‚ö†Ô∏è <strong>Blockers:</strong> 1 CDE pending SME approval<br/>üë• <strong>Team Status:</strong> Dr. Sarah Chen available, high velocity<br/>üí∞ <strong>ROI Forecast:</strong> $850K annual savings on track<br/><br/>üìã <strong>Recommendations:</strong><br/>1. Schedule Dr. Chen review for Clinical_Endpoint<br/>2. Batch approve 6 ready CDEs<br/>3. Prep Step 4 transition checklist<br/><br/>Would you like me to email this report to stakeholders?");
        }
        
        function suggestNextSteps() {
            addChatMessage('ai', "üéØ Based on AI analysis of your workflow patterns and current progress, here are my smart recommendations:<br/><br/><strong>Immediate Actions (Today):</strong><br/>1. ‚úÖ Bulk approve 6 ready CDEs (30 mins)<br/>2. üìÖ Schedule Dr. Chen review for Clinical_Endpoint (15 mins)<br/>3. üîÑ Follow up on Cotinine_Level discussion<br/><br/><strong>This Week:</strong><br/>4. üìã Prepare Step 4 security checklist<br/>5. üë• Brief data protection team on transition<br/>6. üéØ Set up Step 5 reporting framework<br/><br/><strong>AI Insights:</strong><br/>‚Ä¢ Completing actions 1-3 will boost progress to 89%<br/>‚Ä¢ Current velocity suggests Step 3 completion by tomorrow<br/>‚Ä¢ Step 4 can start 1 day early with proper prep<br/><br/>Would you like me to create a task list and set reminders?");
        }
        
        function findExperts() {
            addChatMessage('ai', "üë• I've analyzed your CDEs and found the perfect domain experts:<br/><br/><strong>For Clinical_Endpoint:</strong><br/>ü•á <strong>Dr. Sarah Chen</strong> - Clinical Data Specialist<br/>   üìä 98% approval rate, 2.3 day avg response<br/>   üü¢ Available now (high confidence)<br/><br/><strong>For Biomarker_Panel:</strong><br/>ü•à <strong>Dr. Michael Rodriguez</strong> - Biomarker Standards<br/>   üìä 95% approval rate, FDA liaison experience<br/>   üü° Available 2-4 PM today<br/><br/><strong>For Cotinine_Level:</strong><br/>ü•â <strong>Dr. Lisa Wang</strong> - Tobacco Research SME<br/>   üìä Expert in cotinine standardization<br/>   üî¥ Available tomorrow morning<br/><br/><strong>Cross-Domain Support:</strong><br/>üîß <strong>Jennifer Adams</strong> - Data Standards Architect<br/>   üìä Process optimization specialist<br/>   üü¢ Available for batch reviews<br/><br/>Shall I reach out to any of these experts or schedule a review session?");
        }
        
        // Initialize AI Assistant when tab is activated
        function initializeAIAssistant() {
            // This function is called when the AI Assistant tab is activated
            // We can add any initialization logic here if needed
            console.log('AI Assistant initialized and ready!');
        }
        
        // Stub function to prevent errors (interview content removed)
        function loadInterviewPrep() {
            console.log('Interview prep content has been removed');
        }

        function populateLifecycleSteps() {
            const container = document.getElementById('process-steps-container');
            if (!container) return;

            const lifecycleSteps = [
                { name: "Discover", icon: "fas fa-search", aiText: "AI Auto-Discovery", color: "blue-500", textColor: "blue-600" },
                { name: "Define", icon: "fas fa-tags", aiText: "AI Metadata Suggestion", color: "green-500", textColor: "green-600" },
                { name: "Standardize", icon: "fas fa-sync-alt", aiText: "AI Harmonization", color: "purple-500", textColor: "purple-600" },
                { name: "Protect", icon: "fas fa-shield-alt", aiText: "AI Compliance Monitoring", color: "red-500", textColor: "red-600" },
                { name: "Govern & Optimize", icon: "fas fa-chart-line", aiText: "AI Insights & Automation", color: "indigo-500", textColor: "indigo-600" }
            ];

            container.innerHTML = lifecycleSteps.map(step => `
                <div class="process-step flex-1 min-w-[140px] p-3 text-center">
                    <div class="step-number mx-auto bg-${step.color} text-white">
                        <i class="${step.icon} fa-lg"></i>
                    </div>
                    <div class="step-label mt-2 font-semibold text-gray-700">${step.name}</div>
                    <div class="text-xs text-${step.textColor} mt-1">
                        (<i class="fas fa-robot text-xs mr-1"></i>${step.aiText})
                    </div>
                </div>
            `).join('');
        }

        // Role-Based AI Assistant - Core Functions
        let currentRole = 'steward';
        
        function switchRole(role) {
            currentRole = role;
            
            // Update active role button
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active-role');
            });
            document.getElementById(`role-${role}`).classList.add('active-role');
            
            // Update AI assistant header based on role
            const configs = {
                steward: { title: "üõ°Ô∏è Data Steward AI Assistant", subtitle: "Responsible for data quality, CDEs, and compliance validation", headerClass: "bg-blue-50 border-blue-200", titleClass: "text-blue-800", subtitleClass: "text-blue-600" },
                owner: { title: "üëë Data Owner AI Assistant", subtitle: "Accountable for data assets, access control, and business value", headerClass: "bg-green-50 border-green-200", titleClass: "text-green-800", subtitleClass: "text-green-600" },
                architect: { title: "üèóÔ∏è IT & Architecture AI Assistant", subtitle: "Consulted on technical implementation and system integration", headerClass: "bg-orange-50 border-orange-200", titleClass: "text-orange-800", subtitleClass: "text-orange-600" },
                executive: { title: "üìä Senior Management AI Assistant", subtitle: "Informed on progress, ROI, and strategic governance metrics", headerClass: "bg-purple-50 border-purple-200", titleClass: "text-purple-800", subtitleClass: "text-purple-600" },
                governance: { title: "üéØ Corporate Governance AI Assistant", subtitle: "Orchestrates cross-functional governance workflows", headerClass: "bg-red-50 border-red-200", titleClass: "text-red-800", subtitleClass: "text-red-600" }
            };
            
            const config = configs[role];
            document.getElementById('ai-header').className = `${config.headerClass} px-6 py-4 border-b rounded-t-lg`;
            document.getElementById('ai-title').textContent = config.title;
            document.getElementById('ai-title').className = `text-lg font-semibold ${config.titleClass}`;
            document.getElementById('ai-subtitle').textContent = config.subtitle;
            document.getElementById('ai-subtitle').className = `text-sm ${config.subtitleClass}`;
            
            // Update content based on role
            updateRoleContent(role);
        }
        
        function updateRoleContent(role) {
            const questionSets = {
                steward: ["Are the Cotinine_Level CDEs properly defined for regulatory submission?", "Which clinical data assets need my review this week?", "How do I resolve data quality issues in the DM domain?"],
                owner: ["What are the compliance risks for our tobacco study data?", "Who has access to sensitive patient biomarker data and why?", "Are we meeting GDPR requirements for data retention?"],
                architect: ["How should we implement SDTM mapping for new tobacco endpoints?", "What's the technical feasibility of integrating puff topography data?", "Are our data pipelines scalable for multi-site studies?"],
                executive: ["What's the ROI of our data governance investment?", "Are we on track for regulatory submission deadlines?", "How does our data quality compare to industry benchmarks?"],
                governance: ["How do I coordinate the Individual Health workflow across all stakeholders?", "What governance bottlenecks need escalation?", "Where should we focus our improvement efforts?"]
            };
            
            // Update key questions with click handlers
            const questionsHtml = questionSets[role].map(q => `
                <div class="p-3 bg-gray-50 rounded-lg hover:bg-blue-100 cursor-pointer transition-colors" onclick="askKeyQuestion('${q.replace(/'/g, "\\'")}')">
                    <div class="text-sm text-gray-700 hover:text-blue-800">"${q}"</div>
                    <div class="text-xs text-gray-500 mt-1">Click to ask this question</div>
                </div>
            `).join('');
            document.getElementById('key-questions').innerHTML = questionsHtml;
            
            // Update collaboration panel
            updateCollaborationPanel(role);
            
            // Update context panel  
            updateContextPanel(role);
            
            // Update smart handoffs
            updateSmartHandoffs(role);
            
            // Initialize AI chat for role
            initializeAIChat(role);
        }
         
        function initializeAIChat(role) {
            const welcomeMessages = {
                steward: `üëã Hi! I'm your Data Steward AI Assistant. I can help you with CDE validation, data quality checks, and compliance verification. I see you have 6 CDEs pending review - shall we start there?`,
                owner: `üëã Hello! I'm your Data Owner AI Assistant. I can assist with access control decisions, compliance risk assessment, and ROI analysis. There's currently 1 access request awaiting your review.`,
                architect: `üëã Hey! I'm your IT & Architecture AI Assistant. I can help with technical implementation, SDTM mapping, and system integration planning. Ready to tackle those tobacco endpoint mappings?`,
                executive: `üëã Good day! I'm your Senior Management AI Assistant. I provide strategic insights, ROI tracking, and governance metrics. Your weekly executive dashboard is ready for review.`,
                governance: `üëã Greetings! I'm your Corporate Governance AI Assistant. I orchestrate cross-role workflows and identify optimization opportunities. Currently managing 3 active workflows at 67% completion.`
            };
            
            const quickQuestions = {
                steward: ["Show CDE status", "Quality score update", "Schedule SME review", "Check compliance"],
                owner: ["Review access requests", "Risk assessment", "ROI metrics", "Audit trail"],
                architect: ["System performance", "SDTM mapping", "Integration status", "Capacity planning"],
                executive: ["Weekly dashboard", "ROI summary", "Risk overview", "Team progress"],
                governance: ["Workflow status", "Bottleneck analysis", "Team coordination", "Process optimization"]
            };
            
            // Clear and populate chat
            const chatContainer = document.getElementById('ai-chat-messages');
            chatContainer.innerHTML = '';
            addAIMessage(welcomeMessages[role], true);
            
            // Update quick questions
            const quickQuestionsHtml = quickQuestions[role].map(q => `
                <button onclick="askQuickQuestion('${q}')" class="text-xs bg-white border border-gray-200 rounded-full px-3 py-1 hover:bg-gray-50 transition-colors">
                    ${q}
                </button>
            `).join('');
            document.getElementById('quick-questions').innerHTML = quickQuestionsHtml;
        }
         
        function sendAIMessage() {
            const input = document.getElementById('ai-chat-input');
            const message = input.value.trim();
            if (!message) return;
            
            // Add user message
            addAIMessage(message, false);
            input.value = '';
            
            // Show typing indicator
            addTypingIndicator();
            
            // Generate AI response after delay
            setTimeout(() => {
                removeTypingIndicator();
                const response = generateRoleSpecificResponse(message, currentRole);
                addAIMessage(response, true);
            }, 1500);
        }
         
        function addAIMessage(message, isAI) {
            const chatContainer = document.getElementById('ai-chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3';
            
            if (isAI) {
                const roleColors = {
                    steward: 'bg-blue-600',
                    owner: 'bg-green-600',
                    architect: 'bg-orange-600',
                    executive: 'bg-purple-600',
                    governance: 'bg-red-600'
                };
                
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 ${roleColors[currentRole]} rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-bold">AI</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-white rounded-lg p-3 shadow-sm border">
                            <p class="text-gray-800 text-sm">${message}</p>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Just now</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-bold">You</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-blue-100 rounded-lg p-3">
                            <p class="text-gray-800 text-sm">${message}</p>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">Just now</div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
         
        function addTypingIndicator() {
            const chatContainer = document.getElementById('ai-chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'flex items-start space-x-3';
            
            const roleColors = {
                steward: 'bg-blue-600',
                owner: 'bg-green-600',
                architect: 'bg-orange-600',
                executive: 'bg-purple-600',
                governance: 'bg-red-600'
            };
            
            typingDiv.innerHTML = `
                <div class="w-8 h-8 ${roleColors[currentRole]} rounded-full flex items-center justify-center">
                    <span class="text-white text-sm font-bold">AI</span>
                </div>
                <div class="flex-1">
                    <div class="bg-white rounded-lg p-3 shadow-sm border">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                </div>
            `;
            
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
         
        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }
         
        function generateRoleSpecificResponse(userMessage, role) {
            const lowerMessage = userMessage.toLowerCase();
            
            // Role-specific response patterns
            const responses = {
                steward: {
                    keywords: {
                        'cde': `‚úÖ **CDE Status Update**: Currently tracking 9 CDEs for Individual Health workflow. 6 are approved, 2 pending review (Clinical_Endpoint, Biomarker_Panel), and 1 in discussion (Cotinine_Level). Quality scores average 96.8%. Need any specific CDE details?`,
                        'quality': `üìä **Data Quality Report**: Current overall score is 96.8% (‚Üë2.3% from last week). CDISC compliance at 98.7%. Top quality issues: 2 missing values in DM domain, 1 format inconsistency in EX domain. Shall I prioritize fixes?`,
                        'review': `üîç **Review Schedule**: Dr. Sarah Chen available for Clinical_Endpoint CDE review today 2-4 PM (98% approval rate). Biomarker_Panel ready for technical review. I can schedule both - which is priority?`,
                        'compliance': `‚úÖ **Compliance Status**: CDISC compliance at 98.7%, FDA submission readiness at 94%. Minor gaps: 2 CDEs need final SME approval. Regulatory timeline on track. Any specific compliance concerns?`
                    },
                    default: `As your Data Steward AI, I can help with CDE management, quality validation, and compliance checks. Current priority: 2 CDEs awaiting review. Would you like me to schedule SME reviews or check quality metrics?`
                },
                owner: {
                    keywords: {
                        'access': `üîê **Access Review**: 1 pending request from Research Team for cotinine measurement data. Risk assessment: LOW (internal team, GDPR compliant). Recommend approval with 90-day access window. Approve now?`,
                        'risk': `‚ö†Ô∏è **Risk Assessment**: Current risk level LOW. Key factors: 98.7% compliance score, all PII properly encrypted, access controls functioning. Minor concern: 1 external data source needs validation. Mitigation plan ready.`,
                        'roi': `üí∞ **ROI Analysis**: Current annual savings $850K vs $1.2M investment. Efficiency gains: 67% reduction in manual work, 14-day faster submission prep. Projected ROI: 285% by year-end. Cost breakdown available?`,
                        'audit': `üìã **Audit Readiness**: FDA audit trail complete, all decisions documented. GDPR compliance verified, data lineage mapped. Estimated audit preparation: 2 days vs previous 2 weeks. Detailed report ready for review.`
                    },
                    default: `As your Data Owner AI, I manage access controls, compliance, and value realization. Current attention needed: 1 access request pending your approval. ROI tracking shows $850K annual savings. How can I assist you?`
                },
                architect: {
                    keywords: {
                        'sdtm': `üèóÔ∏è **SDTM Mapping**: Generated tobacco-specific domain mappings for puff topography data. Custom extensions: EXTO (tobacco exposure), ESTO (exposure summary). Compliance validated, ready for review. Implementation timeline: 3 days.`,
                        'performance': `‚ö° **System Performance**: Current uptime 99.7%, processing speed optimal. Biomarker data pipeline handling 15,432 records efficiently. Capacity utilization: 68%. Scaling recommendation: add 2 nodes for peak loads.`,
                        'integration': `üîß **Integration Status**: Successfully connected 8/10 planned systems. Remaining: external lab data feed (in progress), regulatory submission portal (scheduled next week). No blocking issues identified.`,
                        'capacity': `üìà **Capacity Planning**: Current infrastructure supports 2,847 subjects efficiently. For multi-site expansion (projected 8,000 subjects), recommend infrastructure scaling. Estimated cost: $45K, ROI: 6 months.`
                    },
                    default: `As your IT & Architecture AI, I handle technical implementation and system optimization. Current focus: SDTM mapping for tobacco endpoints, system performance at 99.7% uptime. What technical guidance do you need?`
                },
                executive: {
                    keywords: {
                        'dashboard': `üìä **Executive Dashboard**: Overall governance progress 73%, on track for Q1 targets. Key metrics: $850K savings, 98.7% compliance, 14-day faster submissions. Risk level: LOW. Team velocity: HIGH. Strategic concerns?`,
                        'roi': `üíº **ROI Summary**: Investment: $1.2M, Returns: $850K annually (285% ROI projected). Cost avoidance: $2.3M in penalties/delays. Efficiency gains: 67% reduction in manual work. Strategic value: regulatory competitive advantage.`,
                        'risk': `üéØ **Risk Overview**: Overall risk LOW. Governance maturity score: 89%. Key strengths: automated compliance, strong team velocity. Watch item: 1 external data dependency. Mitigation strategies in place.`,
                        'progress': `üìà **Team Progress**: All teams on schedule. Data Stewards: 67% complete, Data Owners: decision pending, IT: ahead of schedule. Governance coordination: 89% effectiveness. Escalation needed for CDE approvals.`
                    },
                    default: `As your Senior Management AI, I provide strategic oversight and ROI tracking. Current status: 73% governance progress, $850K annual savings, LOW risk profile. Your weekly executive summary is ready. What strategic insights do you need?`
                },
                governance: {
                    keywords: {
                        'workflow': `üé≠ **Workflow Orchestration**: Managing 3 active workflows at 67% average completion. Current bottleneck: CDE approval requiring executive escalation. Recommended action: schedule stakeholder alignment meeting.`,
                        'bottleneck': `üö® **Bottleneck Analysis**: Identified 1 critical path issue: Clinical_Endpoint CDE approval delayed 2 days. Impact: potential 1-day slip in Step 4 start. Escalation path: engage Dr. Sarah Chen directly. Approve escalation?`,
                        'coordination': `üîÑ **Team Coordination**: Cross-role handoffs functioning at 89% efficiency. Strong collaboration between Stewards-Owners. Improvement opportunity: IT-Owner communication cadence. Recommend weekly sync meetings.`,
                        'optimization': `‚öôÔ∏è **Process Optimization**: Weekly retrospective shows 15% velocity improvement. Key wins: automated CDE routing, smart SME selection. Next optimization target: reduce decision lag time by 30%.`
                    },
                    default: `As your Corporate Governance AI, I orchestrate cross-functional workflows and optimize processes. Currently managing 3 workflows at 67% completion with 1 bottleneck requiring attention. How can I coordinate for you?`
                }
            };
            
            const roleResponses = responses[role];
            
            // Check for keyword matches
            for (const [keyword, response] of Object.entries(roleResponses.keywords)) {
                if (lowerMessage.includes(keyword)) {
                    return response;
                }
            }
            
            // Return default response
            return roleResponses.default;
        }
         
        function askQuickQuestion(question) {
            const input = document.getElementById('ai-chat-input');
            input.value = question;
            sendAIMessage();
        }
         
        function askKeyQuestion(question) {
            const input = document.getElementById('ai-chat-input');
            input.value = question;
            // Auto-focus the input for better UX
            input.focus();
            // Automatically send the message
            sendAIMessage();
        }
         
        function clearAIChat() {
            const chatContainer = document.getElementById('ai-chat-messages');
            chatContainer.innerHTML = '';
            initializeAIChat(currentRole);
        }
        
        function updateCollaborationPanel(role) {
            const collaborations = {
                steward: [
                    {
                        partner: "Dr. Sarah Chen",
                        role: "Clinical SME", 
                        task: "CDE Review - Clinical_Endpoint",
                        status: "active",
                        priority: "high",
                        due: "Today 4PM"
                    },
                    {
                        partner: "Quality Team",
                        role: "Lab Analysts",
                        task: "Biomarker_Panel Validation", 
                        status: "pending",
                        priority: "medium",
                        due: "Tomorrow"
                    }
                ],
                owner: [
                    {
                        partner: "Research Team",
                        role: "Data Requestor",
                        task: "Cotinine Data Access Request",
                        status: "pending_approval", 
                        priority: "high",
                        due: "Decision needed"
                    },
                    {
                        partner: "Legal Team",
                        role: "Privacy Officers",
                        task: "GDPR Compliance Review",
                        status: "active",
                        priority: "medium", 
                        due: "This week"
                    }
                ],
                architect: [
                    {
                        partner: "DevOps Team",
                        role: "Infrastructure",
                        task: "SDTM Pipeline Optimization",
                        status: "active",
                        priority: "high",
                        due: "End of week"
                    }
                ],
                executive: [
                    {
                        partner: "Board of Directors", 
                        role: "Strategic Oversight",
                        task: "Quarterly Governance Review",
                        status: "scheduled",
                        priority: "high",
                        due: "Next month"
                    }
                ],
                governance: [
                    {
                        partner: "All Stakeholders",
                        role: "Cross-functional",
                        task: "Workflow Coordination",
                        status: "active",
                        priority: "high", 
                        due: "Ongoing"
                    }
                ]
            };
            
            const statusColors = {
                active: "bg-green-100 text-green-800",
                pending: "bg-yellow-100 text-yellow-800", 
                pending_approval: "bg-orange-100 text-orange-800",
                scheduled: "bg-purple-100 text-purple-800"
            };
            
            const collaborationsHtml = collaborations[role].map(collab => `
                <div class="border-l-4 border-blue-400 pl-3 py-2 bg-gray-50 rounded-r">
                    <div class="flex items-center justify-between mb-1">
                        <span class="font-semibold text-sm">${collab.partner}</span>
                        <span class="text-xs text-red-600 font-medium">${collab.priority.toUpperCase()}</span>
                    </div>
                    <div class="text-xs text-gray-600 mb-1">${collab.role} ‚Ä¢ ${collab.task}</div>
                    <div class="flex items-center justify-between">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColors[collab.status]}">
                            ${collab.status.replace('_', ' ')}
                        </span>
                        <span class="text-xs text-gray-500">${collab.due}</span>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('collaborations').innerHTML = collaborationsHtml;
        }
        
        function updateContextPanel(role) {
            const contexts = {
                steward: [
                    {
                        icon: "üìä",
                        title: "Data Quality Focus",
                        description: "96.8% overall quality score",
                        details: "2 missing values, 1 format issue"
                    },
                    {
                        icon: "üéØ", 
                        title: "Compliance Status",
                        description: "98.7% CDISC compliant",
                        details: "2 CDEs need SME approval"
                    },
                    {
                        icon: "‚è∞",
                        title: "Current Priority", 
                        description: "Clinical_Endpoint review",
                        details: "Dr. Chen available 2-4 PM today"
                    }
                ],
                owner: [
                    {
                        icon: "üîê",
                        title: "Access Management",
                        description: "1 pending access request", 
                        details: "Research team cotinine data"
                    },
                    {
                        icon: "üí∞",
                        title: "ROI Tracking",
                        description: "$850K annual savings",
                        details: "285% ROI projected by year-end"
                    },
                    {
                        icon: "‚ö†Ô∏è",
                        title: "Risk Assessment",
                        description: "LOW risk profile",
                        details: "98.7% compliance, encrypted PII"
                    }
                ],
                architect: [
                    {
                        icon: "‚ö°",
                        title: "System Performance", 
                        description: "99.7% uptime",
                        details: "15,432 records processed efficiently"
                    },
                    {
                        icon: "üèóÔ∏è",
                        title: "SDTM Implementation",
                        description: "Tobacco domain mappings",
                        details: "EXTO, ESTO extensions ready"
                    }
                ],
                executive: [
                    {
                        icon: "üìä",
                        title: "Governance Progress",
                        description: "73% complete",
                        details: "On track for Q1 targets"
                    },
                    {
                        icon: "üíº", 
                        title: "Strategic Value",
                        description: "$850K annual savings",
                        details: "Regulatory competitive advantage"
                    }
                ],
                governance: [
                    {
                        icon: "üé≠",
                        title: "Workflow Orchestration",
                        description: "3 active workflows",
                        details: "67% average completion"
                    },
                    {
                        icon: "üö®",
                        title: "Bottleneck Management", 
                        description: "1 critical path issue",
                        details: "CDE approval escalation needed"
                    }
                ]
            };
            
            const contextHtml = contexts[role].map(ctx => `
                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg mb-2">
                    <div class="text-lg">${ctx.icon}</div>
                    <div class="flex-1">
                        <div class="font-semibold text-sm text-gray-800">${ctx.title}</div>
                        <div class="text-sm text-blue-600 font-medium">${ctx.description}</div>
                        <div class="text-xs text-gray-600 mt-1">${ctx.details}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('role-context').innerHTML = contextHtml;
        }
        
        function updateSmartHandoffs(role) {
            const handoffs = {
                steward: [
                    { action: "Escalate to SME", target: "Dr. Sarah Chen", reason: "Clinical_Endpoint needs domain expertise", urgency: "high", eta: "Today" },
                    { action: "Route to Regulatory", target: "Compliance Team", reason: "SDTM validation complete", urgency: "medium", eta: "Tomorrow" }
                ],
                owner: [
                    { action: "Approve Access", target: "Research Team", reason: "Risk assessment: LOW", urgency: "high", eta: "Decision needed" },
                    { action: "Review with Legal", target: "Privacy Team", reason: "GDPR compliance check", urgency: "medium", eta: "This week" }
                ],
                architect: [
                    { action: "Deploy Pipeline", target: "DevOps Team", reason: "SDTM mapping validated", urgency: "high", eta: "End of week" },
                    { action: "Scale Infrastructure", target: "Cloud Team", reason: "Capacity threshold reached", urgency: "medium", eta: "Next sprint" }
                ],
                executive: [
                    { action: "Board Presentation", target: "Board Members", reason: "Quarterly governance review", urgency: "high", eta: "Next month" },
                    { action: "Budget Approval", target: "Finance Team", reason: "ROI targets exceeded", urgency: "medium", eta: "This month" }
                ],
                governance: [
                    { action: "Coordinate Meeting", target: "All Stakeholders", reason: "Resolve CDE approval bottleneck", urgency: "high", eta: "This week" },
                    { action: "Process Improvement", target: "Process Owners", reason: "15% velocity gain opportunity", urgency: "medium", eta: "Next retrospective" }
                ]
            };
            
            const urgencyColors = {
                high: "bg-red-100 text-red-800 border-red-200",
                medium: "bg-orange-100 text-orange-800 border-orange-200"
            };
            
            const handoffsHtml = handoffs[role].map(handoff => `
                <div class="border rounded-lg p-3 ${urgencyColors[handoff.urgency]} cursor-pointer hover:shadow-md transition-shadow mb-2">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-semibold text-sm">${handoff.action}</span>
                        <span class="text-xs font-medium">${handoff.urgency.toUpperCase()}</span>
                    </div>
                    <div class="text-sm mb-1">‚Üí ${handoff.target}</div>
                    <div class="text-xs opacity-80 mb-2">${handoff.reason}</div>
                    <div class="text-xs font-medium">ETA: ${handoff.eta}</div>
                </div>
            `).join('');
            
            document.getElementById('smart-handoffs').innerHTML = handoffsHtml;
        }

        // Nonclinical step navigation functions
        function showNonclinicalStep(stepNumber) {
            // Hide all step contents
            for (let i = 1; i <= 5; i++) {
                const content = document.getElementById('nonclinical-step-content-' + i);
                const btn = document.getElementById('nonclinical-step-' + i);
                if (content) content.classList.add('hidden');
                if (btn) {
                    btn.classList.remove('bg-purple-500', 'text-white');
                    btn.classList.add('bg-gray-300', 'text-gray-600');
                    btn.classList.remove('active');
                }
            }
            
            // Show selected step content
            const selectedContent = document.getElementById('nonclinical-step-content-' + stepNumber);
            const selectedBtn = document.getElementById('nonclinical-step-' + stepNumber);
            if (selectedContent) selectedContent.classList.remove('hidden');
            if (selectedBtn) {
                selectedBtn.classList.remove('bg-gray-300', 'text-gray-600');
                selectedBtn.classList.add('bg-purple-500', 'text-white', 'active');
            }
        }
    </script>

    <style>
        .role-btn {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .role-btn:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .active-role {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
        }
    </style>
</body>
</html> 