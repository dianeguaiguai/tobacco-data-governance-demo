<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Data Governance Agent - Life Sciences Industry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }
        .use-case-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .tobacco-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .product-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        .use-case-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 10px;
        }

        .process-step:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .process-step.active .step-number {
            background-color: #3b82f6;
            color: white;
        }

        .process-step.completed .step-number {
            background-color: #10b981;
            color: white;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .step-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            line-height: 1.2;
        }

        .process-step.active .step-label {
            color: #3b82f6;
        }

        .process-step.completed .step-label {
            color: #10b981;
        }

        /* Tab Styling */
        .tab-button {
            transition: all 0.2s ease;
        }

        .tab-button.active {
            color: #3b82f6 !important;
            border-color: #3b82f6 !important;
        }

        .tab-content {
            min-height: 600px;
        }

        .tab-content.hidden {
            display: none;
        }

        /* Use Case Selection */
        .use-case-card.selected {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white p-6">
        <div class="container mx-auto">
            <h1 class="text-4xl font-bold mb-2">ü§ñ AI Data Governance Agent</h1>
            <p class="text-xl opacity-90">Intelligent assistant that adapts to your role, understands FAIR principles, and provides context-aware recommendations for data governance workflows</p>
            <div class="mt-4 text-sm opacity-80">
                Capabilities: Dynamic persona switching ‚Ä¢ Real-time FAIR guidance ‚Ä¢ Use case-specific insights ‚Ä¢ Automated compliance workflows ‚Ä¢ ROI quantification
            </div>
        </div>
    </header>

    <!-- AI Intelligence Panel -->
    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border-b">
        <div class="container mx-auto p-4">
            <div id="ai-status" class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium text-gray-700">AI Agent Active</span>
                    <span id="ai-activity" class="text-xs text-gray-500">Ready to assist with FAIR data governance</span>
                </div>
                <div id="impact-metrics" class="text-xs text-purple-600">
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-6">
        
        <!-- Three-Tab Interface -->
        <section class="mb-8">
            <div class="bg-white rounded-lg shadow-lg">
                <!-- Tab Navigation -->
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6" aria-label="Tabs">
                        <button onclick="switchTab('process')" id="process-tab" class="tab-button active py-4 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600">
                            <i class="fas fa-cogs mr-2"></i>Data Governance Process
                        </button>
                        <button onclick="switchTab('use-cases')" id="use-cases-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-th-large mr-2"></i>Use Cases & Implementation
                        </button>
                        <button onclick="switchTab('ai-assistant')" id="ai-assistant-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            <i class="fas fa-robot mr-2"></i>AI Assistant
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <div class="p-6">
                    <!-- Tab 1: Data Governance Process (General) -->
                    <div id="process-content" class="tab-content">
                        <div class="space-y-8">
                            <!-- Transformation Before/After -->
                            <div class="bg-gradient-to-r from-red-50 to-green-50 rounded-lg p-6 border">
                                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                                    <i class="fas fa-exchange-alt mr-2"></i>Transformation: Before vs After AI Agent
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Before AI Agent -->
                                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-400">
                                        <h4 class="font-bold text-red-800 mb-4 text-lg">‚ùå Before AI Agent</h4>
                                        <ul class="space-y-3 text-sm text-red-700">
                                            <li>‚Ä¢ <strong>Scattered data, no definitions</strong><br><span class="text-red-600">Data stewards spend 3 days hunting across 50+ systems</span></li>
                                            <li>‚Ä¢ <strong>No starting point for CDEs</strong><br><span class="text-red-600">Manual CDE identification takes weeks</span></li>
                                            <li>‚Ä¢ <strong>Tribal knowledge trapped in documents</strong><br><span class="text-red-600">Business definitions buried in emails and files</span></li>
                                            <li>‚Ä¢ <strong>No clear ownership</strong><br><span class="text-red-600">SMEs unknown, data lineage unclear</span></li>
                                            <li>‚Ä¢ <strong>Manual compliance checks</strong><br><span class="text-red-600">Audit preparation takes 3+ weeks</span></li>
                                        </ul>
                                        <div class="mt-4 p-3 bg-red-100 rounded text-sm">
                                            <div class="flex items-center">
                                                <i class="fas fa-clock mr-2 text-red-600"></i>
                                                <span class="font-semibold text-red-800">Time to Value: 3-6 months</span>
                                            </div>
                                            <div class="flex items-center mt-1">
                                                <i class="fas fa-dollar-sign mr-2 text-red-600"></i>
                                                <span class="font-semibold text-red-800">Cost: High manual effort, delayed projects</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- After AI Agent -->
                                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-400">
                                        <h4 class="font-bold text-green-800 mb-4 text-lg">‚úÖ After AI Agent + Human Review</h4>
                                        <ul class="space-y-3 text-sm text-green-700">
                                            <li>‚Ä¢ <strong>Draft metadata for 127 fields in 30 minutes</strong><br><span class="text-green-600">AI discovers and catalogs data across all systems</span></li>
                                            <li>‚Ä¢ <strong>Suggested 44 high-priority CDEs</strong><br><span class="text-green-600">AI identifies CDEs with 94-96% confidence</span></li>
                                            <li>‚Ä¢ <strong>Key terms extracted from documents</strong><br><span class="text-green-600">AI parses and structures business knowledge</span></li>
                                            <li>‚Ä¢ <strong>Draft list of SMEs for review</strong><br><span class="text-green-600">AI suggests domain experts and data owners</span></li>
                                            <li>‚Ä¢ <strong>Automated compliance workflows</strong><br><span class="text-green-600">Continuous monitoring, 2-day audit prep</span></li>
                                        </ul>
                                        <div class="mt-4 p-3 bg-green-100 rounded text-sm">
                                            <div class="flex items-center">
                                                <i class="fas fa-clock mr-2 text-green-600"></i>
                                                <span class="font-semibold text-green-800">Time to Value: 2-3 weeks</span>
                                            </div>
                                            <div class="flex items-center mt-1">
                                                <i class="fas fa-dollar-sign mr-2 text-green-600"></i>
                                                <span class="font-semibold text-green-800">ROI: $2M+ annually, 85% time savings</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Key Metrics -->
                                <div class="grid grid-cols-4 gap-4 mt-8 text-center">
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-blue-600">85%</div>
                                        <div class="text-sm text-gray-600">Time Reduction</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-green-600">91%</div>
                                        <div class="text-sm text-gray-600">Quality Score</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-purple-600">48</div>
                                        <div class="text-sm text-gray-600">AI Contexts</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-lg shadow">
                                        <div class="text-3xl font-bold text-orange-600">$2M+</div>
                                        <div class="text-sm text-gray-600">Annual ROI</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Complete Process Flow -->
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border">
                                <h3 class="text-2xl font-bold mb-6 text-center text-gray-800">
                                    <i class="fas fa-project-diagram mr-2"></i>Complete Data Governance Process Flow
                                </h3>
                                
                                <!-- Simplified Role Legend -->
                                <div class="bg-white rounded-lg p-4 mb-6 border">
                                    <h4 class="font-bold text-gray-800 mb-3">Team Roles</h4>
                                    <div class="text-sm text-gray-600">
                                        <p>Each step shows <strong>Led by</strong> (who executes) and <strong>Needs</strong> (who approves/provides input)</p>
                                    </div>
                                </div>

                                <!-- Enhanced Process Steps -->
                                <div class="grid grid-cols-1 lg:grid-cols-5 gap-4 mb-8">
                                    <!-- Step 1: Discover -->
                                    <div class="process-step-enhanced active bg-white rounded-lg shadow-md border-2 border-blue-500 p-4 hover:shadow-lg transition-all cursor-pointer" id="enhanced-step-1" onclick="selectProcessStep(1)">
                                        <div class="text-center mb-3">
                                            <div class="w-12 h-12 bg-blue-500 text-white rounded-full text-xl flex items-center justify-center mx-auto mb-2 font-bold">1</div>
                                            <h4 class="font-bold text-gray-800">Discover</h4>
                                            <p class="text-xs text-gray-600">Scan Systems & Data Assets</p>
                                        </div>
                                        
                                        <!-- Key Deliverables -->
                                        <div class="mb-3">
                                            <div class="text-xs font-semibold text-blue-700 mb-1">Key Outputs:</div>
                                            <ul class="text-xs text-gray-600 space-y-1">
                                                <li>‚Ä¢ Initial data-asset inventory</li>
                                                <li>‚Ä¢ System-table-field mapping</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Simplified Roles -->
                                        <div class="border-t pt-2">
                                            <div class="text-xs font-semibold text-gray-700 mb-2">Team:</div>
                                            <div class="text-xs text-gray-600">
                                                <div><strong>Led by:</strong> Data Architect</div>
                                                <div><strong>Needs:</strong> System Admin approval</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Indicator -->
                                        <div class="mt-3">
                                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                                <span>Progress</span>
                                                <span id="step-1-progress">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div id="step-1-bar" class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 2: Define -->
                                    <div class="process-step-enhanced bg-white rounded-lg shadow-md border-2 border-gray-200 p-4 hover:shadow-lg transition-all cursor-pointer" id="enhanced-step-2" onclick="selectProcessStep(2)">
                                        <div class="text-center mb-3">
                                            <div class="w-12 h-12 bg-gray-400 text-white rounded-full text-xl flex items-center justify-center mx-auto mb-2 font-bold">2</div>
                                            <h4 class="font-bold text-gray-800">Define</h4>
                                            <p class="text-xs text-gray-600">Add Business & Technical Metadata</p>
                                        </div>
                                        
                                        <!-- Key Deliverables -->
                                        <div class="mb-3">
                                            <div class="text-xs font-semibold text-green-700 mb-1">Key Outputs:</div>
                                            <ul class="text-xs text-gray-600 space-y-1">
                                                <li>‚Ä¢ Metadata dictionary</li>
                                                <li>‚Ä¢ Field definition cards</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Simplified Roles -->
                                        <div class="border-t pt-2">
                                            <div class="text-xs font-semibold text-gray-700 mb-2">Team:</div>
                                            <div class="text-xs text-gray-600">
                                                <div><strong>Led by:</strong> Data Steward</div>
                                                <div><strong>Needs:</strong> SME & Data Owner approval</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Indicator -->
                                        <div class="mt-3">
                                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                                <span>Progress</span>
                                                <span id="step-2-progress">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div id="step-2-bar" class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Standardize -->
                                    <div class="process-step-enhanced bg-white rounded-lg shadow-md border-2 border-gray-200 p-4 hover:shadow-lg transition-all cursor-pointer" id="enhanced-step-3" onclick="selectProcessStep(3)">
                                        <div class="text-center mb-3">
                                            <div class="w-12 h-12 bg-gray-400 text-white rounded-full text-xl flex items-center justify-center mx-auto mb-2 font-bold">3</div>
                                            <h4 class="font-bold text-gray-800">Standardize</h4>
                                            <p class="text-xs text-gray-600">Define CDEs with Business</p>
                                        </div>
                                        
                                        <!-- Key Deliverables -->
                                        <div class="mb-3">
                                            <div class="text-xs font-semibold text-purple-700 mb-1">Key Outputs:</div>
                                            <ul class="text-xs text-gray-600 space-y-1">
                                                <li>‚Ä¢ CDE register</li>
                                                <li>‚Ä¢ Standard mapping/transformation logic</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Simplified Roles -->
                                        <div class="border-t pt-2">
                                            <div class="text-xs font-semibold text-gray-700 mb-2">Team:</div>
                                            <div class="text-xs text-gray-600">
                                                <div><strong>Led by:</strong> Data Steward</div>
                                                <div><strong>Needs:</strong> SME & Data Owner approval</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Indicator -->
                                        <div class="mt-3">
                                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                                <span>Progress</span>
                                                <span id="step-3-progress">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div id="step-3-bar" class="bg-purple-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 4: Protect -->
                                    <div class="process-step-enhanced bg-white rounded-lg shadow-md border-2 border-gray-200 p-4 hover:shadow-lg transition-all cursor-pointer" id="enhanced-step-4" onclick="selectProcessStep(4)">
                                        <div class="text-center mb-3">
                                            <div class="w-12 h-12 bg-gray-400 text-white rounded-full text-xl flex items-center justify-center mx-auto mb-2 font-bold">4</div>
                                            <h4 class="font-bold text-gray-800">Protect</h4>
                                            <p class="text-xs text-gray-600">Configure Quality Rules for CDEs</p>
                                        </div>
                                        
                                        <!-- Key Deliverables -->
                                        <div class="mb-3">
                                            <div class="text-xs font-semibold text-orange-700 mb-1">Key Outputs:</div>
                                            <ul class="text-xs text-gray-600 space-y-1">
                                                <li>‚Ä¢ Quality-rule library</li>
                                                <li>‚Ä¢ Quality dashboard/alert mechanism</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Simplified Roles -->
                                        <div class="border-t pt-2">
                                            <div class="text-xs font-semibold text-gray-700 mb-2">Team:</div>
                                            <div class="text-xs text-gray-600">
                                                <div><strong>Led by:</strong> Data Quality Engineer</div>
                                                <div><strong>Needs:</strong> Data Owner approval</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Indicator -->
                                        <div class="mt-3">
                                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                                <span>Progress</span>
                                                <span id="step-4-progress">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div id="step-4-bar" class="bg-orange-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 5: Report -->
                                    <div class="process-step-enhanced bg-white rounded-lg shadow-md border-2 border-gray-200 p-4 hover:shadow-lg transition-all cursor-pointer" id="enhanced-step-5" onclick="selectProcessStep(5)">
                                        <div class="text-center mb-3">
                                            <div class="w-12 h-12 bg-gray-400 text-white rounded-full text-xl flex items-center justify-center mx-auto mb-2 font-bold">5</div>
                                            <h4 class="font-bold text-gray-800">Report</h4>
                                            <p class="text-xs text-gray-600">Aggregate Coverage & Quality Scores</p>
                                        </div>
                                        
                                        <!-- Key Deliverables -->
                                        <div class="mb-3">
                                            <div class="text-xs font-semibold text-indigo-700 mb-1">Key Outputs:</div>
                                            <ul class="text-xs text-gray-600 space-y-1">
                                                <li>‚Ä¢ Data Governance Report (visualized)</li>
                                                <li>‚Ä¢ Next-step improvement plan</li>
                                            </ul>
                                        </div>
                                        
                                        <!-- Simplified Roles -->
                                        <div class="border-t pt-2">
                                            <div class="text-xs font-semibold text-gray-700 mb-2">Team:</div>
                                            <div class="text-xs text-gray-600">
                                                <div><strong>Led by:</strong> Data Steward</div>
                                                <div><strong>Needs:</strong> Management approval</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Indicator -->
                                        <div class="mt-3">
                                            <div class="flex justify-between text-xs text-gray-500 mb-1">
                                                <span>Progress</span>
                                                <span id="step-5-progress">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div id="step-5-bar" class="bg-indigo-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Overall Progress Tracker -->
                                <div class="bg-white rounded-lg p-4 mb-6 border">
                                    <div class="flex justify-between items-center mb-3">
                                        <h4 class="font-bold text-gray-800">Overall Project Progress</h4>
                                        <span id="overall-progress-text" class="text-sm text-gray-600">Not Started</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
                                        <div id="overall-progress-bar" class="bg-gradient-to-r from-blue-500 to-indigo-500 h-4 rounded-full transition-all duration-1000" style="width: 0%">
                                            <div class="h-full bg-white bg-opacity-30 rounded-full"></div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Start</span>
                                        <span>25%</span>
                                        <span>50%</span>
                                        <span>75%</span>
                                        <span>Complete</span>
                                    </div>
                                </div>

                                <!-- Selected Step Details -->
                                <div id="step-details" class="bg-white rounded-lg p-6 border mb-6">
                                    <h4 class="text-xl font-bold mb-4 text-gray-800">Step 1: Discover - Detailed Information</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <h5 class="font-semibold text-gray-700 mb-2">Key Activities:</h5>
                                            <ul class="text-sm text-gray-600 space-y-1">
                                                <li>‚Ä¢ Scan systems/data lakes/folders horizontally</li>
                                                <li>‚Ä¢ Inventory \"what tables and fields exist\"</li>
                                                <li>‚Ä¢ Create system-table-field mapping</li>
                                                <li>‚Ä¢ AI-powered identification and classification</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-semibold text-gray-700 mb-2">Success Criteria:</h5>
                                            <ul class="text-sm text-gray-600 space-y-1">
                                                <li>‚Ä¢ 95%+ system coverage rate</li>
                                                <li>‚Ä¢ Complete asset inventory</li>
                                                <li>‚Ä¢ Data lineage foundation established</li>
                                                <li>‚Ä¢ Initial quality assessment completed</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Process Control -->
                                <div class="text-center mb-6">
                                    <button onclick="startEnhancedGovernanceProcess()" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-semibold shadow-lg text-lg">
                                        üöÄ Start Complete Governance Process
                                    </button>
                                    <button onclick="pauseProcess()" class="ml-4 px-6 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-all" id="pause-btn" style="display:none;">
                                        <i class="fas fa-pause mr-2"></i>Pause
                                    </button>
                                    <button onclick="resetEnhancedProcess()" class="ml-4 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all">
                                        <i class="fas fa-undo mr-2"></i>Reset Process
                                    </button>
                                </div>

                                <!-- Process Results -->
                                <div id="enhanced-process-results" class="mt-6"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Use Cases & Implementation -->
                    <div id="use-cases-content" class="tab-content hidden">
                        <div class="space-y-8">
                            <!-- Use Cases Overview -->
                            <div>
                                        <h3 class="text-2xl font-bold mb-6 text-gray-800">üéØ Data Governance Use Cases</h3>
                                <div id="use-cases-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <!-- Use cases will be loaded here -->
                                </div>
                            </div>

                            <!-- Selected Use Case Details -->
                            <div id="selected-use-case-details" class="hidden">
                                <h3 class="text-2xl font-bold mb-6 text-gray-800" id="selected-use-case-title">Use Case Implementation</h3>
                                
                                <!-- Implementation Components Grid -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                                    <!-- Data Inventory -->
                                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border-l-4 border-blue-500">
                                        <h4 class="text-xl font-bold mb-4 text-blue-700">
                                            <i class="fas fa-database mr-2"></i>Data Inventory
                                            <span class="text-sm font-normal text-blue-500 ml-2">(FINDABLE)</span>
                                        </h4>
                                        <div id="use-case-data-inventory">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Business Glossary & CDEs -->
                                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 border-l-4 border-green-500">
                                        <h4 class="text-xl font-bold mb-4 text-green-700">
                                            <i class="fas fa-book mr-2"></i>Business Glossary & CDEs
                                            <span class="text-sm font-normal text-green-500 ml-2">(REUSABLE)</span>
                                        </h4>
                                        <div id="use-case-glossary">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Data Quality -->
                                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 border-l-4 border-purple-500">
                                        <h4 class="text-xl font-bold mb-4 text-purple-700">
                                            <i class="fas fa-chart-line mr-2"></i>Data Quality Metrics
                                            <span class="text-sm font-normal text-purple-500 ml-2">(INTEROPERABLE)</span>
                                        </h4>
                                        <div id="use-case-quality">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>

                                    <!-- Workflow -->
                                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-6 border-l-4 border-orange-500">
                                        <h4 class="text-xl font-bold mb-4 text-orange-700">
                                            <i class="fas fa-cogs mr-2"></i>Compliance Workflow
                                            <span class="text-sm font-normal text-orange-500 ml-2">(ACCESSIBLE)</span>
                                        </h4>
                                        <div id="use-case-workflow">
                                            <!-- Will be populated when use case is selected -->
                                        </div>
                                    </div>
                                </div>

                                        <!-- 5-Step Implementation Process Breakdown -->
                                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-6 mb-6 border-l-4 border-indigo-500">
                                            <h4 class="text-xl font-bold mb-4 text-indigo-800">
                                                <i class="fas fa-list-ol mr-2"></i>5-Step Implementation Process
                                                <span class="text-sm font-normal text-indigo-500 ml-2">(Customized for Selected Use Case)</span>
                                            </h4>
                                            <div id="use-case-process-steps" class="space-y-4">
                                                <!-- Will be populated when use case is selected -->
                                                <div class="text-center text-indigo-600 py-4">
                                                    <i class="fas fa-route text-2xl mb-2"></i>
                                                    <p>Select a use case above to see customized step-by-step implementation details</p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Enhanced Interactive Step Interface for Individual Health -->
                                        <div id="individual-health-detailed-interface" class="hidden bg-white rounded-lg shadow-lg border p-6 mb-6">
                                            <h4 class="text-xl font-bold mb-6 text-blue-800">
                                                <i class="fas fa-heartbeat mr-2"></i>Interactive Implementation: Product Impact on Individual Health
                                            </h4>
                                            
                                            <!-- Step Navigation -->
                                            <div class="flex justify-center mb-6">
                                                <div class="flex space-x-2">
                                                    <button onclick="showDetailedStep(1)" id="detailed-step-1" class="detailed-step-btn active px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold">
                                                        Step 1: Discover
                                                    </button>
                                                    <button onclick="showDetailedStep(2)" id="detailed-step-2" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                        Step 2: Define  
                                                    </button>
                                                    <button onclick="showDetailedStep(3)" id="detailed-step-3" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                        Step 3: Standardize
                                                    </button>
                                                    <button onclick="showDetailedStep(4)" id="detailed-step-4" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                        Step 4: Protect
                                                    </button>
                                                    <button onclick="showDetailedStep(5)" id="detailed-step-5" class="detailed-step-btn px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm font-semibold">
                                                        Step 5: Report
                                        </button>
                                    </div>
                                </div>

                                            <!-- Step 1: Discover Interface -->
                                            <div id="detailed-step-content-1" class="detailed-step-content">
                                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                                    <!-- Left: System Scanning Progress -->
                                                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                                        <h5 class="font-bold text-blue-800 mb-3">
                                                            <i class="fas fa-search mr-2"></i>Clinical System Scanning Progress
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="text-sm">
                                                                <div class="flex justify-between mb-1">
                                                                    <span>Clinical Research DB</span>
                                                                    <span class="text-green-600 font-semibold">100%</span>
                                                                </div>
                                                                <div class="w-full bg-gray-200 rounded-full h-2">
                                                                    <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                                                </div>
                                                            </div>
                                                            <div class="text-sm">
                                                                <div class="flex justify-between mb-1">
                                                                    <span>Biomarker LIMS</span>
                                                                    <span class="text-blue-600 font-semibold">78%</span>
                                                                </div>
                                                                <div class="w-full bg-gray-200 rounded-full h-2">
                                                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 78%"></div>
                                                                </div>
                                                            </div>
                                                            <div class="text-sm">
                                                                <div class="flex justify-between mb-1">
                                                                    <span>CRO Data Systems</span>
                                                                    <span class="text-yellow-600 font-semibold">45%</span>
                                                                </div>
                                                                <div class="w-full bg-gray-200 rounded-full h-2">
                                                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 45%"></div>
                                                                </div>
                                                            </div>
                                                            <div class="text-sm">
                                                                <div class="flex justify-between mb-1">
                                                                    <span>Clinical Trial APIs</span>
                                                                    <span class="text-gray-600 font-semibold">12%</span>
                                                                </div>
                                                                <div class="w-full bg-gray-200 rounded-full h-2">
                                                                    <div class="bg-gray-500 h-2 rounded-full" style="width: 12%"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Center: Data Asset Discovery View (System‚ÜíTable‚ÜíField) -->
                                                    <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                                        <h5 class="font-bold text-green-800 mb-3">
                                                            <i class="fas fa-sitemap mr-2"></i>Clinical Data Asset Discovery
                                                        </h5>
                                                        <div class="space-y-2 text-sm">
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-blue-700">üìä Biomarker_Clinical_DB</div>
                                                                <div class="ml-4 text-gray-600">
                                                                    ‚îî‚îÄ‚îÄ biomarker_results <span class="text-purple-600">(67 fields)</span><br>
                                                                    ‚îî‚îÄ‚îÄ clinical_observations <span class="text-purple-600">(43 fields)</span><br>
                                                                    ‚îî‚îÄ‚îÄ adverse_events <span class="text-purple-600">(28 fields)</span><br>
                                                                    ‚îî‚îÄ‚îÄ subject_demographics <span class="text-purple-600">(19 fields)</span>
                                                                </div>
                                                            </div>
                                                            <div class="bg-white p-2 rounded border">
                                                                <div class="font-semibold text-blue-700">üìÑ biomarker_exposure_data.csv</div>
                                                                <div class="ml-4 text-gray-600">
                                                                    ‚îî‚îÄ‚îÄ Clinical Fields <span class="text-purple-600">(8 core fields)</span><br>
                                                                    ‚Ä¢ SUBJ_ID, COT_LEVEL, NNAL_CONC<br>
                                                                    ‚Ä¢ AGE_VERIF, EXP_HIST, BMI_VAL
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right: Real-time Discovery Statistics -->
                                                    <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                                        <h5 class="font-bold text-purple-800 mb-3">
                                                            <i class="fas fa-chart-line mr-2"></i>Real-time Discovery Stats
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-2xl font-bold text-blue-600">157</div>
                                                                <div class="text-xs text-gray-600">Clinical Fields Found</div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-2xl font-bold text-green-600">9</div>
                                                                <div class="text-xs text-gray-600">Biomarker Tables</div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-2xl font-bold text-orange-600">3</div>
                                                                <div class="text-xs text-gray-600">Clinical Systems</div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-2xl font-bold text-purple-600">92%</div>
                                                                <div class="text-xs text-gray-600">Data Quality Score</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Bottom: Clinical Admin Operations Panel -->
                                                <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                    <h5 class="font-bold text-gray-800 mb-3">
                                                        <i class="fas fa-cogs mr-2"></i>Clinical Data Administrator Operations
                                                    </h5>
                                                    <div class="flex flex-wrap gap-2">
                                                        <button class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                                                            <i class="fas fa-play mr-1"></i>Resume Biomarker Scan
                                                        </button>
                                                        <button class="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600">
                                                            <i class="fas fa-download mr-1"></i>Export Clinical Inventory
                                                        </button>
                                                        <button class="px-3 py-1 bg-orange-500 text-white rounded text-sm hover:bg-orange-600">
                                                            <i class="fas fa-shield-alt mr-1"></i>Configure CRO Access
                                                        </button>
                                                        <button class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600">
                                                            <i class="fas fa-sync mr-1"></i>Sync Clinical APIs
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Step 2: Define Interface -->
                                            <div id="detailed-step-content-2" class="detailed-step-content hidden">
                                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                                    <!-- Left: Card-style Metadata Editor -->
                                                    <div class="space-y-4">
                                                        <h5 class="font-bold text-green-800">
                                                            <i class="fas fa-edit mr-2"></i>Clinical Metadata Card Editor
                                                        </h5>
                                                        <div class="bg-white border rounded-lg p-4">
                                                            <div class="flex justify-between items-center mb-3">
                                                                <span class="font-semibold text-blue-700">Cotinine_Level</span>
                                                                <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">Active</span>
                                                            </div>
                                                            <div class="space-y-3">
                                                                <div>
                                                                    <label class="text-xs font-medium text-gray-700">Business Definition:</label>
                                                                    <textarea class="w-full mt-1 p-2 border rounded text-sm" rows="3">Biomarker for nicotine exposure measured in ng/mL. Used to assess individual exposure levels in clinical studies per ICH bioanalytical guidelines.</textarea>
                                                                </div>
                                                                <div class="grid grid-cols-2 gap-2">
                                                                    <div>
                                                                        <label class="text-xs font-medium text-gray-700">Data Type:</label>
                                                                        <select class="w-full mt-1 p-2 border rounded text-sm">
                                                                            <option>DECIMAL(8,2)</option>
                                                                            <option>FLOAT</option>
                                                                            <option>NUMERIC</option>
                                                                        </select>
                                                                    </div>
                                                                    <div>
                                                                        <label class="text-xs font-medium text-gray-700">Units:</label>
                                                                        <input type="text" class="w-full mt-1 p-2 border rounded text-sm" value="ng/mL">
                                                                    </div>
                                                                </div>
                                                                <div>
                                                                    <label class="text-xs font-medium text-gray-700">Sample Values:</label>
                                                                    <input type="text" class="w-full mt-1 p-2 border rounded text-sm" value="15.7, 23.4, 8.9, 45.2">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right: Field Definition Writer & Business Glossary -->
                                                    <div class="space-y-4">
                                                        <h5 class="font-bold text-green-800">
                                                            <i class="fas fa-book mr-2"></i>Clinical Business Glossary Integration
                                                        </h5>
                                                        <div class="bg-green-50 border rounded-lg p-4">
                                                            <div class="space-y-3">
                                                                <div class="bg-white p-3 rounded border">
                                                                    <div class="font-semibold text-purple-700">ICH E6 Guidelines</div>
                                                                    <div class="text-sm text-gray-600">Good Clinical Practice standards for biomarker validation</div>
                                                                </div>
                                                                <div class="bg-white p-3 rounded border">
                                                                    <div class="font-semibold text-purple-700">FDA Bioanalytical Method</div>
                                                                    <div class="text-sm text-gray-600">Regulatory guidance for biomarker measurement protocols</div>
                                                                </div>
                                                                <div class="bg-white p-3 rounded border">
                                                                    <div class="font-semibold text-purple-700">Clinical Study Protocol</div>
                                                                    <div class="text-sm text-gray-600">Standardized procedures for individual health assessments</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- Version Control History -->
                                                        <div class="bg-blue-50 border rounded-lg p-4">
                                                            <h6 class="font-semibold text-blue-800 mb-2">Version Control History</h6>
                                                            <div class="space-y-2 text-xs">
                                                                <div class="flex justify-between">
                                                                    <span>v1.2 - Added ICH compliance notes</span>
                                                                    <span class="text-gray-500">2024-05-30</span>
                                                                </div>
                                                                <div class="flex justify-between">
                                                                    <span>v1.1 - Updated measurement units</span>
                                                                    <span class="text-gray-500">2024-05-28</span>
                                                                </div>
                                                                <div class="flex justify-between">
                                                                    <span>v1.0 - Initial definition</span>
                                                                    <span class="text-gray-500">2024-05-25</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Other steps will be hidden initially -->
                                            <div id="detailed-step-content-3" class="detailed-step-content hidden">
                                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                                    <!-- Left: CDE Selection Flow -->
                                                    <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                                        <h5 class="font-bold text-purple-800 mb-3">
                                                            <i class="fas fa-filter mr-2"></i>CDE Selection Flow (Drag & Drop)
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border border-dashed border-purple-300">
                                                                <div class="text-xs font-semibold text-purple-700 mb-2">üéØ Selected CDEs (9)</div>
                                                                <div class="space-y-1 text-xs">
                                                                    <div class="bg-green-100 p-2 rounded border">
                                                                        <span class="font-semibold">Cotinine_Level</span>
                                                                        <span class="text-green-600 ml-2">‚úì Validated</span>
                                                                    </div>
                                                                    <div class="bg-green-100 p-2 rounded border">
                                                                        <span class="font-semibold">Subject_ID</span>
                                                                        <span class="text-green-600 ml-2">‚úì Validated</span>
                                                                    </div>
                                                                    <div class="bg-yellow-100 p-2 rounded border">
                                                                        <span class="font-semibold">Clinical_Endpoint</span>
                                                                        <span class="text-yellow-600 ml-2">‚ö† Pending Review</span>
                                                                    </div>
                                                                    <div class="bg-blue-100 p-2 rounded border">
                                                                        <span class="font-semibold">Exposure_Biomarker</span>
                                                                        <span class="text-blue-600 ml-2">üìù In Progress</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-gray-100 p-3 rounded border border-dashed border-gray-300">
                                                                <div class="text-xs font-semibold text-gray-700 mb-2">üìã Available Fields (148)</div>
                                                                <div class="text-xs text-gray-600">Drag fields above to create CDEs</div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Center: CDE Definition Workspace -->
                                                    <div class="bg-indigo-50 rounded-lg p-4 border border-indigo-200">
                                                        <h5 class="font-bold text-indigo-800 mb-3">
                                                            <i class="fas fa-edit mr-2"></i>CDE Definition Workspace
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="flex justify-between items-center mb-2">
                                                                    <span class="font-semibold text-indigo-700">Cotinine_Level</span>
                                                                    <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">CDE-001</span>
                                                                </div>
                                                                <div class="space-y-2 text-xs">
                                                                    <div>
                                                                        <div class="font-medium text-gray-700">Standard Name:</div>
                                                                        <input type="text" class="w-full mt-1 p-2 border rounded" value="COTININE_LEVEL_BIOMARKER_NG_ML">
                                                                    </div>
                                                                    <div>
                                                                        <div class="font-medium text-gray-700">Harmonized Units:</div>
                                                                        <select class="w-full mt-1 p-2 border rounded">
                                                                            <option>ng/mL (nanograms per milliliter)</option>
                                                                            <option>Œºg/L (micrograms per liter)</option>
                                                                            <option>nmol/L (nanomoles per liter)</option>
                                                                        </select>
                                                                    </div>
                                                                    <div>
                                                                        <div class="font-medium text-gray-700">Value Range:</div>
                                                                        <div class="flex gap-2">
                                                                            <input type="number" placeholder="Min" class="flex-1 p-2 border rounded" value="0.1">
                                                                            <input type="number" placeholder="Max" class="flex-1 p-2 border rounded" value="500.0">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-blue-50 p-3 rounded border">
                                                                <div class="text-xs font-semibold text-blue-700 mb-1">Transformation Logic:</div>
                                                                <code class="text-xs bg-gray-100 p-2 rounded block">
                                                                    IF source_unit = 'Œºg/L' THEN value * 1000 ELSE value
                                                                </code>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right: Business SME Review Dashboard -->
                                                    <div class="bg-orange-50 rounded-lg p-4 border border-orange-200">
                                                        <h5 class="font-bold text-orange-800 mb-3">
                                                            <i class="fas fa-users mr-2"></i>Data Steward Review Dashboard
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-lg font-bold text-green-600">6/9</div>
                                                                <div class="text-xs text-gray-600">CDEs Approved</div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-lg font-bold text-yellow-600">2/9</div>
                                                                <div class="text-xs text-gray-600">Pending Review</div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded text-center">
                                                                <div class="text-lg font-bold text-blue-600">1/9</div>
                                                                <div class="text-xs text-gray-600">In Discussion</div>
                                                            </div>
                                                            <div class="bg-green-100 p-3 rounded">
                                                                <div class="text-xs font-semibold text-green-700 mb-1">Next Review Session:</div>
                                                                <div class="text-xs text-green-600">June 3, 2024 - 2:00 PM</div>
                                                                <div class="text-xs text-green-600">Dr. Sarah Chen (Data Steward)</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Bottom: CDE Mapping Preview -->
                                                <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                    <h5 class="font-bold text-gray-800 mb-3">
                                                        <i class="fas fa-sitemap mr-2"></i>CDE Mapping & Transformation Preview
                                                    </h5>
                                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs">
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-blue-700 mb-2">Source System</div>
                                                            <div>Biomarker_Clinical_DB.cotinine_ng_ml</div>
                                                            <div class="text-gray-600">Range: 0.5-450.2 ng/mL</div>
                                                        </div>
                                                        <div class="flex items-center justify-center">
                                                            <div class="bg-purple-500 text-white px-3 py-1 rounded">
                                                                <i class="fas fa-arrow-right mr-1"></i>Transform
                                                            </div>
                                                        </div>
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-green-700 mb-2">CDE Standard</div>
                                                            <div>COTININE_LEVEL_BIOMARKER_NG_ML</div>
                                                            <div class="text-gray-600">Standardized: 0.1-500.0 ng/mL</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="detailed-step-content-4" class="detailed-step-content hidden">
                                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                                    <!-- Left: Quality Rule Configuration -->
                                                    <div class="bg-red-50 rounded-lg p-4 border border-red-200">
                                                        <h5 class="font-bold text-red-800 mb-3">
                                                            <i class="fas fa-shield-alt mr-2"></i>Quality Rule Configuration
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="font-semibold text-red-700 mb-2">Cotinine_Level Rules</div>
                                                                <div class="space-y-2 text-xs">
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <span class="font-medium">Range Check:</span> 0.1 ‚â§ value ‚â§ 500.0
                                                                    </div>
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <span class="font-medium">Not Null:</span> Required field
                                                                    </div>
                                                                    <div class="bg-yellow-100 p-2 rounded">
                                                                        <span class="font-medium">Outlier Detection:</span> > 3œÉ from mean
                                                                    </div>
                                                                    <div class="bg-blue-100 p-2 rounded">
                                                                        <span class="font-medium">Cross-Field:</span> vs. exposure history
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="font-semibold text-red-700 mb-2">Subject_ID Rules</div>
                                                                <div class="space-y-2 text-xs">
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <span class="font-medium">Format:</span> [A-Z]{3}[0-9]{4}
                                                                    </div>
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <span class="font-medium">Uniqueness:</span> Per study protocol
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Center: Real-time Quality Monitor -->
                                                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                                        <h5 class="font-bold text-blue-800 mb-3">
                                                            <i class="fas fa-monitor-heart-rate mr-2"></i>Real-time Quality Monitor
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-center mb-2">
                                                                    <div class="text-2xl font-bold text-green-600">94.7%</div>
                                                                    <div class="text-xs text-gray-600">Overall Data Quality</div>
                                                                </div>
                                                                <div class="w-full bg-gray-200 rounded-full h-3">
                                                                    <div class="bg-green-500 h-3 rounded-full" style="width: 94.7%"></div>
                                                                </div>
                                                            </div>
                                                            <div class="grid grid-cols-2 gap-2">
                                                                <div class="bg-white p-2 rounded text-center">
                                                                    <div class="text-lg font-bold text-blue-600">98.2%</div>
                                                                    <div class="text-xs text-gray-600">Completeness</div>
                                                                </div>
                                                                <div class="bg-white p-2 rounded text-center">
                                                                    <div class="text-lg font-bold text-green-600">96.8%</div>
                                                                    <div class="text-xs text-gray-600">Accuracy</div>
                                                                </div>
                                                                <div class="bg-white p-2 rounded text-center">
                                                                    <div class="text-lg font-bold text-yellow-600">89.3%</div>
                                                                    <div class="text-xs text-gray-600">Consistency</div>
                                                                </div>
                                                                <div class="bg-white p-2 rounded text-center">
                                                                    <div class="text-lg font-bold text-purple-600">95.1%</div>
                                                                    <div class="text-xs text-gray-600">Validity</div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-yellow-100 p-3 rounded border">
                                                                <div class="text-xs font-semibold text-yellow-700 mb-1">‚ö† Active Alerts (3)</div>
                                                                <div class="space-y-1 text-xs">
                                                                    <div>Cotinine outliers detected: 7 records</div>
                                                                    <div>Missing BMI values: 12 subjects</div>
                                                                    <div>Subject ID format issues: 2 records</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right: Quality Score Trends -->
                                                    <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                                        <h5 class="font-bold text-green-800 mb-3">
                                                            <i class="fas fa-chart-line mr-2"></i>Quality Score Trends
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-green-700 mb-2">7-Day Trend</div>
                                                                <div class="h-20 bg-gradient-to-r from-yellow-200 via-green-200 to-green-300 rounded relative">
                                                                    <div class="absolute bottom-2 left-2 text-xs text-gray-600">Mon</div>
                                                                    <div class="absolute bottom-2 right-2 text-xs text-gray-600">Sun</div>
                                                                    <div class="absolute top-2 left-1/2 transform -translate-x-1/2 text-xs font-semibold text-green-700">
                                                                        üìà +2.3% improvement
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-green-700 mb-2">Quality Milestones</div>
                                                                <div class="space-y-1 text-xs">
                                                                    <div class="flex justify-between">
                                                                        <span>Target: 95%</span>
                                                                        <span class="text-yellow-600">94.7% (99.7%)</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Regulatory: 90%</span>
                                                                        <span class="text-green-600">‚úì Met</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Baseline: 85%</span>
                                                                        <span class="text-green-600">‚úì Exceeded</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-blue-100 p-3 rounded border">
                                                                <div class="text-xs font-semibold text-blue-700 mb-1">Next Quality Review:</div>
                                                                <div class="text-xs text-blue-600">June 5, 2024</div>
                                                                <div class="text-xs text-blue-600">Clinical Quality Team</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Bottom: Alert Configuration Panel -->
                                                <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                    <h5 class="font-bold text-gray-800 mb-3">
                                                        <i class="fas fa-bell mr-2"></i>Alert Threshold Configuration
                                                    </h5>
                                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-xs">
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-red-700 mb-2">Critical Alerts</div>
                                                            <div>Quality < 85%</div>
                                                            <div>Missing critical biomarkers</div>
                                                            <div class="text-red-600 mt-1">üìß Immediate notification</div>
                                                        </div>
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-yellow-700 mb-2">Warning Alerts</div>
                                                            <div>Quality 85-90%</div>
                                                            <div>Outlier threshold exceeded</div>
                                                            <div class="text-yellow-600 mt-1">üìä Daily summary</div>
                                                        </div>
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-blue-700 mb-2">Info Alerts</div>
                                                            <div>Quality 90-95%</div>
                                                            <div>Trend notifications</div>
                                                            <div class="text-blue-600 mt-1">üìà Weekly report</div>
                                                        </div>
                                                        <div class="bg-white p-3 rounded border">
                                                            <div class="font-semibold text-green-700 mb-2">Success Alerts</div>
                                                            <div>Quality > 95%</div>
                                                            <div>Milestone achievements</div>
                                                            <div class="text-green-600 mt-1">üéâ Celebration notice</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="detailed-step-content-5" class="detailed-step-content hidden">
                                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                                    <!-- Left: Executive Summary Generator -->
                                                    <div class="bg-indigo-50 rounded-lg p-4 border border-indigo-200">
                                                        <h5 class="font-bold text-indigo-800 mb-3">
                                                            <i class="fas fa-file-alt mr-2"></i>Executive Summary Generator
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-indigo-700 mb-2">Clinical Data Governance Report</div>
                                                                <div class="space-y-2 text-xs">
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <div class="font-medium">Data Assets:</div>
                                                                        <div>2 clinical systems cataloged</div>
                                                                        <div>157 biomarker fields mapped</div>
                                                                    </div>
                                                                    <div class="bg-blue-100 p-2 rounded">
                                                                        <div class="font-medium">CDEs Standardized:</div>
                                                                        <div>9 critical biomarker CDEs</div>
                                                                        <div>100% clinical SME approval</div>
                                                                    </div>
                                                                    <div class="bg-purple-100 p-2 rounded">
                                                                        <div class="font-medium">Quality Achievement:</div>
                                                                        <div>94.7% overall quality score</div>
                                                                        <div>98% regulatory compliance</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-green-100 p-3 rounded border">
                                                                <div class="text-xs font-semibold text-green-700 mb-1">Business Impact:</div>
                                                                <div class="text-xs">
                                                                    ‚Ä¢ 75% reduction in clinical data prep time<br>
                                                                    ‚Ä¢ $850K annual cost savings<br>
                                                                    ‚Ä¢ 40% faster biomarker analysis
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Center: KPI Dashboard -->
                                                    <div class="bg-teal-50 rounded-lg p-4 border border-teal-200">
                                                        <h5 class="font-bold text-teal-800 mb-3">
                                                            <i class="fas fa-tachometer-alt mr-2"></i>Clinical Governance KPIs
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="grid grid-cols-2 gap-2">
                                                                <div class="bg-white p-3 rounded text-center">
                                                                    <div class="text-xl font-bold text-blue-600">157</div>
                                                                    <div class="text-xs text-gray-600">Biomarker Fields</div>
                                                                    <div class="text-xs text-green-600">+23% vs baseline</div>
                                                                </div>
                                                                <div class="bg-white p-3 rounded text-center">
                                                                    <div class="text-xl font-bold text-green-600">9</div>
                                                                    <div class="text-xs text-gray-600">Clinical CDEs</div>
                                                                    <div class="text-xs text-green-600">100% validated</div>
                                                                </div>
                                                                <div class="bg-white p-3 rounded text-center">
                                                                    <div class="text-xl font-bold text-purple-600">94.7%</div>
                                                                    <div class="text-xs text-gray-600">Quality Score</div>
                                                                    <div class="text-xs text-green-600">+9.7% improvement</div>
                                                                </div>
                                                                <div class="bg-white p-3 rounded text-center">
                                                                    <div class="text-xl font-bold text-orange-600">98%</div>
                                                                    <div class="text-xs text-gray-600">Compliance</div>
                                                                    <div class="text-xs text-green-600">Regulatory ready</div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-teal-700 mb-2">Implementation Timeline</div>
                                                                <div class="space-y-1 text-xs">
                                                                    <div class="flex justify-between">
                                                                        <span>Discover (3 weeks)</span>
                                                                        <span class="text-green-600">‚úì Complete</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Define (4 weeks)</span>
                                                                        <span class="text-green-600">‚úì Complete</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Standardize (3 weeks)</span>
                                                                        <span class="text-green-600">‚úì Complete</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Protect (2 weeks)</span>
                                                                        <span class="text-green-600">‚úì Complete</span>
                                                                    </div>
                                                                    <div class="flex justify-between">
                                                                        <span>Report (1 week)</span>
                                                                        <span class="text-blue-600">üìä Current</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right: Trend Analysis & Recommendations -->
                                                    <div class="bg-yellow-50 rounded-lg p-4 border border-yellow-200">
                                                        <h5 class="font-bold text-yellow-800 mb-3">
                                                            <i class="fas fa-chart-bar mr-2"></i>Trend Analysis & Next Steps
                                                        </h5>
                                                        <div class="space-y-3">
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-yellow-700 mb-2">üìà Performance Trends</div>
                                                                <div class="space-y-2 text-xs">
                                                                    <div class="bg-green-100 p-2 rounded">
                                                                        <div class="font-medium">Quality Improvement:</div>
                                                                        <div>+15% in 12 weeks</div>
                                                                        <div>Consistent upward trend</div>
                                                                    </div>
                                                                    <div class="bg-blue-100 p-2 rounded">
                                                                        <div class="font-medium">Data Coverage:</div>
                                                                        <div>From 67% to 98%</div>
                                                                        <div>All critical biomarkers included</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-white p-3 rounded border">
                                                                <div class="text-xs font-semibold text-yellow-700 mb-2">üéØ Recommendations</div>
                                                                <div class="space-y-1 text-xs">
                                                                    <div>‚Ä¢ Expand to additional CRO systems</div>
                                                                    <div>‚Ä¢ Implement real-time quality monitoring</div>
                                                                    <div>‚Ä¢ Integrate with regulatory submission tools</div>
                                                                    <div>‚Ä¢ Establish automated validation workflows</div>
                                                                </div>
                                                            </div>
                                                            <div class="bg-purple-100 p-3 rounded border">
                                                                <div class="text-xs font-semibold text-purple-700 mb-1">üöÄ Next Phase Planning:</div>
                                                                <div class="text-xs">
                                                                    Phase 2: Population Health Integration<br>
                                                                    Estimated Timeline: 8-10 weeks<br>
                                                                    Expected ROI: $1.2M additional savings
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Bottom: Exportable Report Templates -->
                                                <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                                                    <h5 class="font-bold text-gray-800 mb-3">
                                                        <i class="fas fa-download mr-2"></i>Exportable Report Templates
                                                    </h5>
                                                    <div class="flex flex-wrap gap-2">
                                                        <button class="px-4 py-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                                                            <i class="fas fa-file-pdf mr-1"></i>Executive Summary (PDF)
                                                        </button>
                                                        <button class="px-4 py-2 bg-green-500 text-white rounded text-sm hover:bg-green-600">
                                                            <i class="fas fa-file-excel mr-1"></i>Detailed KPI Report (Excel)
                                                        </button>
                                                        <button class="px-4 py-2 bg-purple-500 text-white rounded text-sm hover:bg-purple-600">
                                                            <i class="fas fa-presentation mr-1"></i>Board Presentation (PowerPoint)
                                                        </button>
                                                        <button class="px-4 py-2 bg-orange-500 text-white rounded text-sm hover:bg-orange-600">
                                                            <i class="fas fa-chart-line mr-1"></i>Trend Analysis Dashboard (Live)
                                                        </button>
                                                        <button class="px-4 py-2 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                                            <i class="fas fa-code mr-1"></i>Technical Implementation Guide (JSON)
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: AI Assistant -->
                    <div id="ai-assistant-content" class="tab-content hidden">
                        <div class="space-y-8">
                                    <!-- Workflow Status Bar & Progress Tracking -->
                                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg shadow-lg p-6">
                                        <div class="flex items-center justify-between mb-4">
                                            <div class="flex items-center space-x-4">
                                                <i class="fas fa-route text-2xl"></i>
                                                <div>
                                                    <h3 class="text-xl font-bold">Data Governance Workflow</h3>
                                                    <p class="text-blue-100 text-sm">Product Impact on Individual Health</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center space-x-6">
                                                <div class="text-right">
                                                    <div class="text-lg font-bold">73%</div>
                                                    <div class="text-xs text-blue-100">Overall Progress</div>
                                                </div>
                                                <div class="text-right">
                                                    <div class="text-lg font-bold">2.5 days</div>
                                                    <div class="text-xs text-blue-100">Est. Remaining</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Steps -->
                                        <div class="flex items-center justify-between mb-4">
                                            <div class="flex items-center text-center">
                                                <div class="flex items-center justify-center w-8 h-8 bg-green-500 rounded-full text-white text-sm font-bold">‚úì</div>
                                                <div class="ml-2 text-sm">
                                                    <div class="font-semibold">Discover</div>
                                                    <div class="text-xs text-green-200">Complete</div>
                                                </div>
                                            </div>
                                            <div class="flex-1 h-1 bg-green-400 mx-2"></div>
                                            
                                            <div class="flex items-center text-center">
                                                <div class="flex items-center justify-center w-8 h-8 bg-green-500 rounded-full text-white text-sm font-bold">‚úì</div>
                                                <div class="ml-2 text-sm">
                                                    <div class="font-semibold">Define</div>
                                                    <div class="text-xs text-green-200">Complete</div>
                                                </div>
                                            </div>
                                            <div class="flex-1 h-1 bg-green-400 mx-2"></div>
                                            
                                            <div class="flex items-center text-center">
                                                <div class="flex items-center justify-center w-8 h-8 bg-yellow-500 rounded-full text-white text-sm font-bold">3</div>
                                                <div class="ml-2 text-sm">
                                                    <div class="font-semibold">Standardize</div>
                                                    <div class="text-xs text-yellow-200">In Progress (67%)</div>
                                                </div>
                                            </div>
                                            <div class="flex-1 h-1 bg-yellow-300 mx-2"></div>
                                            
                                            <div class="flex items-center text-center">
                                                <div class="flex items-center justify-center w-8 h-8 bg-gray-400 rounded-full text-white text-sm font-bold">4</div>
                                                <div class="ml-2 text-sm">
                                                    <div class="font-semibold">Protect</div>
                                                    <div class="text-xs text-gray-300">Pending</div>
                                                </div>
                                            </div>
                                            <div class="flex-1 h-1 bg-gray-400 mx-2"></div>
                                            
                                            <div class="flex items-center text-center">
                                                <div class="flex items-center justify-center w-8 h-8 bg-gray-400 rounded-full text-white text-sm font-bold">5</div>
                                                <div class="ml-2 text-sm">
                                                    <div class="font-semibold">Report</div>
                                                    <div class="text-xs text-gray-300">Pending</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Current Step Details -->
                                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div class="flex items-center space-x-3">
                                                    <div class="flex items-center justify-center w-10 h-10 bg-yellow-500 rounded-full text-white font-bold">
                                                        <i class="fas fa-cogs"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-bold">Current: Step 3 - Standardize Clinical CDEs</div>
                                                        <div class="text-sm text-blue-100">9 biomarker CDEs being harmonized ‚Ä¢ 6 approved, 2 pending review, 1 in discussion</div>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button onclick="jumpToWorkflowStep(3)" class="px-4 py-2 bg-white bg-opacity-30 hover:bg-opacity-40 rounded-lg text-sm font-medium transition-colors">
                                                        <i class="fas fa-external-link-alt mr-1"></i>View Details
                                                    </button>
                                                    <button onclick="markStepComplete(3)" class="px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg text-sm font-medium transition-colors">
                                                        <i class="fas fa-check mr-1"></i>Mark Complete
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- AI Contextual Alerts -->
                                        <div id="workflow-ai-alerts" class="mt-4 space-y-2">
                                            <div class="bg-yellow-500 bg-opacity-30 border border-yellow-400 rounded-lg p-3 flex items-center">
                                                <i class="fas fa-lightbulb text-yellow-200 mr-3"></i>
                                                <div class="text-sm">
                                                    <strong>AI Suggestion:</strong> CDE Clinical_Endpoint needs SME approval from Dr. Sarah Chen. Schedule review for optimal progress.
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- FAIR Principles & Persona Selection (Enhanced) -->
                            <div class="bg-white rounded-lg shadow border p-6">
                                <div class="flex justify-between items-center mb-6">
                                            <!-- FAIR Navigation with Workflow Context -->
                                    <div class="flex space-x-6">
                                        <button onclick="highlightFAIR('findable')" id="fair-findable" class="fair-nav-btn px-4 py-2 rounded-lg text-blue-600 bg-blue-50 font-semibold">
                                            üîç FINDABLE
                                                    <span class="text-xs block text-gray-500">Step 1 Context</span>
                                        </button>
                                        <button onclick="highlightFAIR('accessible')" id="fair-accessible" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                                            üîì ACCESSIBLE
                                                    <span class="text-xs block text-gray-500">Step 2 Context</span>
                                        </button>
                                                <button onclick="highlightFAIR('interoperable')" id="fair-interoperable" class="fair-nav-btn px-4 py-2 rounded-lg text-yellow-600 bg-yellow-50 border border-yellow-300">
                                            üîÑ INTEROPERABLE
                                                    <span class="text-xs block text-yellow-600">Current Step Focus</span>
                                        </button>
                                        <button onclick="highlightFAIR('reusable')" id="fair-reusable" class="fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50">
                                            ‚ôªÔ∏è REUSABLE
                                                    <span class="text-xs block text-gray-500">Steps 4-5 Context</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Persona Selection -->
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm font-medium text-gray-700">View as:</span>
                                        <select id="persona-selector" onchange="switchPersona()" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                            <option value="steward">üõ°Ô∏è Data Steward</option>
                                            <option value="owner">üëë Data Owner</option>
                                            <option value="sme">üß† SME</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Current Persona Description -->
                                <div id="persona-description" class="p-3 bg-blue-50 rounded-lg">
                                    <p class="text-sm text-blue-800">
                                                <strong>Data Steward View:</strong> Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across regulatory landscape.
                                    </p>
                                </div>
                            </div>

                                    <!-- AI-Powered Data Discovery (Enhanced with Context & Collaboration) -->
                            <div class="bg-white rounded-lg shadow border p-6">
                                <h3 class="text-2xl font-bold mb-6 text-gray-800">
                                    <i class="fas fa-search mr-2 text-blue-600"></i>AI-Powered Data Discovery
                                </h3>
                                        
                                        <!-- Main Search Bar -->
                                <div class="flex gap-4 mb-6">
                                    <input 
                                        type="text" 
                                        id="ai-search-input" 
                                                placeholder="Ask AI: 'Show me pending CDE approvals' or 'Where are cotinine biomarkers?'" 
                                        class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                    <select id="ai-use-case-filter" class="p-3 border border-gray-300 rounded-lg">
                                        <option value="">All Use Cases</option>
                                        <option value="Product Description (Nonclinical)">Product Description (Nonclinical)</option>
                                                <option value="Product Impact on Individual Health" selected>Product Impact on Individual Health</option>
                                        <option value="Product Impact on Population Health">Product Impact on Population Health</option>
                                        <option value="Comprehensive Regulatory Compliance">Comprehensive Regulatory Compliance</option>
                                    </select>
                                    <button onclick="aiSearchData()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        <i class="fas fa-brain mr-2"></i>AI Search
                                    </button>
                                </div>

                                        <!-- Three Column Layout: Context Suggestions | Main Results | Collaboration Tools -->
                                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                                            <!-- Left: Contextual AI Suggestions -->
                                            <div class="lg:col-span-1 space-y-4">
                                                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                                    <h5 class="font-bold text-blue-800 mb-3">
                                                        <i class="fas fa-lightbulb mr-2"></i>Step 3 Context Help
                                                    </h5>
                                                    <div class="space-y-3 text-sm">
                                                        <button onclick="aiContextSearch('show me pending CDE approvals')" class="w-full text-left p-2 bg-white rounded border hover:bg-blue-50 transition-colors">
                                                            <i class="fas fa-clock text-yellow-600 mr-2"></i>Show pending CDE approvals
                                                        </button>
                                                        <button onclick="aiContextSearch('cotinine standardization rules')" class="w-full text-left p-2 bg-white rounded border hover:bg-blue-50 transition-colors">
                                                            <i class="fas fa-rules text-purple-600 mr-2"></i>View standardization rules
                                                        </button>
                                                        <button onclick="aiContextSearch('SME review schedule')" class="w-full text-left p-2 bg-white rounded border hover:bg-blue-50 transition-colors">
                                                            <i class="fas fa-calendar text-green-600 mr-2"></i>Check SME review schedule
                                                        </button>
                                                        <button onclick="aiContextSearch('biomarker harmonization')" class="w-full text-left p-2 bg-white rounded border hover:bg-blue-50 transition-colors">
                                                            <i class="fas fa-sync text-orange-600 mr-2"></i>Harmonization status
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <!-- AI Quality Insights -->
                                                <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                                    <h6 class="font-bold text-green-800 mb-2">
                                                        <i class="fas fa-chart-line mr-1"></i>AI Quality Insights
                                                    </h6>
                                                    <div class="text-xs space-y-2">
                                                        <div class="bg-white p-2 rounded border">
                                                            <div class="font-medium text-green-700">Data Quality: 94.7%</div>
                                                            <div class="text-gray-600">‚Üë 2.3% from last week</div>
                                                        </div>
                                                        <div class="bg-white p-2 rounded border">
                                                            <div class="font-medium text-blue-700">CDE Progress: 67%</div>
                                                            <div class="text-gray-600">6 of 9 approved</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Center: Main Discovery Results -->
                                            <div class="lg:col-span-2">
                                <div id="ai-discovery-results" class="mb-6">
                                    <div class="text-center text-gray-500 py-8">
                                        <i class="fas fa-robot text-4xl mb-4"></i>
                                                        <p class="mb-2">Ask AI to discover and locate your data assets</p>
                                                        <p class="text-sm text-gray-400">Try: "Show me pending CDE approvals" or "Where are cotinine biomarkers?"</p>
                                    </div>
                                </div>

                                                <!-- AI Data Location Guide -->
                                                <div class="bg-blue-50 rounded-lg p-4">
                                    <h4 class="font-bold text-blue-800 mb-3">üó∫Ô∏è AI Data Location Guide</h4>
                                    <div id="data-location-guide" class="text-sm text-blue-700">
                                                        <p>Use AI search above to get intelligent guidance on where to find specific data assets across your clinical data landscape.</p>
                                    </div>
                                </div>
                            </div>

                                            <!-- Right: Collaboration Tools -->
                                            <div class="lg:col-span-1 space-y-4">
                                                <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                                    <h5 class="font-bold text-purple-800 mb-3">
                                                        <i class="fas fa-users mr-2"></i>Team Collaboration
                                                    </h5>
                                                    
                                                    <!-- Team Status -->
                                                    <div class="space-y-2 text-sm">
                                                        <div class="flex items-center space-x-2 p-2 bg-white rounded border">
                                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                                            <div class="flex-1">
                                                                <div class="font-medium">Dr. Sarah Chen</div>
                                                                <div class="text-xs text-gray-600">Data Steward ‚Ä¢ Online</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center space-x-2 p-2 bg-white rounded border">
                                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                                            <div class="flex-1">
                                                                <div class="font-medium">Mike Johnson</div>
                                                                <div class="text-xs text-gray-600">Data Steward ‚Ä¢ Away</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center space-x-2 p-2 bg-white rounded border">
                                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                                            <div class="flex-1">
                                                                <div class="font-medium">Lisa Park</div>
                                                                <div class="text-xs text-gray-600">Data Owner ‚Ä¢ Offline</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- Quick Actions -->
                                                    <div class="mt-4 space-y-2">
                                                        <button onclick="mentionTeamMember('sarah')" class="w-full px-3 py-2 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors">
                                                            <i class="fas fa-at mr-1"></i>@Dr. Sarah Chen
                                                        </button>
                                                        <button onclick="scheduleReview()" class="w-full px-3 py-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors">
                                                            <i class="fas fa-calendar mr-1"></i>Schedule Review
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <!-- Active Notifications -->
                                                <div class="bg-orange-50 rounded-lg p-4 border border-orange-200">
                                                    <h6 class="font-bold text-orange-800 mb-2">
                                                        <i class="fas fa-bell mr-1"></i>Active Notifications
                                                    </h6>
                                                    <div class="space-y-2 text-xs">
                                                        <div class="bg-white p-2 rounded border border-orange-200">
                                                            <div class="font-medium text-orange-700">CDE Review Pending</div>
                                                            <div class="text-gray-600">Clinical_Endpoint awaiting approval</div>
                                                            <div class="text-orange-600 mt-1">2 hours ago</div>
                                                        </div>
                                                        <div class="bg-white p-2 rounded border border-green-200">
                                                            <div class="font-medium text-green-700">SME Available</div>
                                                            <div class="text-gray-600">Dr. Sarah Chen is online</div>
                                                            <div class="text-green-600 mt-1">Just now</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AI Smart Suggestions (Enhanced with Workflow Collaboration) -->
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border-l-4 border-purple-500">
                                <h3 class="text-2xl font-bold mb-6 text-purple-800">
                                            <i class="fas fa-brain mr-2"></i>AI Smart Suggestions & Workflow Collaboration
                                </h3>
                                        <div class="mb-6 text-sm text-purple-700">
                                            <p>AI provides context-aware suggestions based on your persona, current workflow step, and team collaboration needs.</p>
                                </div>
                                        
                                        <!-- Enhanced Smart Suggestions with Collaboration -->
                                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                            <!-- Left: Workflow-Aware AI Suggestions -->
                                            <div class="space-y-4">
                                                <h4 class="font-bold text-purple-800">üéØ Step 3 Focused Suggestions</h4>
                                <div id="ai-smart-suggestions" class="space-y-3">
                                                    <div class="bg-white p-4 rounded-lg border border-purple-200 shadow-sm">
                                                        <div class="flex items-center justify-between mb-2">
                                                            <span class="font-semibold text-purple-700">üéØ Focus on Population Health Use Case</span>
                                                            <button onclick="viewUseCaseSuggestion('population')" class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200">
                                                                View Use Case
                                                            </button>
                                </div>
                                                        <p class="text-sm text-gray-600 mb-3">Based on current regulatory trends, prioritize Population Health compliance data.</p>
                                                        <div class="flex items-center text-xs text-purple-600">
                                                            <i class="fas fa-lightbulb mr-1"></i>AI confidence: 94%
                            </div>
                        </div>
                                                    
                                                    <div class="bg-white p-4 rounded-lg border border-green-200 shadow-sm">
                                                        <div class="flex items-center justify-between mb-2">
                                                            <span class="font-semibold text-green-700">üìä Validate High-Priority CDEs</span>
                                                            <button onclick="reviewCDESuggestion()" class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200">
                                                                Review CDEs
                                                            </button>
                                                        </div>
                                                        <p class="text-sm text-gray-600 mb-3">44 CDEs identified with >94% confidence. Review with domain experts.</p>
                                                        <div class="flex items-center text-xs text-green-600">
                                                            <i class="fas fa-users mr-1"></i>Requires SME approval
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="bg-white p-4 rounded-lg border border-orange-200 shadow-sm">
                                                        <div class="flex items-center justify-between mb-2">
                                                            <span class="font-semibold text-orange-700">üîç Discover Missing Biomarker Data</span>
                                                            <button onclick="discoverMissingData()" class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded hover:bg-orange-200">
                                                                Discover
                                                            </button>
                                                        </div>
                                                        <p class="text-sm text-gray-600 mb-3">AI detected potential gaps in biomarker data for FDA Section 2.8.</p>
                                                        <div class="flex items-center text-xs text-orange-600">
                                                            <i class="fas fa-search mr-1"></i>Auto-discovery ready
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Center: Team Collaboration & Communication -->
                                            <div class="space-y-4">
                                                <h4 class="font-bold text-purple-800">üí¨ Team Communication Hub</h4>
                                                
                                                <!-- Recent Activity Feed -->
                                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                                    <h5 class="font-semibold text-blue-800 mb-3">
                                                        <i class="fas fa-comments mr-2"></i>Recent Activity
                                                    </h5>
                                                    <div class="space-y-3 text-sm">
                                                        <div class="flex items-start space-x-3 p-2 bg-blue-50 rounded">
                                                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold">SC</div>
                                                            <div class="flex-1">
                                                                <div class="font-medium">Dr. Sarah Chen</div>
                                                                <div class="text-gray-600">"Approved CDE Clinical_Endpoint with minor revisions"</div>
                                                                <div class="text-xs text-blue-600 mt-1">15 minutes ago</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-start space-x-3 p-2 bg-gray-50 rounded">
                                                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold">MJ</div>
                                                            <div class="flex-1">
                                                                <div class="font-medium">Mike Johnson</div>
                                                                <div class="text-gray-600">"Quality score improved to 94.7% after latest updates"</div>
                                                                <div class="text-xs text-gray-600 mt-1">1 hour ago</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- AI Collaboration Suggestions -->
                                                <div class="bg-white rounded-lg p-4 border border-purple-200">
                                                    <h5 class="font-semibold text-purple-800 mb-3">
                                                        <i class="fas fa-robot mr-2"></i>AI Collaboration Tips
                                                    </h5>
                                                    <div class="space-y-2 text-sm">
                                                        <div class="bg-yellow-50 p-3 rounded border-l-4 border-yellow-400">
                                                            <div class="font-medium text-yellow-800">üí° Optimal Timing</div>
                                                            <div class="text-yellow-700">Dr. Sarah Chen typically reviews CDEs between 2-4 PM. Schedule now for faster approval.</div>
                                                            <button onclick="scheduleOptimalReview()" class="mt-2 text-xs bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600">
                                                                Schedule Now
                                                            </button>
                                                        </div>
                                                        <div class="bg-green-50 p-3 rounded border-l-4 border-green-400">
                                                            <div class="font-medium text-green-800">üöÄ Workflow Acceleration</div>
                                                            <div class="text-green-700">Batch review of remaining 3 CDEs could complete Step 3 by tomorrow.</div>
                                                            <button onclick="batchReviewCDEs()" class="mt-2 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600">
                                                                Batch Review
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Right: Progress Tracking & Milestones -->
                                            <div class="space-y-4">
                                                <h4 class="font-bold text-purple-800">üìà Progress & Milestones</h4>
                                                
                                                <!-- Milestone Tracker -->
                                                <div class="bg-white rounded-lg p-4 border border-green-200">
                                                    <h5 class="font-semibold text-green-800 mb-3">
                                                        <i class="fas fa-flag-checkered mr-2"></i>Milestone Progress
                                                    </h5>
                                                    <div class="space-y-3">
                                                        <div class="flex items-center justify-between">
                                                            <span class="text-sm font-medium">Clinical CDEs (Step 3)</span>
                                                            <span class="text-sm text-green-600 font-bold">67%</span>
                                                        </div>
                                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                                            <div class="bg-green-500 h-2 rounded-full" style="width: 67%"></div>
                                                        </div>
                                                        <div class="text-xs text-gray-600">6 of 9 CDEs approved ‚Ä¢ Est. completion: Tomorrow</div>
                                                        
                                                        <div class="mt-4 flex items-center justify-between">
                                                            <span class="text-sm font-medium">Overall Project</span>
                                                            <span class="text-sm text-blue-600 font-bold">73%</span>
                                                        </div>
                                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 73%"></div>
                                                        </div>
                                                        <div class="text-xs text-gray-600">3 of 5 steps complete ‚Ä¢ Est. completion: 2.5 days</div>
                                                    </div>
                                                </div>
                                                
                                                <!-- AI Predictions & Recommendations -->
                                                <div class="bg-white rounded-lg p-4 border border-indigo-200">
                                                    <h5 class="font-semibold text-indigo-800 mb-3">
                                                        <i class="fas fa-crystal-ball mr-2"></i>AI Predictions
                                                    </h5>
                                                    <div class="space-y-3 text-sm">
                                                        <div class="bg-indigo-50 p-3 rounded">
                                                            <div class="font-medium text-indigo-700">üìä Project Velocity</div>
                                                            <div class="text-indigo-600">Current pace: 12% faster than average</div>
                                                            <div class="text-xs text-gray-600 mt-1">Based on similar biomarker projects</div>
                                                        </div>
                                                        <div class="bg-blue-50 p-3 rounded">
                                                            <div class="font-medium text-blue-700">‚ö†Ô∏è Risk Assessment</div>
                                                            <div class="text-blue-600">Low risk of delays if SME availability maintained</div>
                                                            <div class="text-xs text-gray-600 mt-1">95% confidence level</div>
                                                        </div>
                                                        <div class="bg-green-50 p-3 rounded">
                                                            <div class="font-medium text-green-700">üí∞ ROI Forecast</div>
                                                            <div class="text-green-600">On track for $850K annual savings</div>
                                                            <div class="text-xs text-gray-600 mt-1">40% faster biomarker analysis expected</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Bottom: Quick Actions Bar -->
                                        <div class="mt-6 bg-white bg-opacity-60 rounded-lg p-4 border border-purple-300">
                                            <div class="flex items-center justify-between">
                                                <div class="text-sm font-medium text-purple-800">üöÄ Quick Actions</div>
                                                <div class="flex space-x-3">
                                                    <button onclick="generateProgressReport()" class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors">
                                                        <i class="fas fa-file-alt mr-1"></i>Generate Report
                                                    </button>
                                                    <button onclick="escalateToManager()" class="px-4 py-2 bg-orange-500 text-white rounded-lg text-sm hover:bg-orange-600 transition-colors">
                                                        <i class="fas fa-exclamation-triangle mr-1"></i>Escalate Issue
                                                    </button>
                                                    <button onclick="scheduleTeamMeeting()" class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors">
                                                        <i class="fas fa-video mr-1"></i>Team Meeting
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Global variables for demo state
        let currentPersona = 'steward';
        let currentFAIR = 'findable';
        
        // Persona definitions
        const personas = {
            steward: {
                name: "üõ°Ô∏è Data Steward",
                description: "Focus on data quality, governance metrics, and regulatory compliance. Your goal: Ensure FAIR data foundation across regulatory landscape.",
                color: "blue",
                priorities: ["Quality Metrics", "Compliance Tracking", "Governance Workflows"]
            },
            owner: {
                name: "üëë Data Owner", 
                description: "Manage data assets, control access, and demonstrate business value. Your goal: Maximize ROI from data while ensuring secure, controlled access.",
                color: "green",
                priorities: ["Asset Management", "Access Control", "Business Value", "ROI Tracking"]
            },
            sme: {
                name: "üß† SME",
                description: "Provide domain expertise, validate business definitions, and ensure data meets regulatory requirements. Your goal: Make data meaningful and fit-for-purpose.",
                color: "purple", 
                priorities: ["Business Definitions", "Domain Validation", "Regulatory Requirements"]
            }
        };

        // FAIR principle definitions
        const fairPrinciples = {
            findable: {
                title: "üîç FINDABLE",
                description: "AI indexes data across scattered sources and creates unified metadata catalog",
                example: "Data stewards ask: 'Show me datasets related to patient demographics' ‚Üí instant results",
                color: "blue"
            },
            accessible: {
                title: "üîì ACCESSIBLE", 
                description: "AI automates data access workflows with built-in compliance checks",
                example: "Steward requests access to claims data ‚Üí AI explains process, initiates request, tracks approvals",
                color: "green"
            },
            interoperable: {
                title: "üîÑ INTEROPERABLE",
                description: "AI identifies and standardizes data formats, units, and terminology",
                example: "AI suggests: 'Diagnosis_Code in System A maps to ICD-10 code in System B'",
                color: "orange"
            },
            reusable: {
                title: "‚ôªÔ∏è REUSABLE", 
                description: "AI drafts business definitions, flags CDEs, and enriches metadata",
                example: "AI drafts: 'Transaction Amount = Total billed amount per claim' + flags as CDE",
                color: "purple"
            }
        };

        function switchPersona() {
            const selector = document.getElementById('persona-selector');
            currentPersona = selector.value;
            const persona = personas[currentPersona];
            
            // Update description
            const description = document.getElementById('persona-description');
            description.innerHTML = `
                <p class="text-sm text-${persona.color}-800">
                    <strong>${persona.name} View:</strong> ${persona.description}
                </p>
            `;
            description.className = `mt-3 p-3 bg-${persona.color}-50 rounded-lg`;
            
            // Update AI activity
            updateAIActivity(`Adapting interface for ${persona.name}...`);
            
            // Reload data with persona context
            setTimeout(() => {
                loadPersonaSpecificData();
                updateAISuggestionsForContext();
                updateAIActivity(`Ready to assist ${persona.name} with FAIR data governance`);
            }, 1000);
        }

        function highlightFAIR(principle) {
            currentFAIR = principle;
            
            // Reset all FAIR buttons
            document.querySelectorAll('.fair-nav-btn').forEach(btn => {
                btn.className = 'fair-nav-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-50';
            });
            
            // Highlight selected principle
            const fairPrinciple = fairPrinciples[principle];
            const btn = document.getElementById(`fair-${principle}`);
            btn.className = `fair-nav-btn px-4 py-2 rounded-lg text-${fairPrinciple.color}-600 bg-${fairPrinciple.color}-50 font-semibold`;
            
            // Update AI activity
            updateAIActivity(`Demonstrating ${fairPrinciple.title} capabilities...`);
            
            // Show FAIR-specific UI elements and update suggestions
            setTimeout(() => {
                highlightFAIRFeatures(principle);
                updateAISuggestionsForContext();
                updateAIActivity(`${fairPrinciple.title} - ${fairPrinciple.description}`);
            }, 500);
        }

        function updateAIActivity(message) {
            const activity = document.getElementById('ai-activity');
            activity.textContent = message;
            
            // Show working animation
            const status = document.getElementById('ai-status');
            status.classList.add('animate-pulse');
            setTimeout(() => status.classList.remove('animate-pulse'), 2000);
        }

        function loadPersonaSpecificData() {
            const persona = personas[currentPersona];
            
            // Update impact metrics based on persona
            const metrics = document.getElementById('impact-metrics');
            if (currentPersona === 'owner') {
                metrics.innerHTML = `
                    <span class="mr-4">üí∞ $2M+ ROI annually</span>
                    <span class="mr-4">‚ö° 95% access automation</span>
                    <span>üîê 100% compliance tracking</span>
                `;
            } else if (currentPersona === 'sme') {
                metrics.innerHTML = `
                    <span class="mr-4">üìö 44 CDEs identified</span>
                    <span class="mr-4">üéØ 98% definition accuracy</span>
                    <span>‚ö° 80% validation time saved</span>
                `;
            } else {
                metrics.innerHTML = `
                    <span class="mr-4">‚ö° 85% time saved</span>
                    <span class="mr-4">üìä 91% quality score</span>
                    <span>üéØ 98% compliance ready</span>
                `;
            }
        }

        function highlightFAIRFeatures(principle) {
            // Add visual cues based on FAIR principle
            const elements = document.querySelectorAll('.bg-white');
            elements.forEach(el => {
                if (principle === 'findable' && el.querySelector('#search-input')) {
                    el.style.boxShadow = '0 0 15px rgba(59, 130, 246, 0.3)';
                } else if (principle === 'accessible' && el.querySelector('#workflow-result')) {
                    el.style.boxShadow = '0 0 15px rgba(34, 197, 94, 0.3)';
                } else if (principle === 'interoperable' && el.querySelector('#business-glossary')) {
                    el.style.boxShadow = '0 0 15px rgba(249, 115, 22, 0.3)';
                } else if (principle === 'reusable' && el.querySelector('#data-quality')) {
                    el.style.boxShadow = '0 0 15px rgba(147, 51, 234, 0.3)';
                } else {
                    el.style.boxShadow = '';
                }
            });
        }

        function updateAISuggestionsForContext() {
            const persona = personas[currentPersona];
            const fairPrinciple = fairPrinciples[currentFAIR];
            
            // Get current use case context
            const useCaseFilter = document.getElementById('use-case-filter').value;
            const useCase = useCaseFilter || 'general';
            
            let suggestions = [];
            
            // Generate suggestions based on FAIR principle + Persona + Use Case combination
            if (currentFAIR === 'findable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Product Characterization Discovery',
                                content: 'AI found 47 product specification fields across 8 systems. Implement unified catalog to reduce nonclinical data discovery from 2 days to 15 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Section 2.8 Data Indexing',
                                content: 'Auto-index product tabulation data per FDA Section 2.8 standards. Estimated effort savings: 35 hours/week for regulatory stewards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Biomarker Data Discovery',
                                content: 'AI indexed 156 biomarker fields across clinical databases. Unified discovery reduces individual health assessment prep from 4 days to 45 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Clinical Data Auto-Cataloging',
                                content: 'Smart indexing of cotinine, NNAL, and exposure biomarkers. Saves clinical stewards 25 hours/week in data preparation.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Surveillance Data Unification',
                                content: 'AI discovered 89 population health metrics across epidemiological systems. Unified catalog reduces surveillance prep from 5 days to 1 hour.'
                            },
                            {
                                type: 'indexing',
                                title: 'Public Health Data Indexing',
                                content: 'Auto-catalog demographic, behavioral, and health outcome data for population studies. Saves 40 hours/week for health stewards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Cross-Section Data Discovery',
                                content: 'AI unified discovery across Sections 2.7-2.10. Comprehensive regulatory package prep reduced from 3 weeks to 2 days.'
                            },
                            {
                                type: 'indexing',
                                title: 'FDA Submission Catalog',
                                content: 'Smart indexing for complete PMTA submissions. Auto-links product, clinical, and population data. Saves 60 hours/week.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'discovery',
                                title: 'Universal Data Discovery',
                                content: 'AI found 127 total fields across systems. Recommend implementing unified metadata catalog to improve discovery from 3 days to 30 minutes.'
                            },
                            {
                                type: 'indexing',
                                title: 'Smart Indexing Opportunity',
                                content: 'AI can auto-index 50+ Excel files and 12 email repositories. Estimated effort savings: 40 hours/week for your steward team.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Product Data Asset ROI',
                                content: 'Nonclinical data assets worth $800K annually. AI discovery increases utilization by 70%, adding $560K value to product development.'
                            },
                            {
                                type: 'catalog',
                                title: 'Product Catalog Investment',
                                content: 'Section 2.8 compliance catalog reduces regulatory delays by 40%. Estimated value: $2M saved in faster market entry.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Biomarker Asset Portfolio',
                                content: 'Clinical biomarker data valued at $1.2M. AI findability increases research productivity by 85%, adding $1M annual value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Clinical Discovery ROI',
                                content: 'Unified clinical catalog saves $300K annually in study startup costs. Faster biomarker discovery accelerates research timelines.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Population Data Monetization',
                                content: 'Surveillance data assets worth $600K annually. AI discovery enables 3x more health studies, generating $1.8M value.'
                            },
                            {
                                type: 'catalog',
                                title: 'Epidemiological Investment',
                                content: 'Population health catalog reduces study planning by 60%. Value: $400K saved in faster public health insights.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Regulatory Portfolio Value',
                                content: 'Complete PMTA data portfolio worth $3.5M. AI findability reduces submission prep by 75%, saving $2.6M annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'FDA Submission ROI',
                                content: 'Comprehensive catalog accelerates submissions by 90 days. Faster approvals generate $5M+ in early market revenue.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'asset',
                                title: 'Asset Visibility ROI',
                                content: 'Implementing AI discovery across 7 data sources could increase asset utilization by 60%. Projected value: $500K annually.'
                            },
                            {
                                type: 'catalog',
                                title: 'Catalog Investment',
                                content: 'Unified metadata catalog reduces data discovery costs by $200K/year. Payback period: 6 months with current search volumes.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Product Metadata Validation',
                                content: 'AI suggests enriching product metadata with Section 2.8 nonclinical standards. Your expertise needed for product characterization accuracy.'
                            },
                            {
                                type: 'tagging',
                                title: 'Nonclinical Data Tagging',
                                content: 'AI can auto-tag product specification data with FDA categories (chemistry, toxicology, pharmacology). Expert validation needed: 94% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Biomarker Metadata Enhancement',
                                content: 'AI suggests enriching biomarker metadata with ICH bioanalytical guidelines. Your clinical expertise critical for accuracy validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Clinical Endpoint Tagging',
                                content: 'AI can classify biomarker data by endpoint type (exposure, effect, susceptibility). Data Steward validation required: 91% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Epidemiological Metadata',
                                content: 'AI suggests enriching population data with WHO surveillance standards. Your public health expertise needed for study design validation.'
                            },
                            {
                                type: 'tagging',
                                title: 'Health Outcome Classification',
                                content: 'AI can categorize health outcomes by ICD-10 codes and severity. Epidemiological expert review needed: 89% confidence.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Cross-Section Validation',
                                content: 'AI suggests harmonizing metadata across Sections 2.7-2.10. Your regulatory expertise critical for FDA submission readiness.'
                            },
                            {
                                type: 'tagging',
                                title: 'PMTA Data Classification',
                                content: 'AI can tag data by PMTA section requirements (collection, tabulation, analysis, exchange). Regulatory SME validation needed: 96% confidence.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'metadata',
                                title: 'Metadata Enrichment',
                                content: 'AI suggests enriching product metadata with Section 2.8 standards. This improves findability for regulatory submissions.'
                            },
                            {
                                type: 'tagging',
                                title: 'Smart Tagging',
                                content: 'AI can auto-tag biomarker data with regulatory categories (FDA, ICH, ISO). Confidence: 96% based on content analysis.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'accessible') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Nonclinical Access Workflow',
                                content: 'AI automates product characterization data access with Section 2.8 compliance checks. Reduces access time from 5 days to 2 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Product Data Compliance',
                                content: 'Set up automated compliance monitoring for product specifications. AI tracks usage for FDA nonclinical audit readiness.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Clinical Data Access Control',
                                content: 'AI automates biomarker data access with GCP compliance checks. Reduces clinical data approval from 10 days to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Biomarker Data Governance',
                                content: 'Automated monitoring for clinical biomarker access ensures ICH guidelines compliance. AI tracks all research usage patterns.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Population Data Ethics',
                                content: 'AI automates surveillance data access with privacy compliance checks. Reduces IRB approval workflow from 3 weeks to 2 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'Public Health Data Tracking',
                                content: 'Automated monitoring for population health data ensures ethical research compliance. AI tracks all epidemiological usage.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Multi-Section Access Control',
                                content: 'AI orchestrates access across Sections 2.7-2.10 with comprehensive compliance. Reduces PMTA data prep from 3 weeks to 3 days.'
                            },
                            {
                                type: 'compliance',
                                title: 'FDA Submission Tracking',
                                content: 'End-to-end compliance monitoring for complete regulatory submissions. AI ensures audit trail across all data sections.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'workflow',
                                title: 'Access Workflow Automation',
                                content: 'AI can automate 85% of data access requests with built-in compliance checks. Reduces approval time from 2 weeks to 4 hours.'
                            },
                            {
                                type: 'compliance',
                                title: 'Compliance Monitoring',
                                content: 'Set up automated FDA compliance monitoring for data access. AI tracks all data usage for audit readiness.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Product Data Access ROI',
                                content: 'Automated nonclinical access control saves $200K annually in compliance costs. Reduces product development security risks by 80%.'
                            },
                            {
                                type: 'audit',
                                title: 'Section 2.8 Audit Efficiency',
                                content: 'Automated product data tracking reduces FDA audit prep by 85%. Typical compliance review: 3 days vs 3 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Clinical Access ROI',
                                content: 'Automated biomarker access control saves $350K annually in GCP compliance. Reduces clinical trial security risks by 90%.'
                            },
                            {
                                type: 'audit',
                                title: 'Biomarker Audit Trail',
                                content: 'Automated clinical data tracking reduces regulatory audit prep by 90%. ICH compliance review: 2 days vs 4 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Population Data Ethics ROI',
                                content: 'Automated surveillance access saves $150K annually in IRB compliance costs. Reduces public health study risks by 85%.'
                            },
                            {
                                type: 'audit',
                                title: 'Epidemiological Audit',
                                content: 'Automated population health tracking reduces ethics audit prep by 80%. Privacy compliance review: 1 day vs 2 weeks manual.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'PMTA Access Management',
                                content: 'Comprehensive access control saves $500K annually across all regulatory sections. Reduces FDA submission risks by 95%.'
                            },
                            {
                                type: 'audit',
                                title: 'Multi-Section Audit Value',
                                content: 'Automated cross-section tracking reduces PMTA audit prep by 95%. Complete FDA review: 5 days vs 8 weeks manual.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'access_control',
                                title: 'Access Control ROI',
                                content: 'Implementing role-based access reduces security risks by 70% and saves 25 hours/week in manual approvals. Value: $300K/year.'
                            },
                            {
                                type: 'audit',
                                title: 'Audit Trail Investment',
                                content: 'Automated access tracking reduces compliance audit costs by 90%. Typical audit preparation: 2 days vs 3 weeks manual.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Product Access Guidelines',
                                content: 'AI suggests product characterization access rules based on FDA Section 2.8 guidelines. Your nonclinical expertise needed for protocol design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Product Data Protocols',
                                content: 'AI can draft tobacco product data access protocols aligned with nonclinical standards. Expert review needed for regulatory accuracy.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Clinical Access Design',
                                content: 'AI suggests biomarker access rules based on ICH GCP guidelines. Your clinical expertise critical for appropriate researcher permissions.'
                            },
                            {
                                type: 'protocols',
                                title: 'Biomarker Access Protocols',
                                content: 'AI can draft clinical biomarker access protocols aligned with Section 2.7 collection standards. Data Steward validation required.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Population Ethics Framework',
                                content: 'AI suggests surveillance data access rules based on WHO privacy guidelines. Your epidemiological expertise needed for ethical design.'
                            },
                            {
                                type: 'protocols',
                                title: 'Public Health Protocols',
                                content: 'AI can draft population health access protocols aligned with surveillance standards. Public health SME review required.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Cross-Section Access Design',
                                content: 'AI suggests comprehensive access rules spanning Sections 2.7-2.10. Your regulatory expertise critical for PMTA submission protocols.'
                            },
                            {
                                type: 'protocols',
                                title: 'FDA Submission Protocols',
                                content: 'AI can draft complete PMTA access protocols aligned with all regulatory sections. Regulatory SME validation essential.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'permissions',
                                title: 'Domain-Based Permissions',
                                content: 'AI suggests clinical data access rules based on ICH GCP guidelines. Ensures appropriate researcher access to biomarker studies.'
                            },
                            {
                                type: 'protocols',
                                title: 'Access Protocol Design',
                                content: 'AI can draft product-specific data access protocols aligned with Section 2.7 collection standards for your review.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'interoperable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Product Field Standardization',
                                content: 'AI identified 12 critical product field mappings for Section 2.8 compliance. Start with "PRODUCT_TYPE" ‚Üí "Product_Category" (97% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Nonclinical Data Harmonization',
                                content: 'Implementing AI-suggested product CDEs improves nonclinical data quality from 82% to 96%. Focus on chemistry and toxicology standards.'
                            }
                        ];
                    } else if (useCase.includes('Individual Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Biomarker Field Mapping',
                                content: 'AI identified 18 biomarker field mappings for clinical compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Clinical Standards Alignment',
                                content: 'Implementing biomarker CDEs improves clinical data quality from 76% to 93%. Focus on exposure and effect biomarker standards.'
                            }
                        ];
                    } else if (useCase.includes('Population Health')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Population Health Mapping',
                                content: 'AI identified 14 surveillance field mappings for epidemiological studies. Start with "AGE_GROUP" ‚Üí "Age_Category" (92% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Surveillance Standards',
                                content: 'Implementing population health CDEs improves surveillance data quality from 79% to 91%. Focus on demographic and outcome standards.'
                            }
                        ];
                    } else if (useCase.includes('Comprehensive Regulatory')) {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Cross-Section Field Mapping',
                                content: 'AI identified 35 field mappings across Sections 2.7-2.10. Comprehensive PMTA standardization achieves 98% compliance readiness.'
                            },
                            {
                                type: 'standards',
                                title: 'FDA Standards Harmonization',
                                content: 'Implementing cross-section CDEs improves overall regulatory data quality from 85% to 97%. Complete PMTA standards alignment.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'mapping',
                                title: 'Field Mapping Priority',
                                content: 'AI identified 15 critical field mappings needed for tobacco regulatory compliance. Start with "COT_LEVEL" ‚Üí "Cotinine_Level" (94% confidence).'
                            },
                            {
                                type: 'standards',
                                title: 'Standards Harmonization',
                                content: 'Implementing AI-suggested CDE mappings improves data quality from 78% to 94%. Focus on Section 2.8-2.9 standards first.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Product Integration Savings',
                                content: 'AI nonclinical standardization reduces product development integration costs by 70%. Typical project: $150K vs $500K manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Product Data Reuse Value',
                                content: 'Standardized product data increases regulatory reuse by 400%. Each dataset now serves 5 submission types vs 1.2 previously.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'integration',
                                title: 'Integration Cost Savings',
                                content: 'AI standardization reduces future integration costs by 60%. Typical project: $200K vs $500K for manual harmonization.'
                            },
                            {
                                type: 'reuse',
                                title: 'Data Reuse Value',
                                content: 'Standardized tobacco data increases reuse by 300%. Each dataset now serves 4 use cases vs 1.3 previously.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'Product CDE Validation',
                                content: 'AI detected "CHEMICAL_COMPOSITION" field requires expert validation for Section 2.8 CDE mapping. Chemistry expertise needed.'
                            },
                            {
                                type: 'terminology',
                                title: 'Product Terminology Standards',
                                content: 'AI suggests aligning "Tobacco_Type" with FDA product classification terminology. Your regulatory expertise needed for accuracy.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'cde_mapping',
                                title: 'CDE Validation Required',
                                content: 'AI detected "NNAL_CONC" field requires expert validation for CDE mapping. Please review against FDA biomarker guidance.'
                            },
                            {
                                type: 'terminology',
                                title: 'Terminology Standardization',
                                content: 'AI suggests aligning "Age_Verification" with ICH E6 Guidelines terminology. Your expertise needed for final validation.'
                            }
                        ];
                    }
                }
            } else if (currentFAIR === 'reusable') {
                if (currentPersona === 'steward') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Product Data Quality Focus',
                                content: 'AI analysis shows 2 nonclinical files below 85% quality. Implement product specification cleansing to achieve 97% Section 2.8 readiness.'
                            },
                            {
                                type: 'governance',
                                title: 'Product Governance Policy',
                                content: 'AI suggests updating governance policies for tobacco product characterization quality rules. Draft Section 2.8 standards available.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'quality',
                                title: 'Quality Score Improvement',
                                content: 'AI quality analysis shows 3 files below 80% quality threshold. Implement data cleansing workflow to achieve 95% target.'
                            },
                            {
                                type: 'governance',
                                title: 'Governance Policy Update',
                                content: 'AI suggests updating data governance policies to include tobacco-specific quality rules. Draft available for review.'
                            }
                        ];
                    }
                } else if (currentPersona === 'owner') {
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Product Reuse ROI',
                                content: 'High-quality product data generates 6x ROI. Each $1 invested in nonclinical quality returns $6 in avoided regulatory rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Product Portfolio Value',
                                content: 'Nonclinical data portfolio valued at $2.1M with current quality. Reaching 97% Section 2.8 compliance increases value to $3.2M.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'reuse_roi',
                                title: 'Reuse Multiplier Effect',
                                content: 'High-quality reusable data generates 5x ROI. Each $1 invested in quality improvement returns $5 in avoided rework.'
                            },
                            {
                                type: 'portfolio',
                                title: 'Data Portfolio Value',
                                content: 'Your tobacco data portfolio valued at $3.2M with current quality scores. Reaching 95% quality increases value to $4.8M.'
                            }
                        ];
                    }
                } else { // SME
                    if (useCase.includes('Product Description')) {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Product Definition Review',
                                content: 'AI drafted nonclinical definitions need expert review. Focus on "Chemical_Composition" definition for Section 2.8 regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Nonclinical Expert Validation',
                                content: 'AI confidence is 89% for "Toxicology_Endpoint" definition. Your chemistry expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    } else {
                        suggestions = [
                            {
                                type: 'definitions',
                                title: 'Definition Enrichment Needed',
                                content: 'AI drafted business definitions need your expert review. Focus on "Exposure_Biomarker" definition for regulatory accuracy.'
                            },
                            {
                                type: 'validation',
                                title: 'Expert Validation Request',
                                content: 'AI confidence is 87% for "Clinical_Endpoint" definition. Your domain expertise needed to reach 95% threshold for reuse.'
                            }
                        ];
                    }
                }
            }
            
            // Display the updated suggestions
            displaySuggestions(suggestions);
        }

        function displaySuggestions(suggestions) {
            const panel = document.getElementById('ai-suggestions-panel');
            const container = document.getElementById('ai-suggestions');
            
            if (suggestions.length > 0) {
                container.innerHTML = suggestions.map(suggestion => `
                    <div class="bg-white p-4 rounded-lg border-l-4 border-${getColorByType(suggestion.type)}-400 shadow-sm">
                        <h4 class="font-bold text-${getColorByType(suggestion.type)}-800 text-sm mb-2">
                            ${getIconByType(suggestion.type)} ${suggestion.title}
                        </h4>
                        <p class="text-sm text-gray-700">${suggestion.content}</p>
                        <button class="mt-2 text-xs px-3 py-1 bg-${getColorByType(suggestion.type)}-100 text-${getColorByType(suggestion.type)}-700 rounded-full hover:bg-${getColorByType(suggestion.type)}-200">
                            Apply Suggestion
                        </button>
                    </div>
                `).join('');
                
                panel.style.display = 'block';
                
                // Update AI activity
                const persona = personas[currentPersona];
                const fairPrinciple = fairPrinciples[currentFAIR];
                setTimeout(() => {
                    updateAIActivity(`Generated ${suggestions.length} ${fairPrinciple.title} suggestions for ${persona.name}`);
                }, 500);
            } else {
                panel.style.display = 'none';
            }
        }

        function getColorByType(type) {
            const colors = {
                'access': 'green',
                'roi': 'blue', 
                'mapping': 'orange',
                'definition': 'purple',
                'quality': 'yellow',
                'compliance': 'red',
                'related': 'indigo',
                'discovery': 'blue',
                'indexing': 'cyan',
                'asset': 'green',
                'catalog': 'teal',
                'metadata': 'purple',
                'tagging': 'pink',
                'workflow': 'green',
                'access_control': 'emerald',
                'audit': 'slate',
                'permissions': 'lime',
                'protocols': 'sky',
                'standards': 'orange',
                'integration': 'amber',
                'reuse': 'violet',
                'cde_mapping': 'fuchsia',
                'terminology': 'rose',
                'governance': 'stone',
                'reuse_roi': 'blue',
                'portfolio': 'emerald',
                'definitions': 'purple',
                'validation': 'red'
            };
            return colors[type] || 'gray';
        }

        function getIconByType(type) {
            const icons = {
                'access': 'üîê',
                'roi': 'üí∞',
                'mapping': 'üîÑ',
                'definition': 'üìù',
                'quality': 'üìä',
                'compliance': 'üéØ',
                'related': 'üîç',
                'discovery': 'üîç',
                'indexing': 'üìë',
                'asset': 'üì¶',
                'catalog': 'üìö',
                'metadata': 'üè∑Ô∏è',
                'tagging': 'üè∑Ô∏è',
                'workflow': '‚ö°',
                'access_control': 'üîê',
                'audit': 'üìã',
                'permissions': 'üë•',
                'protocols': 'üìã',
                'standards': 'üìè',
                'integration': 'üîó',
                'reuse': '‚ôªÔ∏è',
                'cde_mapping': 'üó∫Ô∏è',
                'terminology': 'üìñ',
                'governance': '‚öñÔ∏è',
                'reuse_roi': 'üíé',
                'portfolio': 'üíº',
                'definitions': 'üìù',
                'validation': '‚úÖ'
            };
            return icons[type] || 'üí°';
        }

        // Global variables
        let useCases = [];
        let selectedUseCase = null;
        let currentGeneralStep = 1;

        // Tab Management
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active state from all tabs
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.remove('border-blue-500', 'text-blue-600');
                button.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active state to selected tab
            const activeTab = document.getElementById(tabName + '-tab');
            activeTab.classList.add('active', 'border-blue-500', 'text-blue-600');
            activeTab.classList.remove('border-transparent', 'text-gray-500');

            // Load tab-specific content
            if (tabName === 'use-cases') {
                loadUseCases();
            } else if (tabName === 'ai-assistant') {
                initializeAIAssistant();
            }
        }

        // Load use cases for Tab 2
        function loadUseCases() {
            fetch('/api/use-cases')
                .then(response => response.json())
                .then(data => {
                    useCases = data.use_cases; // Fix: access the use_cases property
                    displayUseCases(data.use_cases);
                })
                .catch(error => console.error('Error loading use cases:', error));
        }

        function displayUseCases(cases) {
            const grid = document.getElementById('use-cases-grid');
            grid.innerHTML = cases.map(useCase => `
                <div class="use-case-card bg-white rounded-lg shadow-lg p-6 border-2 border-transparent hover:border-blue-300" 
                     onclick="selectUseCase('${useCase.name}')">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">${useCase.icon}</div>
                        <h3 class="text-lg font-bold text-gray-800">${useCase.name}</h3>
                    </div>
                    <div class="space-y-2 text-sm text-gray-600">
                        <div class="flex justify-between">
                            <span>Assets:</span>
                            <span class="font-semibold text-blue-600">${useCase.assets}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>CDEs:</span>
                            <span class="font-semibold text-green-600">${useCase.cdes}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>FDA Section:</span>
                            <span class="font-semibold text-purple-600">${useCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-gray-50 rounded text-xs text-gray-500">
                        ${useCase.description}
                    </div>
                </div>
            `).join('');
        }

        function selectUseCase(useCaseName) {
            // Remove selection from all cards
            document.querySelectorAll('.use-case-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Find and select the clicked card
            const selectedCard = Array.from(document.querySelectorAll('.use-case-card'))
                .find(card => card.textContent.includes(useCaseName));
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            selectedUseCase = useCases.find(uc => uc.name === useCaseName);
            
            // Show use case details
            document.getElementById('selected-use-case-details').classList.remove('hidden');
            document.getElementById('selected-use-case-title').textContent = useCaseName + ' - Implementation Details';
            
            // Show detailed interface for Individual Health use case
            if (useCaseName === 'Product Impact on Individual Health') {
                document.getElementById('individual-health-detailed-interface').classList.remove('hidden');
            } else {
                document.getElementById('individual-health-detailed-interface').classList.add('hidden');
            }
            
            // Load use case specific data
            loadUseCaseDetails(selectedUseCase);
        }

        function loadUseCaseDetails(useCase) {
            // Create detailed data inventory based on use case
            let dataAssetsContent = '';
            let cdeContent = '';
            
            if (useCase.name === 'Product Description (Nonclinical)') {
                dataAssetsContent = `
                <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">3 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database<br>
                                    ‚Ä¢ Records: 2.3M records<br>
                                    ‚Ä¢ Tables: product_tests, batch_records, quality_metrics, composition_data<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. product_characterization_raw.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 45MB, 125,000 rows<br>
                                    ‚Ä¢ Fields: PROD_CHAR_ID, NIC_TOT, TAR_ANHY, CO_YLD, FILT_EFF, MOIST_CONT, PH_VAL<br>
                                    ‚Ä¢ Owner: Quality Control Lab<br>
                                    ‚Ä¢ Quality Score: 75%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Laboratory_LIMS_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SOAP API<br>
                                    ‚Ä¢ Endpoints: /test-results, /batch-tracking, /certifications, /equipment-calibration<br>
                                    ‚Ä¢ Response Time: < 500ms<br>
                                    ‚Ä¢ Owner: Quality Control<br>
                                    ‚Ä¢ Uptime: 99.5%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">12 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                        </div>
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                        </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Tar_Content</div>
                                <div class="text-gray-600">Anhydrous tar yield measured under ISO conditions ‚Ä¢ DECIMAL(4,1)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Batch_Number</div>
                                <div class="text-gray-600">Unique manufacturing batch identifier ‚Ä¢ VARCHAR(12)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Quality_Score</div>
                                <div class="text-gray-600">Composite quality assessment score ‚Ä¢ DECIMAL(3,2)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 6 additional CDEs including Regulatory_Status, Carbon_Monoxide_Yield, Moisture_Content, pH_Value, Filter_Efficiency, Production_Facility_ID</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Product Impact on Individual Health') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">2 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Biomarker_Clinical_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: NoSQL Database<br>
                                    ‚Ä¢ Records: 850K documents<br>
                                    ‚Ä¢ Collections: biomarker_results, clinical_observations, adverse_events, subject_demographics<br>
                                    ‚Ä¢ Owner: Clinical Research Team<br>
                                    ‚Ä¢ Quality Score: 92%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. biomarker_exposure_data.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 28MB, 67,500 rows<br>
                                    ‚Ä¢ Fields: SUBJ_ID, COT_LEVEL, NNAL_CONC, AGE_VERIF, EXP_HIST, BMI_VAL, BP_SYS<br>
                                    ‚Ä¢ Owner: Clinical Research Team<br>
                                    ‚Ä¢ Quality Score: 82%
                                </div>
                            </div>
                    </div>
                </div>
            `;

                cdeContent = `
                <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">9 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Subject_ID</div>
                                <div class="text-gray-600">Unique clinical study participant identifier ‚Ä¢ VARCHAR(15)</div>
                        </div>
                        <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Cotinine_Level</div>
                                <div class="text-gray-600">Biomarker for nicotine exposure measured in ng/mL ‚Ä¢ DECIMAL(8,2)</div>
                        </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Clinical_Endpoint</div>
                                <div class="text-gray-600">Primary or secondary endpoint measured in clinical studies ‚Ä¢ VARCHAR(100)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Exposure_Biomarker</div>
                                <div class="text-gray-600">Biological indicators of product exposure ‚Ä¢ DECIMAL(10,3)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Study_Protocol_ID</div>
                                <div class="text-gray-600">Unique identifier for clinical study protocol ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Adverse_Event_Code</div>
                                <div class="text-gray-600">Standardized code for adverse events ‚Ä¢ VARCHAR(10)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 3 additional CDEs including Age_Verification, Blood_Pressure_Systolic, Body_Mass_Index</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Product Impact on Population Health') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">2 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Population_Surveillance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Data Warehouse<br>
                                    ‚Ä¢ Records: 12.5M records<br>
                                    ‚Ä¢ Datasets: population_surveys, health_outcomes, usage_patterns, demographic_profiles<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 89%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. surveillance_population_data.csv</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: CSV File<br>
                                    ‚Ä¢ Size: 156MB, 425,000 rows<br>
                                    ‚Ä¢ Fields: SURV_ID, USE_PAT, HEALTH_OUT, DEMO_DATA, GEO_LOC, EDU_LEV<br>
                                    ‚Ä¢ Owner: Epidemiology Team<br>
                                    ‚Ä¢ Quality Score: 78%
                                </div>
                            </div>
                    </div>
                </div>
            `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">8 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Population_Demographics</div>
                                <div class="text-gray-600">Age, gender, and geographic distribution of use population ‚Ä¢ JSON</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Exposure_Biomarker</div>
                                <div class="text-gray-600">Biological indicators of product exposure in study populations ‚Ä¢ DECIMAL(10,3)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Age_Verification</div>
                                <div class="text-gray-600">Confirmed age verification status for product access ‚Ä¢ BOOLEAN</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Survey_ID</div>
                                <div class="text-gray-600">Unique identifier for population survey responses ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Health_Outcome</div>
                                <div class="text-gray-600">Measured health outcomes in population studies ‚Ä¢ VARCHAR(50)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 3 additional CDEs including Geographic_Location, Education_Level, Usage_Pattern</div>
                        </div>
                    </div>
                `;
            } else if (useCase.name === 'Comprehensive Regulatory Compliance') {
                dataAssetsContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-blue-800">4 Data Assets Identified</div>
                        <div class="space-y-2 text-xs">
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">1. Regulatory_Compliance_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: Document Store<br>
                                    ‚Ä¢ Records: 45K documents<br>
                                    ‚Ä¢ Types: submission_packages, compliance_reports, audit_trails, regulatory_correspondence<br>
                                    ‚Ä¢ Owner: Regulatory Affairs<br>
                                    ‚Ä¢ Quality Score: 98%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">2. FDA_Submission_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: REST API<br>
                                    ‚Ä¢ Endpoints: /pmta, /mrtp, /compliance, /labeling, /adverse-events<br>
                                    ‚Ä¢ Response Time: < 200ms<br>
                                    ‚Ä¢ Owner: Regulatory IT<br>
                                    ‚Ä¢ Uptime: 99.8%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">3. Product_Characterization_DB</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: SQL Database (shared with Product Description)<br>
                                    ‚Ä¢ Focus: Regulatory compliance data views<br>
                                    ‚Ä¢ Quality Score: 95%
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border-l-4 border-blue-400">
                                <div class="font-semibold text-blue-700">4. Clinical_Data_API</div>
                                <div class="text-gray-600 mt-1">
                                    ‚Ä¢ Type: GraphQL API<br>
                                    ‚Ä¢ Endpoints: /biomarkers, /adverse-events, /demographics, /exposure-data<br>
                                    ‚Ä¢ Response Time: < 300ms<br>
                                    ‚Ä¢ Owner: Clinical IT<br>
                                    ‚Ä¢ Uptime: 99.7%
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                cdeContent = `
                    <div class="space-y-3">
                        <div class="text-sm font-semibold text-green-800">15 CDEs Suggested</div>
                        <div class="text-xs space-y-2">
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Product_ID</div>
                                <div class="text-gray-600">Unique identifier for product in FDA submissions ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Regulatory_Status</div>
                                <div class="text-gray-600">Current regulatory approval status for product ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Subject_ID</div>
                                <div class="text-gray-600">Unique clinical study participant identifier ‚Ä¢ VARCHAR(15)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Nicotine_Content</div>
                                <div class="text-gray-600">Total nicotine content measured in mg per unit ‚Ä¢ DECIMAL(5,2)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Adverse_Event_Code</div>
                                <div class="text-gray-600">Standardized code for adverse events following product exposure ‚Ä¢ VARCHAR(10)</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Manufacturing_Date</div>
                                <div class="text-gray-600">Date of product manufacturing for batch tracking ‚Ä¢ DATE</div>
                            </div>
                            <div class="bg-white p-2 rounded border">
                                <div class="font-semibold text-green-700">Study_Protocol_ID</div>
                                <div class="text-gray-600">Unique identifier for clinical study protocol ‚Ä¢ VARCHAR(20)</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">+ 8 additional CDEs including Cotinine_Level, Exposure_Biomarker, Age_Verification, Population_Demographics, Batch_Number, Quality_Score, Clinical_Endpoint, Tar_Content</div>
                        </div>
                    </div>
                `;
            }

            // Populate the data panels
            document.getElementById('use-case-data-inventory').innerHTML = dataAssetsContent;
            document.getElementById('use-case-glossary').innerHTML = cdeContent;
            
            // Generate step breakdown for this use case
            generateUseCaseStepBreakdown(useCase);

            // Load quality metrics
            document.getElementById('use-case-quality').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-purple-800">Quality Assessment</div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span>Completeness:</span>
                            <span class="text-green-600 font-semibold">94%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Accuracy:</span>
                            <span class="text-green-600 font-semibold">97%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Consistency:</span>
                            <span class="text-yellow-600 font-semibold">89%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>CDE Coverage:</span>
                            <span class="text-blue-600 font-semibold">${Math.round((useCase.cdes / 15) * 100)}%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span>Regulatory Readiness:</span>
                            <span class="text-green-600 font-semibold">98%</span>
                        </div>
                    </div>
                </div>
            `;

            // Load workflow
            document.getElementById('use-case-workflow').innerHTML = `
                <div class="space-y-3">
                    <div class="text-sm font-semibold text-orange-800">Compliance Workflow</div>
                    <div class="text-xs space-y-2">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Data Collection ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>Quality Check ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>CDE Mapping ‚úì</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                            <span>FDA Submission (In Progress)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                            <span>Audit Trail Generation (Pending)</span>
                        </div>
                    </div>
                    <div class="mt-3 text-xs text-gray-600">
                        <strong>Next Steps:</strong> Regulatory review, final validation, submission package generation
                    </div>
                </div>
            `;
        }

        function generateUseCaseStepBreakdown(useCase) {
            const stepsBreakdown = getUseCaseSpecificSteps(useCase);
            
            const stepsHTML = stepsBreakdown.map((step, index) => `
                <div class="bg-white rounded-lg border border-indigo-200 p-4 hover:shadow-md transition-all">
                    <div class="flex items-start space-x-4">
                        <div class="w-8 h-8 ${step.color} text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0 mt-1">
                            ${index + 1}
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-gray-800">${step.title}</h5>
                                <span class="text-xs ${step.color.replace('bg-', 'text-')} font-semibold">${step.duration}</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">${step.description}</p>
                            
                            <!-- Key Activities -->
                            <div class="mb-3">
                                <div class="text-xs font-semibold text-gray-700 mb-1">Key Activities:</div>
                                <ul class="text-xs text-gray-600 space-y-1">
                                    ${step.activities.map(activity => `<li>‚Ä¢ ${activity}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <!-- Deliverables -->
                            <div class="mb-3">
                                <div class="text-xs font-semibold text-gray-700 mb-1">Key Deliverables:</div>
                                <div class="flex flex-wrap gap-1">
                                    ${step.deliverables.map(deliverable => `
                                        <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">${deliverable}</span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- RACI Roles -->
                            <div class="border-t pt-2">
                                <div class="text-xs font-semibold text-gray-700 mb-2">Roles (RACI):</div>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    ${step.roles.map(role => `
                                        <div class="flex items-center space-x-1">
                                            <span class="w-4 h-4 ${role.color} text-white rounded-full text-xs flex items-center justify-center">${role.type}</span>
                                            <span class="text-gray-600">${role.name}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('use-case-process-steps').innerHTML = stepsHTML;
        }

        function getUseCaseSpecificSteps(useCase) {
            const baseSteps = [
                {
                    title: "Step 1: Discover",
                    color: "bg-blue-500",
                    duration: "2-3 weeks"
                },
                {
                    title: "Step 2: Define", 
                    color: "bg-green-500",
                    duration: "3-4 weeks"
                },
                {
                    title: "Step 3: Standardize",
                    color: "bg-purple-500", 
                    duration: "2-3 weeks"
                },
                {
                    title: "Step 4: Protect",
                    color: "bg-orange-500",
                    duration: "1-2 weeks"
                },
                {
                    title: "Step 5: Report",
                    color: "bg-indigo-500",
                    duration: "1 week"
                }
            ];

            if (useCase.name === 'Product Description (Nonclinical)') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan product characterization systems and laboratory databases for nonclinical data assets",
                        activities: [
                            "Scan Quality Control Lab databases and LIMS systems",
                            "Inventory product testing data and batch records", 
                            "Map laboratory equipment APIs and data flows",
                            "Catalog product specification documents and certificates"
                        ],
                        deliverables: ["Product data asset inventory", "Laboratory system mapping", "LIMS data catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "System Admin", color: "bg-green-500"},
                            {type: "C", name: "Quality Control Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich product assets with FDA Section 2.8 nonclinical metadata and business definitions",
                        activities: [
                            "Add chemistry, toxicology, and pharmacology metadata",
                            "Define product characterization business terms",
                            "Create ISO test method definitions and standards", 
                            "Build regulatory product definition cards"
                        ],
                        deliverables: ["Nonclinical metadata dictionary", "Product definition cards", "ISO standard mappings"],
                        roles: [
                            {type: "R", name: "Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Quality Control Owner", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select product characterization CDEs and standardize for FDA Section 2.8 submissions",
                        activities: [
                            "Work with regulatory team to select product CDEs",
                            "Harmonize nicotine, tar, and CO measurement standards",
                            "Create FDA submission CDE register",
                            "Define product batch tracking transformation logic"
                        ],
                        deliverables: ["Product CDE register", "FDA Section 2.8 mapping", "Measurement standards"],
                        roles: [
                            {type: "R", name: "Quality Owner", color: "bg-blue-500"},
                            {type: "A", name: "Data Steward", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Affairs", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for product characterization data and regulatory compliance",
                        activities: [
                            "Set up product specification quality rules",
                            "Configure ISO test method validation checks",
                            "Create regulatory compliance monitoring dashboard",
                            "Define product quality alert thresholds"
                        ],
                        deliverables: ["Product quality rules", "ISO compliance dashboard", "Regulatory alerts"],
                        roles: [
                            {type: "R", name: "Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Quality Owner", color: "bg-green-500"},
                            {type: "C", name: "IT Operations", color: "bg-yellow-500"},
                            {type: "I", name: "Data Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate FDA Section 2.8 compliance reports and product characterization summaries",
                        activities: [
                            "Aggregate product testing coverage and quality scores",
                            "Generate FDA Section 2.8 submission reports",
                            "Create product characterization dashboard",
                            "Prepare regulatory review documentation"
                        ],
                        deliverables: ["FDA Section 2.8 report", "Product quality dashboard", "Regulatory documentation"],
                        roles: [
                            {type: "R", name: "Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Management", color: "bg-green-500"},
                            {type: "C", name: "Quality PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Quality Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else if (useCase.name === 'Product Impact on Individual Health') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan clinical databases and biomarker systems for individual health assessment data",
                        activities: [
                            "Scan clinical research databases and CRO systems",
                            "Inventory biomarker data and clinical observations",
                            "Map clinical endpoints and adverse event systems",
                            "Catalog subject demographics and exposure data"
                        ],
                        deliverables: ["Clinical data inventory", "Biomarker system mapping", "Clinical endpoint catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Clinical IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Clinical Research Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich clinical assets with biomarker metadata and health endpoint definitions",
                        activities: [
                            "Add exposure and effect biomarker metadata",
                            "Define clinical endpoint business terms",
                            "Create ICH bioanalytical method definitions",
                            "Build clinical assessment definition cards"
                        ],
                        deliverables: ["Clinical metadata dictionary", "Biomarker definition cards", "ICH standard mappings"],
                        roles: [
                            {type: "R", name: "Clinical Data Steward", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Research Owner", color: "bg-green-500"},
                            {type: "C", name: "Clinical Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select biomarker CDEs and standardize for clinical health assessments",
                        activities: [
                            "Work with clinical team to select biomarker CDEs",
                            "Harmonize cotinine, NNAL measurement standards",
                            "Create clinical study CDE register",
                            "Define biomarker transformation and normalization logic"
                        ],
                        deliverables: ["Biomarker CDE register", "Clinical study mapping", "Biomarker standards"],
                        roles: [
                            {type: "R", name: "Clinical Owner", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Steward", color: "bg-green-500"},
                            {type: "C", name: "Clinical Governance", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for biomarker data and clinical study compliance",
                        activities: [
                            "Set up biomarker measurement quality rules",
                            "Configure clinical study protocol validation",
                            "Create clinical data quality monitoring dashboard",
                            "Define adverse event alert thresholds"
                        ],
                        deliverables: ["Biomarker quality rules", "Clinical compliance dashboard", "AE monitoring alerts"],
                        roles: [
                            {type: "R", name: "Clinical Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Owner", color: "bg-green-500"},
                            {type: "C", name: "Clinical IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Clinical Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate individual health assessment reports and biomarker analysis summaries",
                        activities: [
                            "Aggregate biomarker coverage and exposure metrics",
                            "Generate individual health impact reports",
                            "Create clinical endpoint analysis dashboard",
                            "Prepare health assessment documentation"
                        ],
                        deliverables: ["Health impact report", "Biomarker dashboard", "Clinical documentation"],
                        roles: [
                            {type: "R", name: "Clinical Steward", color: "bg-blue-500"},
                            {type: "A", name: "Clinical Management", color: "bg-green-500"},
                            {type: "C", name: "Clinical PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Clinical Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else if (useCase.name === 'Product Impact on Population Health') {
                return [
                    {
                        ...baseSteps[0],
                        description: "Scan surveillance systems and epidemiological databases for population health data",
                        activities: [
                            "Scan population surveillance and epidemiology systems",
                            "Inventory demographic and health outcome data",
                            "Map public health monitoring and survey systems",
                            "Catalog population exposure and usage pattern data"
                        ],
                        deliverables: ["Population data inventory", "Surveillance system mapping", "Epidemiology catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Public Health IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Epidemiology Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich population assets with epidemiological metadata and health outcome definitions",
                        activities: [
                            "Add demographic and behavioral metadata",
                            "Define population health outcome terms",
                            "Create WHO surveillance standard definitions",
                            "Build epidemiological study definition cards"
                        ],
                        deliverables: ["Population metadata dictionary", "Health outcome cards", "WHO standard mappings"],
                        roles: [
                            {type: "R", name: "Public Health Steward", color: "bg-blue-500"},
                            {type: "A", name: "Epidemiology Owner", color: "bg-green-500"},
                            {type: "C", name: "Public Health Scientist", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select population health CDEs and standardize for surveillance studies",
                        activities: [
                            "Work with epidemiology team to select population CDEs",
                            "Harmonize demographic and health outcome standards",
                            "Create population surveillance CDE register",
                            "Define population data aggregation and analysis logic"
                        ],
                        deliverables: ["Population CDE register", "Surveillance study mapping", "Demographics standards"],
                        roles: [
                            {type: "R", name: "Epidemiology Owner", color: "bg-blue-500"},
                            {type: "A", name: "Public Health Steward", color: "bg-green-500"},
                            {type: "C", name: "Public Health Governance", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure quality rules for population data and epidemiological study compliance",
                        activities: [
                            "Set up population data representativeness rules",
                            "Configure epidemiological study design validation",
                            "Create population health monitoring dashboard",
                            "Define public health alert and surveillance thresholds"
                        ],
                        deliverables: ["Population quality rules", "Surveillance dashboard", "Public health alerts"],
                        roles: [
                            {type: "R", name: "Public Health Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Epidemiology Owner", color: "bg-green-500"},
                            {type: "C", name: "Public Health IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Public Health Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate population health impact reports and epidemiological analysis summaries",
                        activities: [
                            "Aggregate population coverage and health outcome metrics",
                            "Generate population health impact assessments",
                            "Create epidemiological trend analysis dashboard",
                            "Prepare public health policy documentation"
                        ],
                        deliverables: ["Population health report", "Epidemiology dashboard", "Policy documentation"],
                        roles: [
                            {type: "R", name: "Public Health Steward", color: "bg-blue-500"},
                            {type: "A", name: "Public Health Management", color: "bg-green-500"},
                            {type: "C", name: "Epidemiology PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Epidemiology Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            } else {
                // Comprehensive Regulatory Compliance or default
                return [
                    {
                        ...baseSteps[0],
                        description: "Comprehensive scan across all regulatory data sources for complete PMTA submission",
                        activities: [
                            "Scan product, clinical, and population health systems",
                            "Inventory cross-sectional regulatory data assets",
                            "Map FDA Sections 2.7-2.10 data requirements",
                            "Catalog comprehensive PMTA submission components"
                        ],
                        deliverables: ["Comprehensive data inventory", "Cross-section system mapping", "PMTA requirement catalog"],
                        roles: [
                            {type: "R", name: "Data Architect", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory IT Admin", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Affairs Lead", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[1],
                        description: "Enrich regulatory assets with comprehensive FDA submission metadata",
                        activities: [
                            "Add cross-sectional regulatory metadata",
                            "Define comprehensive PMTA business terms",
                            "Create FDA guidance standard definitions",
                            "Build regulatory submission definition cards"
                        ],
                        deliverables: ["Regulatory metadata dictionary", "PMTA definition cards", "FDA guidance mappings"],
                        roles: [
                            {type: "R", name: "Regulatory Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Owner", color: "bg-green-500"},
                            {type: "C", name: "FDA Compliance Officer", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[2],
                        description: "Select comprehensive regulatory CDEs and standardize for complete FDA submission",
                        activities: [
                            "Work with regulatory team to select cross-section CDEs",
                            "Harmonize product, clinical, and population standards",
                            "Create comprehensive PMTA CDE register",
                            "Define integrated regulatory data transformation logic"
                        ],
                        deliverables: ["Comprehensive CDE register", "PMTA section mapping", "Integrated standards"],
                        roles: [
                            {type: "R", name: "Regulatory Owner", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Steward", color: "bg-green-500"},
                            {type: "C", name: "Regulatory Governance Team", color: "bg-yellow-500"}
                        ]
                    },
                    {
                        ...baseSteps[3],
                        description: "Configure comprehensive quality rules for complete regulatory compliance",
                        activities: [
                            "Set up cross-sectional regulatory quality rules",
                            "Configure PMTA submission validation checks",
                            "Create comprehensive regulatory monitoring dashboard",
                            "Define FDA submission readiness alert thresholds"
                        ],
                        deliverables: ["Comprehensive quality rules", "PMTA compliance dashboard", "FDA readiness alerts"],
                        roles: [
                            {type: "R", name: "Regulatory Quality Engineer", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Owner", color: "bg-green-500"},
                            {type: "C", name: "Regulatory IT Ops", color: "bg-yellow-500"},
                            {type: "I", name: "Regulatory Steward", color: "bg-gray-400"}
                        ]
                    },
                    {
                        ...baseSteps[4],
                        description: "Generate comprehensive FDA submission reports and regulatory compliance summaries",
                        activities: [
                            "Aggregate cross-sectional coverage and compliance metrics",
                            "Generate complete PMTA submission package",
                            "Create comprehensive regulatory dashboard",
                            "Prepare FDA submission documentation"
                        ],
                        deliverables: ["Complete PMTA submission", "Regulatory compliance dashboard", "FDA documentation"],
                        roles: [
                            {type: "R", name: "Regulatory Steward", color: "bg-blue-500"},
                            {type: "A", name: "Regulatory Management", color: "bg-green-500"},
                            {type: "C", name: "Regulatory PMO", color: "bg-yellow-500"},
                            {type: "I", name: "Regulatory Owner", color: "bg-gray-400"}
                        ]
                    }
                ];
            }
        }

        function runSelectedUseCaseProcess() {
            if (!selectedUseCase) {
                alert('Please select a use case first');
                return;
            }

            const resultsDiv = document.getElementById('selected-use-case-results');
            resultsDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h5 class="font-bold text-blue-800 mb-3">Running Governance Process for: ${selectedUseCase.name}</h5>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Discovered ${selectedUseCase.assets} data assets</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Identified ${selectedUseCase.cdes} high-priority CDEs</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated metadata catalog</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Applied quality rules</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span>‚úì Generated compliance report for ${selectedUseCase.fda_section}</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded text-sm">
                        <span class="font-semibold text-green-800">Success!</span> Governance process completed for ${selectedUseCase.name} with 94% confidence score.
                    </div>
                </div>
            `;
        }

        // General Process Flow Functions
        function startGeneralGovernanceProcess() {
            currentGeneralStep = 1;
            simulateGeneralProcess();
        }

        function simulateGeneralProcess() {
            const maxSteps = 5;
            const steps = ['Discover', 'Standardize', 'Define', 'Protect', 'Report'];
            
            if (currentGeneralStep <= maxSteps) {
                // Update step visualization
                for (let i = 1; i <= maxSteps; i++) {
                    const step = document.getElementById(`general-step-${i}`);
                    if (i < currentGeneralStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (i === currentGeneralStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                }

                // Show progress
                const resultsDiv = document.getElementById('general-process-results');
                const stepName = steps[currentGeneralStep - 1];
                resultsDiv.innerHTML = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                                ${currentGeneralStep}
                            </div>
                            <h4 class="font-bold text-blue-800">Step ${currentGeneralStep}: ${stepName}</h4>
                        </div>
                        <div class="text-sm text-blue-700">
                            ${getStepDescription(currentGeneralStep)}
                        </div>
                        <div class="mt-3">
                            <div class="bg-blue-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(currentGeneralStep/maxSteps)*100}%"></div>
                            </div>
                        </div>
                    </div>
                `;

                currentGeneralStep++;
                
                if (currentGeneralStep <= maxSteps) {
                    setTimeout(simulateGeneralProcess, 2000);
                } else {
                    showGeneralCompletionResults();
                }
            }
        }

        function getStepDescription(step) {
            const descriptions = {
                1: "üîç AI scanning 50+ data systems, identifying 127 related data fields...",
                2: "üìã Analyzing data standards, suggesting 44 high-priority CDEs with 94-96% confidence...", 
                3: "üìù Generating metadata definitions, extracting business knowledge from documents...",
                4: "üõ°Ô∏è Applying quality rules, setting up data governance controls...",
                5: "üìä Creating compliance reports for FDA Sections 2.7-2.10..."
            };
            return descriptions[step] || "";
        }

        function showGeneralCompletionResults() {
            const resultsDiv = document.getElementById('general-process-results');
            resultsDiv.innerHTML = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <h4 class="font-bold text-green-800 mb-4 text-xl">üéâ Complete Governance Process Finished!</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Assets Processed:</div>
                            <div>‚Ä¢ 11 total data assets discovered</div>
                            <div>‚Ä¢ 127 data fields cataloged</div>
                            <div>‚Ä¢ 44 CDEs identified</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Quality Metrics:</div>
                            <div>‚Ä¢ 91% overall quality score</div>
                            <div>‚Ä¢ 85% time reduction achieved</div>
                            <div>‚Ä¢ $2M+ annual ROI projected</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-100 rounded">
                        <span class="font-semibold">Next Steps:</span> Review AI suggestions, validate CDEs with domain experts, proceed to FDA submission preparation.
                    </div>
                </div>
            `;
        }

        function resetGeneralProcess() {
            currentGeneralStep = 1;
            document.querySelectorAll('[id^="general-step-"]').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.getElementById('general-step-1').classList.add('active');
            document.getElementById('general-process-results').innerHTML = '';
        }

        // AI Assistant Functions (Tab 3)
        function initializeAIAssistant() {
            // Load initial AI suggestions
            loadAISmartSuggestions();
        }

        function aiSearchData() {
            const query = document.getElementById('ai-search-input').value;
            const useCase = document.getElementById('ai-use-case-filter').value;
            
            if (!query.trim()) {
                alert('Please enter a search query');
                return;
            }

            // Show loading state
            const resultsDiv = document.getElementById('ai-discovery-results');
            resultsDiv.innerHTML = `
                <div class="text-center py-8">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
                    <p class="text-gray-600">AI is analyzing your request...</p>
                </div>
            `;

            // Simulate AI processing
            setTimeout(() => {
                showAIResults(query, useCase);
                showAIInsights(query);
            }, 2000);
        }

        function showAIResults(query, useCase) {
            const resultsDiv = document.getElementById('ai-discovery-results');
            
            // Generate relevant results based on query
            let results = '';
            
            if (query.toLowerCase().includes('pending') || query.toLowerCase().includes('cde')) {
                results = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <h4 class="font-bold text-yellow-800 mb-4">
                            <i class="fas fa-clock mr-2"></i>Pending CDE Approvals Found
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded border">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-semibold">Clinical_Endpoint</div>
                                        <div class="text-sm text-gray-600">Awaiting Dr. Sarah Chen approval</div>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">2 hours ago</span>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-semibold">Exposure_Biomarker</div>
                                        <div class="text-sm text-gray-600">Pending technical review</div>
                                    </div>
                                    <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs">1 day ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (query.toLowerCase().includes('cotinine') || query.toLowerCase().includes('biomarker')) {
                results = `
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6">
                        <h4 class="font-bold text-purple-800 mb-4">
                            <i class="fas fa-flask mr-2"></i>Cotinine Biomarker Data Located
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded border">
                                <div class="font-semibold">Clinical_Research_DB.biomarkers.cotinine_levels</div>
                                <div class="text-sm text-gray-600 mt-1">Units: ng/mL | Range: 0.1-500.0 | 89% complete</div>
                                <div class="text-xs text-purple-600 mt-2">Quality Score: 94.2%</div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="font-semibold">LIMS_System.tobacco_metabolites.cotinine</div>
                                <div class="text-sm text-gray-600 mt-1">Units: mg/L | Range: 0.05-1000 | 76% complete</div>
                                <div class="text-xs text-orange-600 mt-2">Needs standardization</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (query.toLowerCase().includes('quality') || query.toLowerCase().includes('metric')) {
                results = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <h4 class="font-bold text-green-800 mb-4">
                            <i class="fas fa-chart-line mr-2"></i>Current Data Quality Status
                        </h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white p-4 rounded border text-center">
                                <div class="text-2xl font-bold text-green-600">94.7%</div>
                                <div class="text-sm text-gray-600">Overall Quality</div>
                                <div class="text-xs text-green-600">‚Üë 2.3% this week</div>
                            </div>
                            <div class="bg-white p-4 rounded border text-center">
                                <div class="text-2xl font-bold text-blue-600">67%</div>
                                <div class="text-sm text-gray-600">CDE Progress</div>
                                <div class="text-xs text-blue-600">6 of 9 approved</div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (query.toLowerCase().includes('sme') || query.toLowerCase().includes('team')) {
                results = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                        <h4 class="font-bold text-blue-800 mb-4">
                            <i class="fas fa-users mr-2"></i>SME Availability Status
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded border flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <div>
                                        <div class="font-semibold">Dr. Sarah Chen</div>
                                        <div class="text-sm text-gray-600">Data Steward ‚Ä¢ Available now</div>
                                    </div>
                                </div>
                                <button onclick="mentionTeamMember('sarah')" class="bg-green-500 text-white px-3 py-1 rounded text-sm">Contact</button>
                            </div>
                            <div class="bg-white p-4 rounded border flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <div>
                                        <div class="font-semibold">Mike Johnson</div>
                                        <div class="text-sm text-gray-600">Data Steward ‚Ä¢ Away until 3 PM</div>
                                    </div>
                                </div>
                                <button class="bg-gray-300 text-gray-600 px-3 py-1 rounded text-sm" disabled>Away</button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                results = `
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 text-center">
                        <i class="fas fa-search text-3xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-4">No specific results found for "${query}"</p>
                        <p class="text-sm text-gray-500">Try searching for "pending CDEs", "cotinine biomarkers", "quality metrics", or "SME availability"</p>
                    </div>
                `;
            }
            
            resultsDiv.innerHTML = results;
        }

        function showAIInsights(query) {
            const insightsPanel = document.getElementById('ai-insights-panel');
            const insightsContent = document.getElementById('ai-insights-content');
            
            let insights = '';
            
            if (query.toLowerCase().includes('pending') || query.toLowerCase().includes('cde')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üí° AI Recommendation</h5>
                        <p class="text-sm text-gray-600">Dr. Sarah Chen is currently online and available for CDE reviews. Consider scheduling a quick review session to accelerate approval process.</p>
                    </div>
                `;
            } else if (query.toLowerCase().includes('cotinine')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üîß Standardization Needed</h5>
                        <p class="text-sm text-gray-600">Found unit inconsistencies in cotinine measurements (ng/mL vs mg/L). AI suggests standardizing to ng/mL for ICH E6 compliance.</p>
                    </div>
                `;
            } else if (query.toLowerCase().includes('quality')) {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">üìà Quality Trend</h5>
                        <p class="text-sm text-gray-600">Data quality improved 2.3% this week due to automated validation rules. Consider expanding these rules to other data domains.</p>
                    </div>
                `;
            } else {
                insights = `
                    <div class="bg-white p-4 rounded-lg border">
                        <h5 class="font-semibold text-blue-800 mb-2">ü§ñ AI Tip</h5>
                        <p class="text-sm text-gray-600">Use specific terms like "biomarker", "CDE", "quality", or "approval" for more targeted results.</p>
                    </div>
                `;
            }
            
            insightsContent.innerHTML = insights;
            insightsPanel.classList.remove('hidden');
        }

        function loadAISmartSuggestions() {
            const suggestionsDiv = document.getElementById('ai-smart-suggestions');
            const suggestions = [
                {
                    icon: "üéØ",
                    title: "Focus on Population Health Use Case",
                    description: "Based on current regulatory trends, prioritize Population Health compliance data.",
                    action: "View Use Case"
                },
                {
                    icon: "üìä", 
                    title: "Validate High-Priority CDEs",
                    description: "44 CDEs identified with >94% confidence. Review with domain experts.",
                    action: "Review CDEs"
                },
                {
                    icon: "üîç",
                    title: "Discover Missing Biomarker Data",
                    description: "AI detected potential gaps in biomarker data for FDA Section 2.8.",
                    action: "Search Data"
                }
            ];

            suggestionsDiv.innerHTML = suggestions.map(suggestion => `
                <div class="bg-white border border-purple-200 rounded-lg p-4 hover:shadow-md transition-all">
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">${suggestion.icon}</div>
                        <div class="flex-1">
                            <div class="font-semibold text-purple-800">${suggestion.title}</div>
                            <div class="text-sm text-gray-600 mt-1">${suggestion.description}</div>
                            <button class="mt-2 px-3 py-1 bg-purple-100 text-purple-700 rounded text-xs hover:bg-purple-200">
                                ${suggestion.action}
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Start with the first tab active
            switchTab('process');
        });

        // Enhanced Process Navigation Functions
        let currentEnhancedStep = 1;
        let processRunning = false;
        let processPaused = false;
        
        function selectProcessStep(stepNumber) {
            // Update visual selection
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`enhanced-step-${i}`);
                if (i === stepNumber) {
                    if (!step.classList.contains('border-blue-500')) {
                        step.classList.remove('border-gray-200');
                        step.classList.add('border-blue-500');
                        step.querySelector('.w-12').classList.remove('bg-gray-400');
                        step.querySelector('.w-12').classList.add('bg-blue-500');
                    }
                } else {
                    if (step.classList.contains('border-blue-500') && !processRunning) {
                        step.classList.remove('border-blue-500');
                        step.classList.add('border-gray-200');
                        step.querySelector('.w-12').classList.remove('bg-blue-500');
                        step.querySelector('.w-12').classList.add('bg-gray-400');
                    }
                }
            }
            
            // Update step details
            updateStepDetails(stepNumber);
        }
        
        function updateStepDetails(stepNumber) {
            const stepDetails = {
                1: {
                    title: "Step 1: Discover - Detailed Information",
                    activities: [
                        "‚Ä¢ Scan systems, data lakes, and file shares for assets",
                        "‚Ä¢ Create inventory of existing tables, fields, and interfaces",
                        "‚Ä¢ Map system-to-table-to-field relationships",
                        "‚Ä¢ Identify potential data quality issues"
                    ],
                    success: [
                        "‚Ä¢ 95%+ asset discovery coverage",
                        "‚Ä¢ Complete system mapping documented",
                        "‚Ä¢ Initial data quality baseline established",
                        "‚Ä¢ Asset inventory database created"
                    ]
                },
                2: {
                    title: "Step 2: Define - Detailed Information",
                    activities: [
                        "‚Ä¢ Enrich assets with business and technical metadata",
                        "‚Ä¢ Draft field definitions with sample values and refresh frequency",
                        "‚Ä¢ Collaborate with Business SMEs to create metadata dictionary",
                        "‚Ä¢ Create field definition cards for business validation"
                    ],
                    success: [
                        "‚Ä¢ 85%+ fields have business definitions",
                        "‚Ä¢ Complete metadata dictionary created",
                        "‚Ä¢ Field definition cards approved by business",
                        "‚Ä¢ Technical metadata documented"
                    ]
                },
                3: {
                    title: "Step 3: Standardize - Detailed Information",
                    activities: [
                        "‚Ä¢ Work with business to select Critical Data Elements (CDEs)",
                        "‚Ä¢ Harmonize naming rules, code values, and units",
                        "‚Ä¢ Create CDE register with standardized definitions",
                        "‚Ä¢ Develop standard mapping and transformation logic"
                    ],
                    success: [
                        "‚Ä¢ 90%+ CDE coverage rate",
                        "‚Ä¢ CDE register completed and approved",
                        "‚Ä¢ Standard mapping/transformation logic defined",
                        "‚Ä¢ Business validation passed"
                    ]
                },
                4: {
                    title: "Step 4: Protect - Detailed Information",
                    activities: [
                        "‚Ä¢ Configure quality rules for CDEs (format, range, cross-field checks)",
                        "‚Ä¢ Set up monitoring and alert mechanisms",
                        "‚Ä¢ Create quality dashboard for real-time monitoring",
                        "‚Ä¢ Define thresholds and escalation procedures"
                    ],
                    success: [
                        "‚Ä¢ Quality rules library completed",
                        "‚Ä¢ Real-time monitoring dashboard active",
                        "‚Ä¢ Alert mechanisms configured",
                        "‚Ä¢ 95%+ data quality compliance"
                    ]
                },
                5: {
                    title: "Step 5: Report - Detailed Information",
                    activities: [
                        "‚Ä¢ Aggregate asset coverage and quality scores",
                        "‚Ä¢ Generate rule execution status reports",
                        "‚Ä¢ Produce governance KPIs and trend reports",
                        "‚Ä¢ Create visualized governance dashboard"
                    ],
                    success: [
                        "‚Ä¢ Comprehensive governance report generated",
                        "‚Ä¢ Executive dashboard with KPIs active",
                        "‚Ä¢ Next-step improvement plan created",
                        "‚Ä¢ Stakeholder review completed"
                    ]
                }
            };
            
            const data = stepDetails[stepNumber];
            document.getElementById('step-details').innerHTML = `
                <h4 class="text-xl font-bold mb-4 text-gray-800">${data.title}</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h5 class="font-semibold text-gray-700 mb-2">Key Activities:</h5>
                        <ul class="text-sm text-gray-600 space-y-1">
                            ${data.activities.map(activity => `<li>${activity}</li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h5 class="font-semibold text-gray-700 mb-2">Success Criteria:</h5>
                        <ul class="text-sm text-gray-600 space-y-1">
                            ${data.success.map(criterion => `<li>${criterion}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }
        
        function startEnhancedGovernanceProcess() {
            if (processRunning) return;
            
            processRunning = true;
            processPaused = false;
            currentEnhancedStep = 1;
            
            // Show pause button
            document.getElementById('pause-btn').style.display = 'inline-block';
            
            // Reset all progress
            for (let i = 1; i <= 5; i++) {
                updateStepProgress(i, 0);
            }
            updateOverallProgress(0, "In Progress...");
            
            // Start the process
            runEnhancedStep(1);
        }
        
        function runEnhancedStep(stepNumber) {
            if (stepNumber > 5 || isProcessPaused) return;
            
            const stepNames = ['', 'Discover', 'Define', 'Standardize', 'Protect', 'Report'];
            const stepActions = {
                1: [
                    'Scanning enterprise systems for data assets...',
                    'Cataloging databases, tables, and fields...',
                    'Mapping system relationships...',
                    'Creating initial data inventory...'
                ],
                2: [
                    'Adding business metadata to assets...',
                    'Drafting field definitions with SMEs...',
                    'Creating metadata dictionary...',
                    'Building field definition cards...'
                ],
                3: [
                    'Selecting Critical Data Elements with business...',
                    'Harmonizing naming conventions...',
                    'Creating CDE register...',
                    'Defining standard transformation logic...'
                ],
                4: [
                    'Configuring quality rules for CDEs...',
                    'Setting up monitoring mechanisms...',
                    'Creating quality dashboard...',
                    'Defining alert thresholds...'
                ],
                5: [
                    'Aggregating coverage and quality metrics...',
                    'Generating governance KPI reports...',
                    'Creating visualized dashboard...',
                    'Preparing improvement recommendations...'
                ]
            };
            
            const stepOutputs = {
                1: ['Initial data-asset inventory', 'System-table-field mapping'],
                2: ['Metadata dictionary (Data Dictionary)', 'Field definition cards'],
                3: ['CDE register', 'Standard mapping/transformation logic'],
                4: ['Quality-rule library', 'Quality dashboard/alert mechanism'],
                5: ['Data Governance Report (visualized)', 'Next-step improvement plan']
            };
            
            // Update step visual state
            const stepEl = document.getElementById(`enhanced-step-${stepNumber}`);
            const colors = ['blue', 'green', 'purple', 'orange', 'indigo'];
            const stepColor = colors[stepNumber - 1];
            
            stepEl.classList.remove('border-gray-200');
            stepEl.classList.add(`border-${stepColor}-500`);
            stepEl.querySelector('.w-12').classList.remove('bg-gray-400');
            stepEl.querySelector('.w-12').classList.add(`bg-${stepColor}-500`);
            
            // Select this step
            selectProcessStep(stepNumber);
            
            // Simulate progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                if (!processRunning || processPaused) {
                    clearInterval(progressInterval);
                    return;
                }
                
                progress += 5;
                updateStepProgress(stepNumber, progress);
                updateOverallProgress((stepNumber - 1) * 20 + (progress / 5), "In Progress...");
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // Mark as completed
                    stepEl.classList.add('completed');
                    
                    // Show step results
                    showStepResults(stepNumber);
                    
                    // Move to next step or complete
                    if (stepNumber < 5) {
                        setTimeout(() => {
                            runEnhancedStep(stepNumber + 1);
                        }, 1000);
                    } else {
                        completeEnhancedProcess();
                    }
                }
            }, 200);
        }
        
        function updateStepProgress(stepNumber, percentage) {
            const progressEl = document.getElementById(`step-${stepNumber}-progress`);
            const barEl = document.getElementById(`step-${stepNumber}-bar`);
            
            if (progressEl && barEl) {
                progressEl.textContent = `${percentage}%`;
                barEl.style.width = `${percentage}%`;
            }
        }
        
        function updateOverallProgress(percentage, status) {
            const progressEl = document.getElementById('overall-progress-text');
            const barEl = document.getElementById('overall-progress-bar');
            
            if (progressEl && barEl) {
                progressEl.textContent = status;
                barEl.style.width = `${percentage}%`;
            }
        }
        
        function showStepResults(stepNumber) {
            const stepNames = ['Discovery', 'Definition', 'Standardization', 'Protection', 'Reporting'];
            const resultsDiv = document.getElementById('enhanced-process-results');
            
            const currentResults = resultsDiv.innerHTML;
            const newResult = `
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold">
                            ‚úì
                        </div>
                        <div>
                            <h5 class="font-bold text-green-800">Step ${stepNumber}: ${stepNames[stepNumber - 1]} - Completed</h5>
                            <p class="text-sm text-green-700">${getStepCompletionMessage(stepNumber)}</p>
                        </div>
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = currentResults + newResult;
        }
        
        function getStepCompletionMessage(stepNumber) {
            const messages = {
                1: "Discovered 127 data fields across 50+ systems, created initial data-asset inventory with complete system mapping",
                2: "Enriched assets with business metadata, created metadata dictionary and field definition cards with 85%+ coverage",
                3: "Selected 44 Critical Data Elements with business teams, created CDE register with standardized transformation logic",
                4: "Configured quality rules for all CDEs, established real-time monitoring dashboard with alert mechanisms",
                5: "Generated comprehensive governance report with KPIs, created next-step improvement plan for stakeholder review"
            };
            return messages[stepNumber] || "";
        }
        
        function completeEnhancedProcess() {
            processRunning = false;
            document.getElementById('pause-btn').style.display = 'none';
            updateOverallProgress(100, "Completed");
            
            // Show final completion message
            const resultsDiv = document.getElementById('enhanced-process-results');
            resultsDiv.innerHTML += `
                <div class="bg-gradient-to-r from-green-50 to-blue-50 border border-green-300 rounded-lg p-6 mt-4">
                    <h4 class="text-xl font-bold text-green-800 mb-4">üéâ Complete Data Governance Process Finished!</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Processing Statistics:</div>
                            <div>‚Ä¢ 11 data assets</div>
                            <div>‚Ä¢ 127 data fields</div>
                            <div>‚Ä¢ 44 CDEs</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Quality Metrics:</div>
                            <div>‚Ä¢ 91% overall quality score</div>
                            <div>‚Ä¢ 85% time savings</div>
                            <div>‚Ä¢ 96% standardization coverage</div>
                        </div>
                        <div class="space-y-2">
                            <div class="font-semibold text-green-700">Business Value:</div>
                            <div>‚Ä¢ $2M+ annual ROI</div>
                            <div>‚Ä¢ 2-3 weeks time to value</div>
                            <div>‚Ä¢ 98% compliance readiness</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded border">
                        <span class="font-semibold text-gray-800">Next Steps:</span> 
                        <span class="text-gray-600">Review AI suggestions, validate CDEs with domain experts, prepare FDA submission materials</span>
                    </div>
                </div>
            `;
        }
        
        function pauseProcess() {
            processPaused = !processPaused;
            const pauseBtn = document.getElementById('pause-btn');
            
            if (processPaused) {
                pauseBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Resume';
                pauseBtn.classList.remove('bg-yellow-500', 'hover:bg-yellow-600');
                pauseBtn.classList.add('bg-green-500', 'hover:bg-green-600');
            } else {
                pauseBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Pause';
                pauseBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                pauseBtn.classList.add('bg-yellow-500', 'hover:bg-yellow-600');
                
                // Resume process
                if (currentEnhancedStep <= 5) {
                    runEnhancedStep(currentEnhancedStep);
                }
            }
        }
        
        function resetEnhancedProcess() {
            processRunning = false;
            processPaused = false;
            currentEnhancedStep = 1;
            
            // Hide pause button
            document.getElementById('pause-btn').style.display = 'none';
            
            // Reset all steps
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById(`enhanced-step-${i}`);
                stepEl.classList.remove('completed', 'border-blue-500', 'border-green-500', 'border-purple-500', 'border-orange-500', 'border-indigo-500');
                stepEl.classList.add('border-gray-200');
                
                const stepCircle = stepEl.querySelector('.w-12');
                stepCircle.classList.remove('bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-indigo-500');
                stepCircle.classList.add('bg-gray-400');
                
                updateStepProgress(i, 0);
            }
            
            // Reset first step to active
            selectProcessStep(1);
            updateOverallProgress(0, "Not Started");
            
            // Clear results
            document.getElementById('enhanced-process-results').innerHTML = '';
        }

        // Data Assets Panel
        function loadDataAssets() {
            // Implement data assets loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/data-assets')
                .then(response => response.json())
                .then(data => {
                    // Process and display the data assets
                    displayDataAssets(data);
                })
                .catch(error => console.error('Error loading data assets:', error));
        }

        function displayDataAssets(data) {
            // Implement logic to display data assets
            // This could involve creating HTML elements to display the data assets
            // For example, you could use innerHTML to insert the data assets into a container
            document.getElementById('data-assets-content').innerHTML = data.map(asset => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${asset.name}</h5>
                    <p class="text-sm text-gray-600">${asset.description}</p>
                </div>
            `).join('');
        }

        // Process Steps Breakdown
        function loadProcessSteps() {
            // Implement process steps loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/process-steps')
                .then(response => response.json())
                .then(data => {
                    // Process and display the process steps
                    displayProcessSteps(data);
                })
                .catch(error => console.error('Error loading process steps:', error));
        }

        function displayProcessSteps(steps) {
            // Implement logic to display process steps
            // This could involve creating HTML elements to display the process steps
            // For example, you could use innerHTML to insert the process steps into a container
            document.getElementById('process-steps-breakdown').innerHTML = steps.map(step => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${step.title}</h5>
                    <p class="text-sm text-gray-600">${step.description}</p>
                </div>
            `).join('');
        }

        // CDEs Panel
        function loadCDEs() {
            // Implement CDEs loading logic
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/cde')
                .then(response => response.json())
                .then(data => {
                    // Process and display the CDEs
                    displayCDEs(data);
                })
                .catch(error => console.error('Error loading CDEs:', error));
        }

        function displayCDEs(cde) {
            // Implement logic to display CDEs
            // This could involve creating HTML elements to display the CDEs
            // For example, you could use innerHTML to insert the CDEs into a container
            document.getElementById('cde-content').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${cde.name}</h5>
                    <p class="text-sm text-gray-600">${cde.description}</p>
                </div>
            `;
        }

        function showDetailedStep(stepNumber) {
            // Update button states
            document.querySelectorAll('.detailed-step-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-500', 'text-white');
                btn.classList.add('bg-gray-300', 'text-gray-600');
            });
            
            document.getElementById(`detailed-step-${stepNumber}`).classList.remove('bg-gray-300', 'text-gray-600');
            document.getElementById(`detailed-step-${stepNumber}`).classList.add('active', 'bg-blue-500', 'text-white');
            
            // Hide all step content
            document.querySelectorAll('.detailed-step-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected step content
            document.getElementById(`detailed-step-content-${stepNumber}`).classList.remove('hidden');
        }

        // Step 3: Standardize Interface
        function loadStandardizeInterface() {
            // Implement logic to load the standardize interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/standardize-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the standardize interface
                    displayStandardizeInterface(data);
                })
                .catch(error => console.error('Error loading standardize interface:', error));
        }

        function displayStandardizeInterface(interfaceData) {
            // Implement logic to display the standardize interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('standardize-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Standardize Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Step 4: Protect Interface
        function loadProtectInterface() {
            // Implement logic to load the protect interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/protect-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the protect interface
                    displayProtectInterface(data);
                })
                .catch(error => console.error('Error loading protect interface:', error));
        }

        function displayProtectInterface(interfaceData) {
            // Implement logic to display the protect interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('protect-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Protect Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Step 5: Report Interface
        function loadReportInterface() {
            // Implement logic to load the report interface
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/report-interface')
                .then(response => response.json())
                .then(data => {
                    // Process and display the report interface
                    displayReportInterface(data);
                })
                .catch(error => console.error('Error loading report interface:', error));
        }

        function displayReportInterface(interfaceData) {
            // Implement logic to display the report interface
            // This could involve creating HTML elements to display the interface data
            // For example, you could use innerHTML to insert the interface data into a container
            document.getElementById('report-interface').innerHTML = `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">Report Interface</h5>
                    <p class="text-sm text-gray-600">${interfaceData.description}</p>
                </div>
            `;
        }

        // Workflow Interaction Functions
        let currentWorkflowStep = 3;
        let workflowProgress = {
            overall: 73,
            currentStep: 67,
            estimatedCompletion: "2.5 days"
        };

        function jumpToWorkflowStep(stepNumber) {
            // Switch to Use Cases & Implementation tab
            showTab('use-cases-content');
            
            // Select the use case (assuming Product Impact on Individual Health)
            setTimeout(() => {
                selectUseCase('Product Impact on Individual Health');
                
                // Wait for the detailed interface to load, then show the specific step
                setTimeout(() => {
                    showDetailedStep(stepNumber);
                }, 500);
            }, 300);
        }

        function markStepComplete(stepNumber) {
            // Update step status
            workflowProgress.currentStep = 100;
            currentWorkflowStep = stepNumber + 1;
            workflowProgress.overall = Math.min(100, workflowProgress.overall + 20);
            
            // Update UI
            updateWorkflowStatusBar();
            
            // Show completion notification
            showNotification(`Step ${stepNumber} marked as complete! üéâ`, 'success');
            
            // Auto-advance to next step if not at the end
            if (stepNumber < 5) {
                setTimeout(() => {
                    jumpToWorkflowStep(stepNumber + 1);
                }, 2000);
            }
        }

        function updateWorkflowStatusBar() {
            // This would update the workflow status bar in the UI
            // Implementation depends on specific UI structure
            console.log(`Workflow updated: Step ${currentWorkflowStep}, Progress: ${workflowProgress.overall}%`);
        }

        function aiContextSearch(query) {
            // Update search input
            document.getElementById('ai-search-input').value = query;
            
            // Simulate AI search with contextual results
            const resultsDiv = document.getElementById('ai-discovery-results');
            resultsDiv.innerHTML = `
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-robot text-blue-600 mr-2"></i>
                        <span class="font-semibold text-blue-800">AI Search Results for: "${query}"</span>
                    </div>
                    <div class="space-y-3">
                        ${getContextualSearchResults(query)}
                    </div>
                </div>
            `;
        }

        function getContextualSearchResults(query) {
            const results = {
                'show me pending CDE approvals': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-green-700">2 CDEs Pending Approval</div>
                        <div class="text-sm text-gray-600">Clinical_Endpoint, Exposure_Biomarker</div>
                        <div class="text-xs text-blue-600 mt-1">SME: Dr. Sarah Chen (Available now)</div>
                    </div>
                `,
                'cotinine standardization rules': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-purple-700">Cotinine Standardization Rules</div>
                        <div class="text-sm text-gray-600">Units: ng/mL, Range: 0.1-500.0, Format: DECIMAL(8,2)</div>
                        <div class="text-xs text-purple-600 mt-1">Based on ICH E6 Guidelines</div>
                    </div>
                `,
                'SME review schedule': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-green-700">Next SME Review</div>
                        <div class="text-sm text-gray-600">June 3, 2024 - 2:00 PM with Dr. Sarah Chen</div>
                        <div class="text-xs text-green-600 mt-1">3 CDEs scheduled for review</div>
                    </div>
                `,
                'biomarker harmonization': `
                    <div class="bg-white p-3 rounded border">
                        <div class="font-medium text-orange-700">Biomarker Harmonization Status</div>
                        <div class="text-sm text-gray-600">6/9 CDEs harmonized (67% complete)</div>
                        <div class="text-xs text-orange-600 mt-1">Est. completion: Tomorrow</div>
                    </div>
                `
            };
            
            return results[query] || `
                <div class="bg-white p-3 rounded border">
                    <div class="font-medium text-gray-700">No specific results found</div>
                    <div class="text-sm text-gray-600">Try one of the suggested context queries</div>
                </div>
            `;
        }

        function mentionTeamMember(member) {
            const members = {
                'sarah': 'Dr. Sarah Chen (Data Steward)',
                'mike': 'Mike Johnson (Data Steward)',
                'lisa': 'Lisa Park (Data Owner)'
            };
            
            const searchInput = document.getElementById('ai-search-input');
            searchInput.value = `@${members[member]} `;
            searchInput.focus();
            
            showNotification(`Mentioning ${members[member]}`, 'info');
        }

        function scheduleReview() {
            showNotification('Review scheduled for June 3, 2024 at 2:00 PM', 'success');
            
            // Update the workflow alerts
            const alertsDiv = document.getElementById('workflow-ai-alerts');
            alertsDiv.innerHTML = `
                <div class="bg-green-500 bg-opacity-30 border border-green-400 rounded-lg p-3 flex items-center">
                    <i class="fas fa-calendar-check text-green-200 mr-3"></i>
                    <div class="text-sm">
                        <strong>Review Scheduled:</strong> June 3, 2024 at 2:00 PM with Dr. Sarah Chen for 3 pending CDEs.
                    </div>
                </div>
            `;
        }

        function scheduleOptimalReview() {
            scheduleReview();
            showNotification('Scheduled during Dr. Chen\'s optimal review time (2-4 PM)', 'success');
        }

        function batchReviewCDEs() {
            showNotification('Batch review initiated for 3 remaining CDEs', 'info');
            
            // Simulate progress update
            setTimeout(() => {
                workflowProgress.currentStep = 89;
                showNotification('Batch review 89% complete', 'info');
            }, 2000);
        }

        function generateProgressReport() {
            showNotification('Generating comprehensive progress report...', 'info');
            
            setTimeout(() => {
                const reportWindow = window.open('', '_blank');
                reportWindow.document.write(`
                    <html>
                        <head><title>Workflow Progress Report</title></head>
                        <body style="font-family: Arial, sans-serif; padding: 20px;">
                            <h1>Data Governance Workflow Progress Report</h1>
                            <h2>Product Impact on Individual Health</h2>
                            <p><strong>Overall Progress:</strong> ${workflowProgress.overall}%</p>
                            <p><strong>Current Step:</strong> Step ${currentWorkflowStep} - Standardize</p>
                            <p><strong>Step Progress:</strong> ${workflowProgress.currentStep}%</p>
                            <p><strong>Estimated Completion:</strong> ${workflowProgress.estimatedCompletion}</p>
                            <h3>Key Achievements:</h3>
                            <ul>
                                <li>157 biomarker fields cataloged</li>
                                <li>6 of 9 CDEs approved</li>
                                <li>94.7% data quality score achieved</li>
                                <li>Team collaboration rate: 95%</li>
                            </ul>
                        </body>
                    </html>
                `);
                showNotification('Progress report generated successfully', 'success');
            }, 1500);
        }

        function escalateToManager() {
            showNotification('Issue escalated to Data Governance Manager', 'warning');
            
            // Update alerts
            const alertsDiv = document.getElementById('workflow-ai-alerts');
            alertsDiv.innerHTML = `
                <div class="bg-orange-500 bg-opacity-30 border border-orange-400 rounded-lg p-3 flex items-center">
                    <i class="fas fa-exclamation-triangle text-orange-200 mr-3"></i>
                    <div class="text-sm">
                        <strong>Escalated:</strong> CDE approval delays escalated to manager. Expected response within 2 hours.
                    </div>
                </div>
            `;
        }

        function scheduleTeamMeeting() {
            showNotification('Team meeting scheduled for tomorrow at 10:00 AM', 'success');
            
            // Update collaboration area
            setTimeout(() => {
                showNotification('Calendar invites sent to all team members', 'info');
            }, 1000);
        }

        function viewUseCaseSuggestion(useCase) {
            // Switch to use cases tab and select the suggested use case
            showTab('use-cases-content');
            setTimeout(() => {
                if (useCase === 'population') {
                    selectUseCase('Product Impact on Population Health');
                }
            }, 500);
        }

        function reviewCDESuggestion() {
            aiContextSearch('show me pending CDE approvals');
        }

        function discoverMissingData() {
            aiContextSearch('find missing biomarker data FDA Section 2.8');
        }

        function showNotification(message, type = 'info') {
            const colors = {
                'success': 'bg-green-100 border-green-400 text-green-700',
                'error': 'bg-red-100 border-red-400 text-red-700',
                'warning': 'bg-yellow-100 border-yellow-400 text-yellow-700',
                'info': 'bg-blue-100 border-blue-400 text-blue-700'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-3 border rounded-lg ${colors[type]} z-50 shadow-lg`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-3 text-lg leading-none">&times;</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Initialize workflow state when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateWorkflowStatusBar();
        });

        // AI-Powered Data Discovery (Simplified) Functions
        function setAIExample(example) {
            const examples = {
                'pending CDEs': 'Show me pending CDE approvals',
                'cotinine biomarkers': 'Where are cotinine biomarkers?',
                'quality metrics': 'What is the current data quality status?',
                'SME availability': 'Which SMEs are available for review?'
            };
            
            document.getElementById('ai-search-input').value = examples[example] || example;
            aiSearchData();
        }

        // AI Insights Panel
        function loadAIInsights() {
            // Implement logic to load AI insights based on the search query
            // This could involve fetching data from a database or an API
            // For example, you could use fetch to get data from a JSON endpoint
            fetch('/api/ai-insights')
                .then(response => response.json())
                .then(data => {
                    // Process and display the AI insights
                    displayAIInsights(data);
                })
                .catch(error => console.error('Error loading AI insights:', error));
        }

        // AI Insights Panel
        function displayAIInsights(insights) {
            const insightsDiv = document.getElementById('ai-insights-panel');
            insightsDiv.innerHTML = insights.map(insight => `
                <div class="bg-white rounded-lg p-4 mb-4">
                    <h5 class="font-semibold text-gray-800 mb-2">${insight.title}</h5>
                    <p class="text-sm text-gray-600">${insight.description}</p>
                </div>
            `).join('');
        }
    </script>
</body>
</html> 